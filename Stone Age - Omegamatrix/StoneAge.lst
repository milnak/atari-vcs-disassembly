------- FILE C:\Users\Jeff\Documents\Games\Atari\Disassemblies\StoneAge\StoneAge\Source\StoneAge.asm LEVEL 1 PASS 2
      1  10000 ????						; Disassembly of Stone Age (CCE)
      2  10000 ????						; By Omegamatrix
      3  10000 ????						; Last update Jan 19, 2013
      4  10000 ????						;
      5  10000 ????						;
      6  10000 ????						;
      7  10000 ????						; See this thread for more information:
      8  10000 ????						; http://atariage.com/forums/topic/67442-stone-age-cce/
      9  10000 ????						;
     10  10000 ????						;
     11  10000 ????						; The Stone Age rom came from the pirate company CCE. It is believed that CCE "acquired" the rom somehow from TechnoVision,
     12  10000 ????						; and then did a poor job converting it to 60Hz. This assembly can compile a much better version of the NTSC rom, and can create
     13  10000 ????						; a PAL or PAL60 rom. Numerous changes are in place, and a brief list of what was done for the new versions are as follows:
     14  10000 ????						;
     15  10000 ????						; 1) Changed colors from PAL to NTSC (for NTSC version).
     16  10000 ????						; 2) Fixed scanline count (from 246) to 262.
     17  10000 ????						;	- reduced some of the blank, unused screen from below the score bar to the first row of stones
     18  10000 ????						;	- centered the screen better
     19  10000 ????						; 3) Added the TechnoVision logo. The logo color was also changed to black.
     20  10000 ????						; 4) Swapped the players around. The CCE rom had the first player using the right joystick port, which is backwards.
     21  10000 ????						;	- switched joysticks and firebuttons
     22  10000 ????						;	- switched difficulty settings, so the first player uses the left difficultly switch
     23  10000 ????						;	- switched the lives display so that the first players lives is displayed on the left
     24  10000 ????						; 5) Swapped the hard and easy setting around. The CCE rom had the "B" setting as hard, which is backwards.
     25  10000 ????						; 6) Fixed a direction bug. If two directions were pressed at once, then the Caveman would always throw a stone to the right.
     26  10000 ????						; 7) Enabled some dinosaur graphics that were in the rom, but never used. Now the dinosaurs are more animated.
     27  10000 ????						; 8) Reduced the volume of the main music theme. The original blasted it out at full volume, and it hurt.
     28  10000 ????						; 9) Fixed positioning bug for columns 5 and 10. The dinosaur and caveman would be off by 1 pixel in these columns.
     29  10000 ????						;
     30  10000 ????						;
     31  10000 ????						; I'm not sure if the disassembly is 100% correct about the dinosaur movement logic, but I'm out of steam on this project. The
     32  10000 ????						; disassembly is good in all the other places that I can see.
     33  10000 ????						;
     34  10000 ????						;
     35  10000 ????						; In general the programmer reused their code a lot. The same logic for checking the stones and updating pointers appears all
     36  10000 ????						; over the rom. There were very slight changes to the re-used code such as different branch condition, other times a variable
     37  10000 ????						; might get updated. If a person were to hack the rom further then I would suggest to start by writing a subroutine that handled
     38  10000 ????						; all of the stone/enemy/boundary checks. It would be a real good idea to make that routine check the stone bits using tables
     39  10000 ????						; instead of shifting each time. There is a ton of ram not used, and a ton more that can be reclaimed. A lot of ram is only using
     40  10000 ????						; 1 bit out of 8. I think the game could easily check all dinosaurs and the caveman for movement options and collisions each frame.
     41  10000 ????						; It would be better to do some and get rid of some the bugs which are probably resulting from tasks spread over many frames.
     42  10000 ????						; The caveman row/column ram bytes should be combined into one like the dinosaur ones are. The graphic pointers should be loaded
     43  10000 ????						; through an index table. All of these things would greatly simplify the code making it shorter, faster, less error prone, and
     44  10000 ????						; easier to troubleshoot. After that the kernel could be looked at, with the idea of multiplexing the sprites so the flicker goes
     45  10000 ????						; down.
     46  10000 ????						;
     47  10000 ????						;
     48  10000 ????						;
     49  10000 ????						;
     50  10000 ????						; NOTES:
     51  10000 ????						; - Colors in the CCE rom were PAL, when changed to NTSC the caveman changed to having a pink skin color instead of blue.
     52  10000 ????						; - Level 1's stone data appears in another place in the rom, and is unused. It looks like it was put there while the
     53  10000 ????						;   StoneHorzPosTab or StoneShapesTab's were being constructed, and then forgotten or ignored.
     54  10000 ????						; - There is some garbage bytes at the end of the rom. It might be code... but more likely data from something else. Be interesting
     55  10000 ????						;   to match it to other roms. I took a look and the other Technovision roms don't have these bytes.
     56  10000 ????						; - Joystick and difficulty settings were reversed from normal. Perhaps a pirate console was used?
     57  10000 ????						; - Some dinosaur graphics were never used. I have restored these to animate them.
     58  10000 ????						; - There is no way of increasing lives. The GAME_OVER_FLAG depends on P0 dieing before P1,
     59  10000 ????						;   otherwise it would get screwed up and end game when P1 lost their final life even if P0 still had some lives left.
     60  10000 ????						; - The translated manual says dinosaurs can escape through the stones. I haven't seen this, but did notice one time
     61  10000 ????						;   that I was able to pushing right above the dinosaur, and then the dinosaur moved on top of the stone and out.
     62  10000 ????						;   Looks like a glitch in the programming (probably frame sequencing).
     63  10000 ????						; - Dinosaurs and Caveman freeze in place while a stone is in motion.
     64  10000 ????						; - The scores toggle after the game is over, if it was a two player game.
     65  10000 ????						; - Hardware collisions, muliplexing dinosaurs, and sequencing things on different frames all leads to the cavemna walking through dinosaurs sometimes.
     66  10000 ????						; - Channel zero's audio registers control the main theme, everything else including the starting theme is done channel one.
     67  10000 ????						; - The music is very irritating. The melody should be kept, but the tone is just to sharp, and volume to loud.
     68  10000 ????						; - The stone throwing logic is wrong, if you press 2 directions at once then the stone to the right will get thrown (if there is one).
     69  10000 ????						;   It doesn't matter which directions are pressed either, pressing two at once will always default to a right throw.
     70  10000 ????						; - The above direction mistake is also repeated in the logic to move the stone.
     71  10000 ????						; - And again, the direction logic error is repeated in the caveman movement...
     72  10000 ????						; - The dinosaurs being able to jump out of "traps" might be caused by using 2 different indexes.
     73  10000 ????						; - both column 5 and 10 had a shift value off by one pixel. I've included a fix so the positioning in every column is the same.
     74  10000 ????
     75  10000 ????
     76  10000 ????
     77  10000 ????				       processor	6502
     78  10000 ????
------- FILE vcs.h LEVEL 2 PASS 2
------- FILE C:\Users\Jeff\Documents\Games\Atari\Disassemblies\StoneAge\StoneAge\Source\StoneAge.asm
------- FILE macro107.h LEVEL 2 PASS 2
------- FILE C:\Users\Jeff\Documents\Games\Atari\Disassemblies\StoneAge\StoneAge\Source\StoneAge.asm
------- FILE stoneAge.h LEVEL 2 PASS 2
------- FILE C:\Users\Jeff\Documents\Games\Atari\Disassemblies\StoneAge\StoneAge\Source\StoneAge.asm
------- FILE colors.h LEVEL 2 PASS 2
------- FILE C:\Users\Jeff\Documents\Games\Atari\Disassemblies\StoneAge\StoneAge\Source\StoneAge.asm
     84  0000 ????				      LIST	ON
     85  0000 ????
     86  0000 ????						;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     87  0000 ????						;	USER CONSTANTS
     88  0000 ????						;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     89  0000 ????
     90  0000 ????	       00 00	   ORIGINAL   =	0	; 1 = CCE version
     91  0000 ????	       00 00	   PAL	      =	0	; 0 = NTSC
     92  0000 ????	       00 00	   PAL_60     =	0	; 0 = NTSC
     93  0000 ????
     94  0000 ????			  -	      IF	ORIGINAL
     95  0000 ????			  -CCE_LOGO   =	1
     96  0000 ????			  -TECHNOVISION_LOGO =	0
     97  0000 ????			  -REVERSED_CONTROLS =	1
     98  0000 ????			  -BAD_DIRECTIONS =	1
     99  0000 ????			  -OFF_CENTER_POSITION =	1
    100  0000 ????			  -TIME_VBLANK =	32
    101  0000 ????			  -COL_NTSC   =	0
    102  0000 ????			  -COL_LOGO   =	COL_D6
    103  0000 ????			  -
    104  0000 ????			  -TONE_MAIN_THEME =	$04
    105  0000 ????			  -FREQ_START_MAIN_THEME =	$12
    106  0000 ????			  -VOL_MAIN_THEME =	$0F
    107  0000 ????			  -
    108  0000 ????				      ELSE
    109  0000 ????						;---------------------------------------
    110  0000 ????	       00 00	   CCE_LOGO   =	0
    111  0000 ????	       00 01	   TECHNOVISION_LOGO =	1
    112  0000 ????	       00 00	   REVERSED_CONTROLS =	0
    113  0000 ????	       00 00	   BAD_DIRECTIONS =	0
    114  0000 ????	       00 00	   OFF_CENTER_POSITION =	0
    115  0000 ????	       00 01	   ANIMATE_DINO =	1	; animate the dinosaur with graphics previously not called
    116  0000 ????
    117  0000 ????			  -	      IF	PAL
    118  0000 ????			  -TIME_VBLANK =	55
    119  0000 ????			  -COL_NTSC   =	0
    120  0000 ????			  -OVERSCAN_DELAY =	54	; scanlines
    121  0000 ????				      ELSE
    122  0000 ????	       00 27	   TIME_VBLANK =	39
    123  0000 ????			  -	      IF	PAL_60
    124  0000 ????			  -COL_NTSC   =	0
    125  0000 ????				      ELSE
    126  0000 ????	       00 01	   COL_NTSC   =	1
    127  0000 ????				      ENDIF
    128  0000 ????	       00 11	   OVERSCAN_DELAY =	17	; scanlines
    129  0000 ????				      ENDIF
    130  0000 ????
    131  0000 ????	       00 04	   TONE_MAIN_THEME =	$04
    132  0000 ????	       00 12	   FREQ_START_MAIN_THEME =	$12	; this quickly changes to a different value
    133  0000 ????	       00 08	   VOL_MAIN_THEME =	$08	; lower the volume
    134  0000 ????
    135  0000 ????	       00 00	   COL_LOGO   =	COL_00
    136  0000 ????						;---------------------------------------
    137  0000 ????				      ENDIF
    138  0000 ????
    139  0000 ????
    140  0000 ????						;colors
    141  0000 ????	       00 42	   COL_P0     =	COL_42
    142  0000 ????	       00 94	   COL_P1     =	COL_94
    143  0000 ????
    144  0000 ????	       00 2a	   COL_SCORE  =	COL_2A
    145  0000 ????	       00 42	   COL_SCORE_BAR_P0 =	COL_P0
    146  0000 ????	       00 94	   COL_SCORE_BAR_P1 =	COL_P1
    147  0000 ????	       00 da	   COL_LOGO_BAR =	COL_DA
    148  0000 ????	       00 2a	   COL_PF_STONES =	COL_2A
    149  0000 ????	       00 b8	   COL_PF_STONES_BLUE =	COL_B8	; time almost done!
    150  0000 ????
    151  0000 ????	       00 36	   COL_DINO1  =	COL_36
    152  0000 ????	       00 56	   COL_DINO2  =	COL_56
    153  0000 ????	       00 ba	   COL_DINO3  =	COL_BA
    154  0000 ????	       00 16	   COL_DINO4  =	COL_16
    155  0000 ????
    156  0000 ????			  -	      IF	REVERSED_CONTROLS
    157  0000 ????			  -COL_LIVES_LEFT_PF =	COL_P1
    158  0000 ????			  -COL_LIVES_RIGHT_PF =	COL_P0
    159  0000 ????				      ELSE
    160  0000 ????	       00 42	   COL_LIVES_LEFT_PF =	COL_P0
    161  0000 ????	       00 94	   COL_LIVES_RIGHT_PF =	COL_P1
    162  0000 ????				      ENDIF
    163  0000 ????
    164  0000 ????						;stone graphics
    165  0000 ????	       00 07	   STONE_PAT_1 =	%0111
    166  0000 ????	       00 05	   STONE_PAT_2 =	%0101
    167  0000 ????
    168  0000 ????						;flip the graphics for PF0, and PF2
    169  0000 ????	       00 0e	   STONE_PAT_1_FLIPPED =	((STONE_PAT_1 & %0001) << 3) | ((STONE_PAT_1 & %0010) << 1) | ((STONE_PAT_1 & %0100) >> 1) | ((STONE_PAT_1 & %1000) >> 3)
    170  0000 ????	       00 0a	   STONE_PAT_2_FLIPPED =	((STONE_PAT_2 & %0001) << 3) | ((STONE_PAT_2 & %0010) << 1) | ((STONE_PAT_2 & %0100) >> 1) | ((STONE_PAT_2 & %1000) >> 3)
    171  0000 ????
    172  0000 ????	       00 01	   RESET_SWITCH =	(1 << 0)
    173  0000 ????	       00 02	   SELECT_SWITCH =	(1 << 1)
    174  0000 ????	       00 40	   DIFFICULTY_SWITCH_P1 =	(1 << 6)
    175  0000 ????
    176  0000 ????	       00 03	   START_LIVES =	3	; lives display is not set up to handle any more than 3 lives...
    177  0000 ????	       00 01	   SELECT_GAME_MODE =	1	; toggles between 1 and 2 player games by EOR'ing the player number
    178  0000 ????	       00 04	   NUM_OF_DINOSAURS =	4	; the game is not set up to handle more
    179  0000 ????	       00 03	   NUM_OF_DINO_MASK =	$03	; dinosaurs are zero-based (0, 1, 2, and 3)
    180  0000 ????
    181  0000 ????						;flags
    182  0000 ????	       00 01	   CAVEMAN_MOVEMENT_FLAG =	1
    183  0000 ????	       00 00	   CLEAR_CAVEMAN_FLAG =	0	; (~CAVEMAN_MOVEMENT_FLAG & CAVEMAN_MOVEMENT_FLAG)
    184  0000 ????	       00 80	   ALLOW_JOYSTICK_FLAG =	(1 << 7)
    185  0000 ????	       00 ff	   GAME_OVER_FLAG =	-1 & $FF
    186  0000 ????	       00 00	   DEAD_DINOSAUR_FLAG =	0
    187  0000 ????	       00 01	   STONE_CRUSHED_FLAG =	1
    188  0000 ????	       00 00	   STONE_NOT_CRUSHED_FLAG =	0
    189  0000 ????						;both of these flags are not essential to the routines that use them,
    190  0000 ????						;they could easily be written out.
    191  0000 ????	       00 80	   STONE_MOVING_FLAG =	(1 << 7)
    192  0000 ????	       00 00	   STONE_NOT_SLIDING_FLAG =	0	; (~STONE_MOVING_FLAG & STONE_MOVING_FLAG)
    193  0000 ????
    194  0000 ????
    195  0000 ????	       00 4b	   TIME_LIMIT =	75	; total frames before you die (out of time)
    196  0000 ????	       00 0f	   TIME_WARNING =	15	; the stones change color when the time warning occurs
    197  0000 ????
    198  0000 ????
    199  0000 ????						;masks
    200  0000 ????	       00 01	   ODD_EVEN_PTRS_MASK =	$01
    201  0000 ????	       00 10	   PF0_INDEX_MASK =	$10
    202  0000 ????	       00 0c	   PF1_INDEX_MASK =	$0C
    203  0000 ????	       00 03	   PF2_INDEX_MASK =	$03
    204  0000 ????	       00 0f	   LEVEL_MASK =	$0F
    205  0000 ????	       00 0f	   DELAY_POS_MASK =	$0F	; separate the delay loop value from HMPx value in the positioning routines.
    206  0000 ????	       00 01	   RIGHTSIDE_PF_MASK =	$01	; the index is an odd number when indexing the stone data for the rightside of the PF
    207  0000 ????
    208  0000 ????	       00 07	   EIGHT_FRAME_MASK =	$07
    209  0000 ????	       00 0f	   SIXTEEN_FRAME_MASK =	$0F
    210  0000 ????	       00 1f	   THIRTY_TWO_FRAME_MASK =	$1F
    211  0000 ????	       00 3f	   SIXTY_FOUR_FRAME_MASK =	$3F
    212  0000 ????
    213  0000 ????
    214  0000 ????	       00 07	   MUSIC_MASK =	EIGHT_FRAME_MASK
    215  0000 ????	       00 07	   HARD_SETTING_MASK =	EIGHT_FRAME_MASK	; AND'd with framecounter, dinosaurs move twice as fast
    216  0000 ????	       00 0f	   EASY_SETTING_MASK =	SIXTEEN_FRAME_MASK	; AND'd with framecounter, slow dinosaur movement...
    217  0000 ????	       00 0f	   DEATH_FRAMES_MASK =	SIXTEEN_FRAME_MASK
    218  0000 ????	       00 1f	   CRUSHED_STONE_MASK =	THIRTY_TWO_FRAME_MASK
    219  0000 ????	       00 3f	   SECONDS_MASK =	SIXTY_FOUR_FRAME_MASK	; 64 is ~60fps, close to 1 second, but not so close if doing 50fps
    220  0000 ????
    221  0000 ????						;- frameCounter is incremented right before VSYNC starts
    222  0000 ????						;- frameCounter is decremented once every 16 frames if the joystick is being pressed.
    223  0000 ????						;- frameCounter is set to zero when a new level starts, or the death sequence starts.
    224  0000 ????
    225  0000 ????						;masked zero frame events
    226  0000 ????						;1) SECONDS_MASK & frameCounter == 0, secondsCounter is increased. secondsCounter is checked on a masked subframe 1
    227  0000 ????						;2) MUSIC_MASK & frameCounter == 0, starting tune or main music theme is updated.
    228  0000 ????						;3) DEATH_FRAMES_MASK & frameCounter == 0, move to next animation in death sequence.
    229  0000 ????						;4) frameCounter == 0, the player number gets toggled to show each score after both players are dead
    230  0000 ????						;5) frameCounter == 0, the following code is executed before overscan ends, but seems to have no effect?
    231  0000 ????						;     ldx    dinoDrawIndex
    232  0000 ????						;     lda    dinoDirection,X
    233  0000 ????						;     ora    #DIRECTION_MASK
    234  0000 ????						;     sta    dinoDirection,X
    235  0000 ????
    236  0000 ????						;other masked frame events
    237  0000 ????	       00 01	   TIME_LEFT_SUBFRAME =	1	; masked by EIGHT_FRAME_MASK
    238  0000 ????	       00 01	   DINO_MOVE_CHOICES_SUBFRAME =	1	; masked by EIGHT_FRAME_MASK (hard setting) or SIXTEEN_FRAME_MASK (easy setting)
    239  0000 ????	       00 02	   DINO_DO_MOVEMENT_SUBFRAME =	2	; masked by EIGHT_FRAME_MASK (hard setting) or SIXTEEN_FRAME_MASK (easy setting)
    240  0000 ????	       00 06	   STONE_UPDATE_SUBFRAME =	6	; masked by EIGHT_FRAME_MASK
    241  0000 ????	       00 06	   CHECK_THROW_SUBFRAME =	6	; masked by EIGHT_FRAME_MASK
    242  0000 ????	       00 06	   CRUSHED_STONE_SUBFRAME =	6	; masked by THIRTY_TWO_FRAME_MASK
    243  0000 ????	       00 07	   LEVEL_DONE_SUBFRAME =	7	; masked by EIGHT_FRAME_MASK
    244  0000 ????	       00 07	   SCORE_UPDATE_SUBFRAME =	7	; masked by EIGHT_FRAME_MASK
    245  0000 ????	       00 07	   DINO_POINTS_SUBFRAME =	7	; masked by EIGHT_FRAME_MASK
    246  0000 ????
    247  0000 ????
    248  0000 ????	       00 08	   EIGHT_BITS =	8
    249  0000 ????
    250  0000 ????						;caveman
    251  0000 ????	       00 01	   UP_DIRECTION =	(1 << 0)
    252  0000 ????	       00 02	   DOWN_DIRECTION =	(1 << 1)
    253  0000 ????	       00 04	   LEFT_DIRECTION =	(1 << 2)
    254  0000 ????	       00 08	   RIGHT_DIRECTION =	(1 << 3)
    255  0000 ????	       00 0f	   DIRECTION_MASK =	(RIGHT_DIRECTION | LEFT_DIRECTION | DOWN_DIRECTION | UP_DIRECTION)
    256  0000 ????	       00 f0	   CURRENT_DIR_MASK =	(DIRECTION_MASK << 4)
    257  0000 ????	       00 ff	   JOY_NOT_PRESSED =	-1 & $FF	; (~DIRECTION_MASK | DIRECTION_MASK)  ; used by CheckForStoneThrow SUBROUTINE, as joystick needs to be pressed to throw a stone
    258  0000 ????
    259  0000 ????						;dinosaurs, direction they are moving
    260  0000 ????	       00 10	   TRAVEL_UP  =	(UP_DIRECTION << 4)
    261  0000 ????	       00 20	   TRAVEL_DOWN =	(DOWN_DIRECTION << 4)
    262  0000 ????	       00 40	   TRAVEL_LEFT =	(LEFT_DIRECTION << 4)
    263  0000 ????	       00 80	   TRAVEL_RIGHT =	(RIGHT_DIRECTION << 4)
    264  0000 ????
    265  0000 ????						;dinosaurs, suppress the direction opposite to current travel
    266  0000 ????	       00 0e	   UP_NOT_ALLOWED_MASK =	(~UP_DIRECTION & DIRECTION_MASK)
    267  0000 ????	       00 0d	   DOWN_NOT_ALLOWED_MASK =	(~DOWN_DIRECTION & DIRECTION_MASK)
    268  0000 ????	       00 0b	   LEFT_NOT_ALLOWED_MASK =	(~LEFT_DIRECTION & DIRECTION_MASK)
    269  0000 ????	       00 07	   RIGHT_NOT_ALLOWED_MASK =	(~RIGHT_DIRECTION & DIRECTION_MASK)
    270  0000 ????
    271  0000 ????						;dinosaurs, direction clear of stones or boundaries
    272  0000 ????	       00 f1	   UP_IS_CLEAR =	CURRENT_DIR_MASK | UP_DIRECTION
    273  0000 ????	       00 f2	   DOWN_IS_CLEAR =	CURRENT_DIR_MASK | DOWN_DIRECTION
    274  0000 ????	       00 f4	   LEFT_IS_CLEAR =	CURRENT_DIR_MASK | LEFT_DIRECTION
    275  0000 ????	       00 f8	   RIGHT_IS_CLEAR =	CURRENT_DIR_MASK | RIGHT_DIRECTION
    276  0000 ????
    277  0000 ????						;stones, when thrown
    278  0000 ????	       00 fe	   STONE_UP_DIR =	(STONE_MOVING_FLAG | ~UP_DIRECTION) & $FF
    279  0000 ????	       00 fd	   STONE_DOWN_DIR =	(STONE_MOVING_FLAG | ~DOWN_DIRECTION) & $FF
    280  0000 ????	       00 fb	   STONE_LEFT_DIR =	(STONE_MOVING_FLAG | ~LEFT_DIRECTION) & $FF
    281  0000 ????	       00 f7	   STONE_RIGHT_DIR =	(STONE_MOVING_FLAG | ~RIGHT_DIRECTION) & $FF
    282  0000 ????
    283  0000 ????
    284  0000 ????	       00 0a	   NUM_OF_COLUMNS =	10
    285  0000 ????	       00 08	   NUM_OF_ROWS =	8
    286  0000 ????	       00 01	   TOP_ROW    =	1	; the game uses 1 as top row to 8 as bottom row, but the macros I constructed flip it around
    287  0000 ????	       00 08	   BOTTOM_ROW =	NUM_OF_ROWS	; because it is more natural to to me to think of going up as "increasing" values...
    288  0000 ????
    289  0000 ????	       00 01	   ZERO_INDEX_CORRECTION =	1
    290  0000 ????	       00 02	   TWO_BYTES  =	2
    291  0000 ????	       00 02	   ONE_ROW_OF_BYTES =	TWO_BYTES
    292  0000 ????	       00 02	   TOP_ROW_BYTE_INDEX =	TOP_ROW * TWO_BYTES
    293  0000 ????	       00 0e	   BOTTOM_ROW_BYTE_INDEX =	(BOTTOM_ROW * TWO_BYTES) - ONE_ROW_OF_BYTES
    294  0000 ????
    295  0000 ????	       00 08	   HEIGHT_LOGO_NUM =	8
    296  0000 ????	       00 05	   HEIGHT_LIVES_DISPLAY =	5
    297  0000 ????	       00 08	   HORIZ_POSITION_DISPLAY =	8	; delay value for positioning score, logo. If value is changed then the loop which draws
    298  0000 ????						; the score/logo must also be changed so the digit graphics are updated at the correct time.
    299  0000 ????
    300  0000 ????	       00 01	   CRUSHED_ROCK_POINTS =	($10 >> 4)	; BCD, one's digit is hardcoded as zero
    301  0000 ????
    302  0000 ????	       00 01	   LEFTMOST_COLUMN =	1
    303  0000 ????	       00 0a	   RIGHTMOST_COLUMN =	NUM_OF_COLUMNS
    304  0000 ????	       00 0f	   DINO_COLUMN_MASK =	$0F
    305  0000 ????	       00 01	   ONE_COLUMN =	1	; for incrementing/decrementing columns
    306  0000 ????	       00 10	   ONE_ROW    =	(1 << 4)	; for incrementing/decrementing rows
    307  0000 ????	       00 04	   COLUMN_INDEX_START =	(LEFTMOST_COLUMN + EIGHT_BITS-(NUM_OF_COLUMNS/2))
    308  0000 ????	       00 08	   COLUMN_INDEX_END =	EIGHT_BITS
    309  0000 ????	       00 08	   SHIFT_STONE_5 =	EIGHT_BITS
    310  0000 ????	       00 03	   SHIFT_STONE_6 =	EIGHT_BITS-(NUM_OF_COLUMNS/2)
    311  0000 ????	       00 03	   SHIFT_UNUSED_BITS =	EIGHT_BITS-(NUM_OF_COLUMNS/2)
    312  0000 ????	       00 80	   ONE_STONE  =	(1 << 7)	; shifts until in postion
    313  0000 ????
    314  0000 ????	       00 01	   DEAD_DINO_POS =	1	; set row to zero, column to 1
    315  0000 ????
    316  0000 ????	       00 04	   DEATH_GFX_INDEX =	((EndDeathPtrs - DeathGfxPtrs)/2 -1)
    317  0000 ????
    318  0000 ????
    319  0000 ????
    320  0000 ????						;audio
    321  0000 ????	       00 0d	   STARTING_TUNE_LENGTH =	(FinishLevelBeginFreqTab - LevelBeginFreqTab)
    322  0000 ????	       00 38	   MAIN_THEME_LENGTH =	(ThemeSongFinish - ThemeSongFreqTab)
    323  0000 ????
    324  0000 ????	       00 04	   TONE_START_TUNE =	$04
    325  0000 ????	       00 0f	   VOL_START_TUNE =	$0F
    326  0000 ????
    327  0000 ????	       00 05	   FREQ_CRUSHED_STONE =	$05
    328  0000 ????	       00 0b	   VOL_CRUSHED_STONE =	$0B
    329  0000 ????
    330  0000 ????	       00 06	   TONE_DEATH =	$06
    331  0000 ????	       00 03	   FREQ_DEATH =	$03
    332  0000 ????	       00 0d	   VOL_DEATH  =	$0D
    333  0000 ????
    334  0000 ????	       00 01	   FREQ_DEAD_DINO =	$01
    335  0000 ????
    336  0000 ????	       00 07	   FREQ_STONE_SLIDING =	$07
    337  0000 ????
    338  0000 ????						;found in "DO_STONE_THROW" macro
    339  0000 ????	       00 03	   TONE_SLIDING_STONE =	$03
    340  0000 ????	       00 07	   FREQ_SLIDING_STONE =	$07
    341  0000 ????	       00 0d	   VOL_SLIDING_STONE =	$0D
    342  0000 ????
    343  0000 ????
    344  0000 ????
    345  0000 ????
    346  0000 ????						;REFPx
    347  0000 ????	       00 00	   NO_REFLECT =	0
    348  0000 ????	       00 08	   REFLECT_GFX =	(1 << 3)
    349  0000 ????
    350  0000 ????						;CTRLPF
    351  0000 ????	       00 01	   REFLECT_PF =	1
    352  0000 ????
    353  0000 ????						;HMxx
    354  0000 ????	       00 70	   LEFT_7     =	( 7 << 4)
    355  0000 ????	       00 60	   LEFT_6     =	( 6 << 4)
    356  0000 ????	       00 50	   LEFT_5     =	( 5 << 4)
    357  0000 ????	       00 40	   LEFT_4     =	( 4 << 4)
    358  0000 ????	       00 30	   LEFT_3     =	( 3 << 4)
    359  0000 ????	       00 20	   LEFT_2     =	( 2 << 4)
    360  0000 ????	       00 10	   LEFT_1     =	( 1 << 4)
    361  0000 ????	       00 00	   NO_MOTION  =	( 0 << 4)
    362  0000 ????	       00 f0	   RIGHT_1    =	(-1 << 4) & $FF
    363  0000 ????	       00 e0	   RIGHT_2    =	(-2 << 4) & $FF
    364  0000 ????	       00 d0	   RIGHT_3    =	(-3 << 4) & $FF
    365  0000 ????	       00 c0	   RIGHT_4    =	(-4 << 4) & $FF
    366  0000 ????	       00 b0	   RIGHT_5    =	(-5 << 4) & $FF
    367  0000 ????	       00 a0	   RIGHT_6    =	(-6 << 4) & $FF
    368  0000 ????	       00 90	   RIGHT_7    =	(-7 << 4) & $FF
    369  0000 ????	       00 80	   RIGHT_8    =	(-8 << 4) & $FF
    370  0000 ????
    371  0000 ????						;NUSIZx
    372  0000 ????	       00 00	   ONE_COPY   =	0
    373  0000 ????	       00 01	   TWO_COPIES_CLOSE =	1
    374  0000 ????	       00 02	   TWO_COPIES_MED =	2
    375  0000 ????	       00 03	   THREE_COPIES_CLOSE =	3
    376  0000 ????	       00 04	   TWO_COPIES_WIDE =	4
    377  0000 ????	       00 05	   DOUBLE_SIZE =	5
    378  0000 ????	       00 06	   THREE_COPIES_MED =	6
    379  0000 ????	       00 07	   QUAD_SIZE  =	7
    380  0000 ????
    381  0000 ????						;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    382  0000 ????						;	RIOT RAM
    383  0000 ????						;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    384  0000 ????
    385 U0100 ????				      SEG.U	RIOT_RAM
    386 U0080					      ORG	$80
    387 U0080
    388 U0080		       00	   gameMode   ds	1	; $80	0 = one player game, 1 = two player game
    389 U0081		       00	   frameCounter ds	1	; $81
    390 U0082		       00	   secondsCounter ds	1	; $82	Not precisely 1 second, increments every 64 frames
    391 U0083		       00	   rowCounter ds	1	; $83
    392 U0084		       00	   rowCaveman ds	1	; $84
    393 U0085		       00	   rowCurrentDino ds	1	; $85
    394 U0086		       00 00	   cavemanPtr ds	2	; $86-$87
    395 U0088							;---------------------------------------
    396 U0088		       00 00	   tempPtr    ds	2	; $88-$89
    397 U0088		       00 88	   dinosaurPtr equ	tempPtr
    398 U008a							;---------------------------------------
    399 U008a		       00 00 00 00*scorePtrs  ds	8	; $8A-$91
    400 U0092		       00 00 00 00*stoneOrder ds	16	; $92-A1
    401 U00a2		       00	   stoneGfxA_Pf0Left ds	1	; $A2	stone PF shapes, solid lines
    402 U00a3		       00	   stoneGfxA_Pf1Left ds	1	; $A3
    403 U00a4		       00	   stoneGfxA_Pf2Left ds	1	; $A4
    404 U00a5		       00	   stoneGfxA_Pf0Right ds	1	; $A5
    405 U00a6		       00	   stoneGfxA_Pf1Right ds	1	; $A6
    406 U00a7		       00	   stoneGfxA_Pf2Right ds	1	; $A7
    407 U00a8		       00	   indexGraphics ds	1	; $A8
    408 U00a9		       00	   indexStoneBytes ds	1	; $A9
    409 U00aa		       00 00	   cavemanColPtr ds	2	; $AA-$AB
    410 U00ac		       00	   indexFreq  ds	1	; $AC
    411 U00ad							;---------------------------------------
    412 U00ad		       00	   tempOne    ds	1	; $AD
    413 U00ad		       00 ad	   t1_digitFour equ	tempOne
    414 U00ad		       00 ad	   t1_dinoDirection equ	tempOne
    415 U00ad		       00 ad	   t1_dinoMoveChoices equ	tempOne
    416 U00ad		       00 ad	   t1_singleStone equ	tempOne
    417 U00ad		       00 ad	   t1_dinoColumn equ	tempOne
    418 U00ad		       00 ad	   t1_dinoRow equ	tempOne
    419 U00ad		       00 ad	   t1_defaultDino equ	tempOne
    420 U00ae							;---------------------------------------
    421 U00ae		       00	   tempTwo    ds	1	; $AE
    422 U00ae		       00 ae	   t2_loopCount equ	tempTwo
    423 U00ae		       00 ae	   t2_attractDirection equ	tempTwo
    424 U00ae		       00 ae	   t2_dinoCurrentDir equ	tempTwo
    425 U00af							;---------------------------------------
    426 U00af		       00	   columnCaveman ds	1	; $AF
    427 U00b0		       00	   reflectCaveman ds	1	; $B0
    428 U00b1		       00	   columnCurrentDino ds	1	; $B1
    429 U00b2							;---------------------------------------
    430 U00b2		       00	   ram_B2     ds	1	; $B2
    431 U00b2		       00 b2	   currentDinoRow equ	ram_B2
    432 U00b2		       00 b2	   indexStoneByteDino equ	ram_B2
    433 U00b2		       00 b2	   indexStoneByteCaveman equ	ram_B2
    434 U00b2		       00 b2	   indexStoneByteThrow equ	ram_B2
    435 U00b3							;---------------------------------------
    436 U00b3		       00	   ram_B3     ds	1	; $B3
    437 U00b3		       00 b3	   currentDinoColumn equ	ram_B3
    438 U00b3		       00 b3	   stoneBitDinoIsOn equ	ram_B3
    439 U00b3		       00 b3	   stoneBitCavemanIsOn equ	ram_B3
    440 U00b3		       00 b3	   stoneColumnThrowIsOn equ	ram_B3
    441 U00b4							;---------------------------------------
    442 U00b4		       00	   obstacleFreeDir ds	1	; $B4
    443 U00b5		       00 00 00 00 reflectDinoGfx ds	4	; $B5-$B8
    444 U00b9		       00 00 00 00 dinoLoPtr  ds	4	; $B9-$BC
    445 U00bd		       00 00 00 00 dinoColors ds	4	; $BD-$C0   color is cleared to 0 when dinosaur is dead, used as a marker to skip over to next dinosaur
    446 U00c1		       00	   dinoDrawIndex ds	1	; $C1	     selects which dinosaur to draw, 1-4. incremented every frame
    447 U00c2		       00 00 00 00 dinoPosition ds	4	; $C2-$C5
    448 U00c6		       00	   dinoMoveIndex ds	1	; $C6	     incremented every 16 or 8 frames, depending on difficulty settings mask
    449 U00c7		       00	   movingStone ds	1	; $C7	     direction stone is moving
    450 U00c8		       00	   stoneThrowFlag ds	1	; $C8
    451 U00c9							;---------------------------------------
    452 U00c9							;ScoreBcdLow to deathCounter are cleared in a loop when a level is started.
    453 U00c9
    454 U00c9		       00 00	   scoreBcdLow ds	2	; $C9-$CA
    455 U00cb		       00 00	   scoreBcdMid ds	2	; $CB-$CC
    456 U00cd		       00 00	   levelNum   ds	2	; $CD-$CE   P0=$CD P1=$CE  ; no more then 16 levels. Level is stored minus 1, running 0-15.
    457 U00cf		       00	   playerNum  ds	1	; $CF	     P0=0,  P1=1
    458 U00d0		       00	   startTuneCount ds	1	; $D0
    459 U00d1		       00	   deathCounter ds	1	; $D1
    460 U00d2							;---------------------------------------
    461 U00d2		       00	   numOfLivesP0 ds	1	; $D2
    462 U00d3		       00	   numOfLivesP1 ds	1	; $D3
    463 U00d4				  -	      IF	REVERSED_CONTROLS
    464 U00d4				  -numOfLivesLeftPf equ	numOfLivesP1
    465 U00d4				  -numOfLivesRightPF equ	numOfLivesP0
    466 U00d4					      ELSE
    467 U00d4		       00 d2	   numOfLivesLeftPf equ	numOfLivesP0
    468 U00d4		       00 d3	   numOfLivesRightPF equ	numOfLivesP1
    469 U00d4					      ENDIF
    470 U00d4							;---------------------------------------
    471 U00d4		       00	   currentJoystick ds	1	; $D4	P0 or P1
    472 U00d5		       00	   currentFirebutton ds	1	; $D5	INPT4 or INPT5
    473 U00d6		       00	   difficultyP0 ds	1	; $D6
    474 U00d7		       00	   difficultyP1 ds	1	; $D7
    475 U00d8		       00 00 00 00 dinoDirection ds	4	; $D8-$DB
    476 U00dc		       00	   colStones  ds	1	; $DC
    477 U00dd		       00	   pointsMultiplier ds	1	; $DD	each dino killed in 1 shot increases multiplier
    478 U00de		       00	   switchesEor ds	1	; $DE
    479 U00df		       00	   joystickDelay ds	1	; $DF
    480 U00e0		       00	   StoneGfxB_Pf0Left ds	1	; $E0	stone PF shapes, dashed lines
    481 U00e1		       00	   StoneGfxB_Pf1Left ds	1	; $E1
    482 U00e2		       00	   StoneGfxB_Pf2Left ds	1	; $E2
    483 U00e3		       00	   StoneGfxB_Pf0Right ds	1	; $E3
    484 U00e4		       00	   StoneGfxB_Pf1Right ds	1	; $E4
    485 U00e5		       00	   StoneGfxB_Pf2Right ds	1	; $E5
    486 U00e6		       00	   moveCavemanFlag ds	1	; $E6
    487 U00e7
    488 U00e7		       00 00 00 00*freeRam    ds	25	; $E7-$FF   free except for return address being pushed on the stack
    489 U0100
    490 U0100							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    491 U0100							;	MAIN PROGRAM
    492 U0100							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    493 U0100
    494  10000 ????				       SEG	CODE
    495  f000					      ORG	$F000,0
    496  f000
    497  f000				   START
    498  f000		       a2 ff		      ldx	#$FF
    499  f002		       9a		      txs
    500  f003		       d8		      cld
    501  f004		       a2 00		      ldx	#0
    502  f006		       a9 00		      lda	#0
    503  f008				   .loopClear
    504  f008		       95 00		      sta	0,X
    505  f00a		       ca		      dex
    506  f00b		       d0 fb		      bne	.loopClear
    507  f00d
    508  f00d
    509  f00d		       20 f7 fb 	      jsr	NewScreenPrep
    510  f010		       a9 04		      lda	#TONE_MAIN_THEME
    511  f012		       85 15		      sta	AUDC0	; this is the only place AUDC0 gets written to, in the whole game
    512  f014		       a9 12		      lda	#FREQ_START_MAIN_THEME
    513  f016		       85 17		      sta	AUDF0
    514  f018		       a9 f4		      lda	#>Zero
    515  f01a		       85 8b		      sta	scorePtrs+1
    516  f01c		       85 8d		      sta	scorePtrs+3
    517  f01e		       85 8f		      sta	scorePtrs+5
    518  f020		       85 91		      sta	scorePtrs+7
    519  f022		       a9 ff		      lda	#GAME_OVER_FLAG
    520  f024		       85 d1		      sta	deathCounter	; Mark the game as over. Reset or select will clear the flag.
    521  f026		       85 de		      sta	switchesEor	; #$FF, to toggle the active low switches to active high, followed with AND'd the switch bit
    522  f028				   LoopMain
    523  f028		       20 da f2 	      jsr	FinishOverscanVsync
    524  f02b		       20 e1 fd 	      jsr	CheckSwitches
    525  f02e		       20 5c fc 	      jsr	CheckForDeath
    526  f031		       20 5e fb 	      jsr	CheckIfLevelDone	; if no stone thrown
    527  f034		       20 a1 f5 	      jsr	CheckTimeRemaing
    528  f037		       20 be f5 	      jsr	MoveCavemanUpdateGfx	; if no stone thrown
    529  f03a		       20 24 f7 	      jsr	CheckWhereDinoCanMove	; if no stone thrown
    530  f03d		       20 20 fd 	      jsr	MoveDinosaur	; if no stone thrown
    531  f040		       20 da f7 	      jsr	CheckForStoneThrow	; if no stone thrown
    532  f043		       20 20 f9 	      jsr	UpdateStones	; when stone is thrown
    533  f046		       20 93 fa 	      jsr	AddSquishedDinoScore	; when stone is thrown
    534  f049				   DoScorePrep
    535  f049		       20 26 fb 	      jsr	GetScorePtrs
    536  f04c		       20 52 f0 	      jsr	DrawScreen
    537  f04f		       4c 28 f0 	      jmp	LoopMain
    538  f052
    539  f052							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    540  f052
    541  f052				  -	      IF	ORIGINAL
    542  f052				  -
    543  f052				  -DrawScreen SUBROUTINE		;x1
    544  f052				  -	      lda	#0
    545  f052				  -	      sta	rowCounter
    546  f052				  -	      lda	#THREE_COPIES_CLOSE
    547  f052				  -	      sta	NUSIZ0
    548  f052				  -	      lda	#TWO_COPIES_CLOSE
    549  f052				  -	      sta	NUSIZ1
    550  f052				  -
    551  f052				  -.loopWaitVblank
    552  f052				  -	      lda	INTIM
    553  f052				  -	      bne	.loopWaitVblank
    554  f052				  -
    555  f052				  -	      sta	WSYNC
    556  f052				  -			;---------------------------------------
    557  f052				  -	      sta	VBLANK
    558  f052				  -	      ldx	#HORIZ_POSITION_DISPLAY
    559  f052				  -	      sta	WSYNC
    560  f052				  -			;---------------------------------------
    561  f052				  -loopPositionScore
    562  f052				  -	      dex
    563  f052				  -	      sbne	loopPositionScore
    564  f052				  -	      sta	RESP0
    565  f052				  -	      sta	RESP1
    566  f052				  -	      lda	#LEFT_1
    567  f052				  -	      sta	HMP1
    568  f052				  -	      sta	WSYNC
    569  f052				  -			;---------------------------------------
    570  f052				  -	      sta	HMOVE
    571  f052				  -	      lda	#COL_SCORE_BAR_P0
    572  f052				  -	      ldy	playerNum
    573  f052				  -	      beq	.doScoreColors
    574  f052				  -	      lda	#COL_SCORE_BAR_P1
    575  f052				  -.doScoreColors
    576  f052				  -	      sta	WSYNC
    577  f052				  -			;---------------------------------------
    578  f052				  -	      sta	COLUBK
    579  f052				  -	      lda	#COL_SCORE
    580  f052				  -	      sta	COLUP0
    581  f052				  -	      sta	COLUP1
    582  f052				  -	      ldy	#0
    583  f052				  -	      sta	WSYNC
    584  f052				  -	      sta	WSYNC
    585  f052				  -.loopDrawScore
    586  f052				  -	      sta	WSYNC
    587  f052				  -			;---------------------------------------
    588  f052				  -	      lda	(scorePtrs),Y	;5  @5
    589  f052				  -	      sta	GRP0	;3  @8
    590  f052				  -	      lda	(scorePtrs+2),Y	;5  @13
    591  f052				  -	      sta	GRP1	;3  @16
    592  f052				  -	      lda	(scorePtrs+4),Y	;5  @21
    593  f052				  -	      tax		;2  @23
    594  f052				  -	      lda	(scorePtrs+6),Y	;5  @28
    595  f052				  -	      sta	t1_digitFour	;3  @31
    596  f052				  -	      sty	t2_loopCount	;3  @34
    597  f052				  -	      lda	Zero,Y	;4  @38     Always zero
    598  f052				  -	      ldy	t1_digitFour	;3  @41
    599  f052				  -	      nop		;2  @43
    600  f052				  -	      nop		;2  @45
    601  f052				  -	      stx	GRP0	;3  @48
    602  f052				  -	      sty	GRP1	;3  @51
    603  f052				  -	      sta	GRP0	;3  @54
    604  f052				  -	      ldy	t2_loopCount	;3  @57
    605  f052				  -	      iny		;2  @59
    606  f052				  -	      cpy	#HEIGHT_LOGO_NUM	;2  @61
    607  f052				  -	      bne	.loopDrawScore	;2³ @63/64
    608  f052				  -
    609  f052				  -			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    610  f052				  -			; prep for playscreen
    611  f052				  -			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    612  f052				  -
    613  f052				  -	      sta	WSYNC
    614  f052				  -			;---------------------------------------
    615  f052				  -	      lda	#0
    616  f052				  -	      sta	GRP0
    617  f052				  -	      sta	GRP1
    618  f052				  -	      sta	WSYNC
    619  f052				  -	      sta	WSYNC
    620  f052				  -			;---------------------------------------
    621  f052				  -	      sta	COLUBK	; black
    622  f052				  -	      lda	#DOUBLE_SIZE
    623  f052				  -	      sta	NUSIZ0
    624  f052				  -	      sta	NUSIZ1
    625  f052				  -	      ldx	#-ONE_ROW_OF_BYTES	; each loop starts by incrementing the stone byte index for the next row, so offset it for the start
    626  f052				  -	      stx	indexStoneBytes
    627  f052				  -	      lda	reflectCaveman
    628  f052				  -	      sta	REFP0
    629  f052				  -	      ldx	columnCaveman
    630  f052				  -	      dex
    631  f052				  -	      lda	StoneHorzPosTab,X
    632  f052				  -	      sta	WSYNC
    633  f052				  -			;---------------------------------------
    634  f052				  -	      tax
    635  f052				  -	      sta	HMCLR
    636  f052				  -	      sta	HMP0
    637  f052				  -	      and	#DELAY_POS_MASK
    638  f052				  -	      tax
    639  f052				  -loopPosCaveman
    640  f052				  -	      dex
    641  f052				  -	      sbne	loopPosCaveman
    642  f052				  -	      sta	RESP0
    643  f052				  -	      sta	WSYNC
    644  f052				  -			;---------------------------------------
    645  f052				  -	      sta	HMOVE
    646  f052				  -	      sta	WSYNC
    647  f052				  -			;---------------------------------------
    648  f052				  -	      lda	#NO_MOTION
    649  f052				  -	      sta	HMP0
    650  f052				  -	      sta	HMP0
    651  f052				  -	      ldx	dinoDrawIndex
    652  f052				  -	      lda	reflectDinoGfx,X
    653  f052				  -	      sta	REFP1
    654  f052				  -	      lda	dinoLoPtr,X
    655  f052				  -	      sta	dinosaurPtr
    656  f052				  -	      ldx	columnCurrentDino
    657  f052				  -	      dex
    658  f052				  -	      lda	StoneHorzPosTab,X
    659  f052				  -	      sta	WSYNC
    660  f052				  -			;---------------------------------------
    661  f052				  -	      tax
    662  f052				  -	      sta	HMCLR
    663  f052				  -	      sta	HMP1
    664  f052				  -	      and	#DELAY_POS_MASK
    665  f052				  -	      tax
    666  f052				  -loopPosDino
    667  f052				  -	      dex
    668  f052				  -	      sbne	loopPosDino
    669  f052				  -	      sta	RESP1
    670  f052				  -	      sta	WSYNC
    671  f052				  -			;---------------------------------------
    672  f052				  -	      sta	HMOVE
    673  f052				  -	      sta	WSYNC
    674  f052				  -			;---------------------------------------
    675  f052				  -	      lda	#NO_MOTION
    676  f052				  -	      sta	HMP1
    677  f052				  -	      ldy	colStones
    678  f052				  -	      sty	COLUPF
    679  f052				  -	      ldx	dinoDrawIndex
    680  f052				  -	      lda	dinoColors,X
    681  f052				  -	      sta	COLUP1
    682  f052				  -	      ldx	#0
    683  f052				  -
    684  f052					      ELSE
    685  f052
    686  f052				   DrawScreen SUBROUTINE		;x1
    687  f052		       a9 00		      lda	#0
    688  f054		       85 83		      sta	rowCounter
    689  f056		       a9 23		      lda	#THREE_COPIES_CLOSE | (LEFT_1 << 1)
    690  f058		       85 04		      sta	NUSIZ0
    691  f05a		       4a		      lsr		; A=$11, TWO_COPIES_CLOSE, missiles not used...
    692  f05b		       85 05		      sta	NUSIZ1
    693  f05d
    694  f05d				   .loopWaitVblank
    695  f05d		       ae 84 02 	      ldx	INTIM
    696  f060		       d0 fb		      bne	.loopWaitVblank
    697  f062
    698  f062							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    699  f062							; prep for score
    700  f062							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    701  f062
    702  f062		       85 02		      sta	WSYNC
    703  f064							;---------------------------------------
    704  f064		       85 21		      sta	HMP1
    705  f066		       a2 07		      ldx	#HORIZ_POSITION_DISPLAY-1
    706  f068				   loopPositionScore
    707  f068		       ca		      dex
      0  f069					      sbne	loopPositionScore
      1  f069		       d0 fd		      bne	loopPositionScore
      2  f06b				  -	      if	(* ^ loopPositionScore) & $FF00
      3  f06b				  -	      echo	"PAGE CROSSING","WARNING ",loopPositionScore," at ",*
      4  f06b				  -	      err
      5  f06b					      endif
    709  f06b		       85 10		      sta	RESP0
    710  f06d		       85 11		      sta	RESP1
    711  f06f		       85 02		      sta	WSYNC
    712  f071							;---------------------------------------
    713  f071		       85 2a		      sta	HMOVE
    714  f073
    715  f073		       85 02		      sta	WSYNC
    716  f075							;---------------------------------------
    717  f075		       85 01		      sta	VBLANK
    718  f077		       a9 42		      lda	#COL_SCORE_BAR_P0
    719  f079		       a4 cf		      ldy	playerNum
    720  f07b		       f0 02		      beq	.doScoreColors
    721  f07d		       a9 94		      lda	#COL_SCORE_BAR_P1
    722  f07f				   .doScoreColors
    723  f07f		       85 09		      sta	COLUBK
    724  f081		       a9 2a		      lda	#COL_SCORE
    725  f083		       85 06		      sta	COLUP0
    726  f085		       85 07		      sta	COLUP1
    727  f087
    728  f087							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    729  f087							; draw the score
    730  f087							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    731  f087
    732  f087		       a0 00		      ldy	#0
    733  f089				   .loopDrawScore
    734  f089		       85 02		      sta	WSYNC	;3
    735  f08b							;---------------------------------------
    736  f08b		       b1 8a		      lda	(scorePtrs),Y	;5  @5
    737  f08d		       85 1b		      sta	GRP0	;3  @8
    738  f08f		       b1 8c		      lda	(scorePtrs+2),Y	;5  @13
    739  f091		       85 1c		      sta	GRP1	;3  @16
    740  f093		       b1 8e		      lda	(scorePtrs+4),Y	;5  @21
    741  f095		       aa		      tax		;2  @23
    742  f096		       b1 90		      lda	(scorePtrs+6),Y	;5  @28
    743  f098		       85 ad		      sta	t1_digitFour	;3  @31
    744  f09a		       84 ae		      sty	t2_loopCount	;3  @34
    745  f09c		       b9 94 f4 	      lda	Zero,Y	;4  @38     Always zero
    746  f09f		       a4 ad		      ldy	t1_digitFour	;3  @41
    747  f0a1		       ea		      nop		;2  @43
    748  f0a2		       ea		      nop		;2  @45
    749  f0a3		       86 1b		      stx	GRP0	;3  @48
    750  f0a5		       84 1c		      sty	GRP1	;3  @51
    751  f0a7		       85 1b		      sta	GRP0	;3  @54
    752  f0a9		       a4 ae		      ldy	t2_loopCount	;3  @57
    753  f0ab		       c8		      iny		;2  @59
    754  f0ac		       c0 08		      cpy	#HEIGHT_LOGO_NUM	;2  @61
    755  f0ae		       d0 d9		      bne	.loopDrawScore	;2³ @63/64
    756  f0b0
    757  f0b0							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    758  f0b0							; prep for playscreen
    759  f0b0							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    760  f0b0
    761  f0b0		       85 02		      sta	WSYNC	; 3
    762  f0b2							;---------------------------------------
    763  f0b2							;     lda    #0
    764  f0b2							;     sta    GRP0
    765  f0b2							;     sta    GRP1
    766  f0b2		       85 09		      sta	COLUBK	; black
    767  f0b4		       a9 05		      lda	#DOUBLE_SIZE
    768  f0b6		       85 04		      sta	NUSIZ0
    769  f0b8		       85 05		      sta	NUSIZ1
    770  f0ba		       a2 fe		      ldx	#-ONE_ROW_OF_BYTES	; each loop starts by incrementing the stone byte index for the next row, so offset it for the start
    771  f0bc		       86 a9		      stx	indexStoneBytes
    772  f0be		       a5 b0		      lda	reflectCaveman
    773  f0c0		       85 0b		      sta	REFP0
    774  f0c2		       a6 af		      ldx	columnCaveman
    775  f0c4		       ca		      dex
    776  f0c5		       bd 8a f4 	      lda	StoneHorzPosTab,X
    777  f0c8
    778  f0c8		       85 02		      sta	WSYNC
    779  f0ca							;---------------------------------------
    780  f0ca		       aa		      tax
    781  f0cb		       85 2b		      sta	HMCLR
    782  f0cd		       85 20		      sta	HMP0
    783  f0cf		       29 0f		      and	#DELAY_POS_MASK
    784  f0d1		       aa		      tax
    785  f0d2				   loopPosCaveman
    786  f0d2		       ca		      dex
      0  f0d3					      sbne	loopPosCaveman
      1  f0d3		       d0 fd		      bne	loopPosCaveman
      2  f0d5				  -	      if	(* ^ loopPosCaveman) & $FF00
      3  f0d5				  -	      echo	"PAGE CROSSING","WARNING ",loopPosCaveman," at ",*
      4  f0d5				  -	      err
      5  f0d5					      endif
    788  f0d5		       85 10		      sta	RESP0
    789  f0d7		       85 02		      sta	WSYNC
    790  f0d9							;---------------------------------------
    791  f0d9		       85 2a		      sta	HMOVE
    792  f0db		       a6 c1		      ldx	dinoDrawIndex
    793  f0dd		       b5 b5		      lda	reflectDinoGfx,X
    794  f0df		       85 0c		      sta	REFP1
    795  f0e1
    796  f0e1					      IF	ANIMATE_DINO
    797  f0e1		       a5 81		      lda	frameCounter	; this routine will animate the dinoaurs continually,
    798  f0e3		       0a		      asl		; and shows the graphics that were never used before.
    799  f0e4		       0a		      asl
    800  f0e5		       0a		      asl
    801  f0e6		       b5 b9		      lda	dinoLoPtr,X
    802  f0e8		       a2 f3		      ldx	#>DinoGfx_A
    803  f0ea		       b0 03		      bcs	.updateDinoPtrs
    804  f0ec		       e8		      inx
    805  f0ed		       69 10		      adc	#16
    806  f0ef				   .updateDinoPtrs
    807  f0ef		       85 88		      sta	dinosaurPtr
    808  f0f1		       86 89		      stx	dinosaurPtr+1
    809  f0f3				  -	      ELSE
    810  f0f3				  -	      jmp	RejoinCode
    811  f0f3				  -
    812  f0f3				  -	      nop		; free bytes
    813  f0f3				  -	      nop
    814  f0f3				  -	      nop
    815  f0f3				  -	      nop
    816  f0f3				  -	      nop
    817  f0f3				  -	      nop
    818  f0f3				  -	      nop
    819  f0f3				  -	      nop
    820  f0f3				  -	      nop
    821  f0f3				  -	      nop
    822  f0f3				  -	      nop
    823  f0f3				  -	      nop
    824  f0f3				  -	      nop
    825  f0f3				  -	      nop
    826  f0f3				  -	      nop
    827  f0f3					      ENDIF
    828  f0f3
    829  f0f3				   RejoinCode
    830  f0f3		       ea		      nop		; free byte
    831  f0f4		       a6 b1		      ldx	columnCurrentDino
    832  f0f6		       ca		      dex
    833  f0f7		       bd 8a f4 	      lda	StoneHorzPosTab,X
    834  f0fa		       85 02		      sta	WSYNC
    835  f0fc							;---------------------------------------
    836  f0fc		       aa		      tax
    837  f0fd		       85 2b		      sta	HMCLR
    838  f0ff		       85 21		      sta	HMP1
    839  f101		       29 0f		      and	#DELAY_POS_MASK
    840  f103		       aa		      tax
    841  f104				   loopPosDino
    842  f104		       ca		      dex
      0  f105					      sbne	loopPosDino
      1  f105		       d0 fd		      bne	loopPosDino
      2  f107				  -	      if	(* ^ loopPosDino) & $FF00
      3  f107				  -	      echo	"PAGE CROSSING","WARNING ",loopPosDino," at ",*
      4  f107				  -	      err
      5  f107					      endif
    844  f107		       85 11		      sta	RESP1
    845  f109		       85 02		      sta	WSYNC
    846  f10b							;---------------------------------------
    847  f10b		       85 2a		      sta	HMOVE
    848  f10d		       a4 dc		      ldy	colStones
    849  f10f		       84 08		      sty	COLUPF
    850  f111		       a6 c1		      ldx	dinoDrawIndex
    851  f113		       b5 bd		      lda	dinoColors,X
    852  f115		       85 07		      sta	COLUP1
    853  f117		       a2 00		      ldx	#0	; clear caveman gfx
    854  f119		       f0 10		      beq	LoopStoneRow	; always branch
    855  f11b
    856  f11b				   IncreaseOverscan
    857  f11b		       a2 11		      ldx	#OVERSCAN_DELAY
    858  f11d				   .loopDelayOverscan
    859  f11d		       85 02		      sta	WSYNC
    860  f11f							;---------------------------------------
    861  f11f		       ca		      dex
    862  f120		       d0 fb		      bne	.loopDelayOverscan
    863  f122
    864  f122		       a9 02		      lda	#2
    865  f124		       85 02		      sta	WSYNC
    866  f126							;---------------------------------------
    867  f126		       85 00		      sta	VSYNC	; vsync starts
    868  f128		       4c 1b f3 	      jmp	ContVsync
    869  f12b
    870  f12b
    871  f12b					      ENDIF
    872  f12b
    873  f12b							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    874  f12b							; prep for new stone row
    875  f12b							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    876  f12b
    877  f12b				   LoopStoneRow
    878  f12b		       85 02		      sta	WSYNC	; 3
    879  f12d							;---------------------------------------
    880  f12d		       a9 00		      lda	#0	;2  @2
    881  f12f		       85 0d		      sta	PF0	;3  @5
    882  f131		       85 0e		      sta	PF1	;3  @8
    883  f133		       86 1b		      stx	GRP0	;3  @11
    884  f135		       85 0f		      sta	PF2	;3  @14
    885  f137		       85 a8		      sta	indexGraphics	;3  @17
    886  f139		       e6 a9		      inc	indexStoneBytes	;5  @22
    887  f13b		       e6 a9		      inc	indexStoneBytes	;5  @27
    888  f13d		       a6 a9		      ldx	indexStoneBytes	;3  @30
    889  f13f		       b5 92		      lda	stoneOrder,X	;4  @34
    890  f141		       29 03		      and	#PF2_INDEX_MASK	;2  @36
    891  f143		       a8		      tay		;2  @38
    892  f144		       b9 58 f4 	      lda	StoneShapesTab_A,Y	;4  @42
    893  f147		       85 a4		      sta	stoneGfxA_Pf2Left	;3  @45
    894  f149		       b9 69 f4 	      lda	StoneShapesTab_B,Y	;4  @49
    895  f14c		       85 e2		      sta	StoneGfxB_Pf2Left	;3  @52
    896  f14e		       b5 92		      lda	stoneOrder,X	;4  @56
    897  f150		       29 0c		      and	#PF1_INDEX_MASK	;2  @58
    898  f152		       a8		      tay		;2  @60
    899  f153		       85 02		      sta	WSYNC	;3
    900  f155							;---------------------------------------
    901  f155		       a9 00		      lda	#0	;2  @2
    902  f157		       85 1c		      sta	GRP1	;3  @5
    903  f159		       b9 58 f4 	      lda	StoneShapesTab_A,Y	;4  @9
    904  f15c		       85 a3		      sta	stoneGfxA_Pf1Left	;3  @12
    905  f15e		       b9 69 f4 	      lda	StoneShapesTab_B,Y	;4  @16
    906  f161		       85 e1		      sta	StoneGfxB_Pf1Left	;3  @19
    907  f163		       b5 92		      lda	stoneOrder,X	;4  @23
    908  f165		       29 10		      and	#PF0_INDEX_MASK	;2  @25
    909  f167		       a8		      tay		;2  @27
    910  f168		       b9 58 f4 	      lda	StoneShapesTab_A,Y	;4  @31
    911  f16b		       85 a2		      sta	stoneGfxA_Pf0Left	;3  @34
    912  f16d		       b9 69 f4 	      lda	StoneShapesTab_B,Y	;4  @38
    913  f170		       85 e0		      sta	StoneGfxB_Pf0Left	;3  @41
    914  f172		       b5 93		      lda	stoneOrder+1,X	;4  @45
    915  f174		       29 03		      and	#PF2_INDEX_MASK	;2  @47
    916  f176		       a8		      tay		;2  @49
    917  f177		       b9 58 f4 	      lda	StoneShapesTab_A,Y	;4  @53
    918  f17a		       85 a7		      sta	stoneGfxA_Pf2Right	;3  @56
    919  f17c		       b9 69 f4 	      lda	StoneShapesTab_B,Y	;4  @60
    920  f17f		       85 e5		      sta	StoneGfxB_Pf2Right	;3  @63
    921  f181		       b5 93		      lda	stoneOrder+1,X	;4  @67
    922  f183		       29 0c		      and	#PF1_INDEX_MASK	;2  @69
    923  f185		       a8		      tay		;2  @71
    924  f186		       b9 58 f4 	      lda	StoneShapesTab_A,Y	;4  @75
    925  f189		       85 02		      sta	WSYNC	;3	<---- adds 1 more scanline!
    926  f18b							;---------------------------------------
    927  f18b		       85 a6		      sta	stoneGfxA_Pf1Right	;3  @3
    928  f18d		       b9 69 f4 	      lda	StoneShapesTab_B,Y	;4  @7
    929  f190		       85 e4		      sta	StoneGfxB_Pf1Right	;3  @10
    930  f192		       b5 93		      lda	stoneOrder+1,X	;4  @14
    931  f194		       29 10		      and	#PF0_INDEX_MASK	;2  @16
    932  f196		       a8		      tay		;2  @18
    933  f197		       b9 58 f4 	      lda	StoneShapesTab_A,Y	;4  @22
    934  f19a		       85 a5		      sta	stoneGfxA_Pf0Right	;3  @25
    935  f19c		       b9 69 f4 	      lda	StoneShapesTab_B,Y	;4  @29
    936  f19f		       85 e3		      sta	StoneGfxB_Pf0Right	;3  @32
    937  f1a1		       a2 00		      ldx	#0	;2  @34
    938  f1a3		       e6 83		      inc	rowCounter	;5  @39
    939  f1a5		       a5 83		      lda	rowCounter	;3  @42
    940  f1a7		       c9 09		      cmp	#NUM_OF_ROWS+1	;2  @44
    941  f1a9		       d0 03		      bne	.drawStoneRow	;2³ @46/47
    942  f1ab		       4c 34 f2 	      jmp	SetUpForLogo	;3  @49
    943  f1ae
    944  f1ae							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    945  f1ae							; draw a stone row
    946  f1ae							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    947  f1ae
    948  f1ae				   .drawStoneRow
    949  f1ae		       85 02		      sta	WSYNC	; 3
    950  f1b0							;---------------------------------------
    951  f1b0		       a5 a2		      lda	stoneGfxA_Pf0Left	;3  @3
    952  f1b2		       85 0d		      sta	PF0	;3  @6
    953  f1b4		       a5 a3		      lda	stoneGfxA_Pf1Left	;3  @9
    954  f1b6		       85 0e		      sta	PF1	;3  @12
    955  f1b8		       a5 a4		      lda	stoneGfxA_Pf2Left	;3  @15
    956  f1ba		       85 0f		      sta	PF2	;3  @18
    957  f1bc		       86 1c		      stx	GRP1	;3  @21
    958  f1be		       a4 a8		      ldy	indexGraphics	;3  @24
    959  f1c0		       a5 a5		      lda	stoneGfxA_Pf0Right	;3  @27
    960  f1c2		       85 0d		      sta	PF0	;3  @30
    961  f1c4		       b1 86		      lda	(cavemanPtr),Y	;5  @35
    962  f1c6		       aa		      tax		;2  @37
    963  f1c7		       a5 a6		      lda	stoneGfxA_Pf1Right	;3  @40
    964  f1c9		       85 0e		      sta	PF1	;3  @43
    965  f1cb		       b1 aa		      lda	(cavemanColPtr),Y	;5  @48
    966  f1cd		       a4 a7		      ldy	stoneGfxA_Pf2Right	;3  @51
    967  f1cf		       84 0f		      sty	PF2	;3  @54
    968  f1d1		       a4 83		      ldy	rowCounter	;3  @57
    969  f1d3		       c4 84		      cpy	rowCaveman	;3  @60
    970  f1d5		       f0 02		      beq	.drawCaveman	;2³ @62/63
    971  f1d7		       a2 00		      ldx	#0	;2  @64   blank caveman graphics
    972  f1d9				   .drawCaveman
    973  f1d9		       a8		      tay		;2  @66
    974  f1da		       a5 e0		      lda	StoneGfxB_Pf0Left	;3  @69   worse case
    975  f1dc		       85 02		      sta	WSYNC	;3
    976  f1de							;---------------------------------------
    977  f1de		       85 0d		      sta	PF0	;3  @3
    978  f1e0		       a5 e1		      lda	StoneGfxB_Pf1Left	;3  @6
    979  f1e2		       85 0e		      sta	PF1	;3  @9
    980  f1e4		       a5 e2		      lda	StoneGfxB_Pf2Left	;3  @12
    981  f1e6		       85 0f		      sta	PF2	;3  @15
    982  f1e8		       86 1b		      stx	GRP0	;3  @18
    983  f1ea		       84 06		      sty	COLUP0	;3  @21
    984  f1ec		       a5 e3		      lda	StoneGfxB_Pf0Right	;3  @24
    985  f1ee		       85 0d		      sta	PF0	;3  @27
    986  f1f0		       a4 a8		      ldy	indexGraphics	;3  @30
    987  f1f2		       e6 a8		      inc	indexGraphics	;5  @35
    988  f1f4		       a5 e4		      lda	StoneGfxB_Pf1Right	;3  @38
    989  f1f6		       85 0e		      sta	PF1	;3  @41
    990  f1f8		       b1 88		      lda	(dinosaurPtr),Y	;5  @46
    991  f1fa		       aa		      tax		;2  @48
    992  f1fb		       a5 e5		      lda	StoneGfxB_Pf2Right	;3  @51
    993  f1fd		       85 0f		      sta	PF2	;3  @54
    994  f1ff		       a5 83		      lda	rowCounter	;3  @57
    995  f201		       c5 85		      cmp	rowCurrentDino	;3  @60
    996  f203		       f0 02		      beq	.drawDinosaur	;2³ @62/63
    997  f205		       a2 00		      ldx	#0	;2  @64   blank dinosaur graphics
    998  f207				   .drawDinosaur
    999  f207		       a5 a8		      lda	indexGraphics	;3  @67
   1000  f209		       c9 08		      cmp	#NUM_OF_ROWS	;2  @69
   1001  f20b		       d0 a1		      bne	.drawStoneRow	;2³+1 @71/73
   1002  f20d		       85 02		      sta	WSYNC	;3
   1003  f20f							;---------------------------------------
   1004  f20f		       a5 a2		      lda	stoneGfxA_Pf0Left	;3  @3
   1005  f211		       85 0d		      sta	PF0	;3  @6
   1006  f213		       a5 a3		      lda	stoneGfxA_Pf1Left	;3  @9
   1007  f215		       85 0e		      sta	PF1	;3  @12
   1008  f217		       a5 a4		      lda	stoneGfxA_Pf2Left	;3  @15
   1009  f219		       85 0f		      sta	PF2	;3  @18
   1010  f21b		       86 1c		      stx	GRP1	;3  @21
   1011  f21d		       a2 00		      ldx	#0	;2  @23
   1012  f21f		       a5 a5		      lda	stoneGfxA_Pf0Right	;3  @26
   1013  f221		       85 0d		      sta	PF0	;3  @29
   1014  f223		       a4 a8		      ldy	indexGraphics	;3  @32
   1015  f225		       a5 a6		      lda	stoneGfxA_Pf1Right	;3  @35
   1016  f227		       85 0e		      sta	PF1	;3  @38
   1017  f229		       a4 a8		      ldy	indexGraphics	;3  @41
   1018  f22b		       a4 a8		      ldy	indexGraphics	;3  @44
   1019  f22d		       a5 a7		      lda	stoneGfxA_Pf2Right	;3  @47
   1020  f22f		       85 0f		      sta	PF2	;3  @50
   1021  f231		       4c 2b f1 	      jmp	LoopStoneRow	;3  @53
   1022  f234
   1023  f234							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1024  f234							; prep for logo
   1025  f234							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1026  f234
   1027  f234				   SetUpForLogo
   1028  f234		       85 02		      sta	WSYNC
   1029  f236							;---------------------------------------
   1030  f236		       a9 00		      lda	#COL_LOGO
   1031  f238		       85 06		      sta	COLUP0
   1032  f23a		       85 07		      sta	COLUP1
   1033  f23c		       a9 00		      lda	#NO_MOTION
   1034  f23e		       85 20		      sta	HMP0
   1035  f240		       85 21		      sta	HMP1
   1036  f242		       85 0b		      sta	REFP0	; no reflect
   1037  f244		       85 0c		      sta	REFP1
   1038  f246		       a2 08		      ldx	#HORIZ_POSITION_DISPLAY
   1039  f248		       85 02		      sta	WSYNC
   1040  f24a							;---------------------------------------
   1041  f24a				   loopPosLogo
   1042  f24a		       ca		      dex
      0  f24b					      sbne	loopPosLogo
      1  f24b		       d0 fd		      bne	loopPosLogo
      2  f24d				  -	      if	(* ^ loopPosLogo) & $FF00
      3  f24d				  -	      echo	"PAGE CROSSING","WARNING ",loopPosLogo," at ",*
      4  f24d				  -	      err
      5  f24d					      endif
   1044  f24d		       85 10		      sta	RESP0
   1045  f24f		       85 11		      sta	RESP1
   1046  f251		       a9 10		      lda	#LEFT_1
   1047  f253		       85 21		      sta	HMP1
   1048  f255		       85 02		      sta	WSYNC
   1049  f257							;---------------------------------------
   1050  f257		       85 2a		      sta	HMOVE
   1051  f259
   1052  f259		       a9 03		      lda	#THREE_COPIES_CLOSE
   1053  f25b		       85 04		      sta	NUSIZ0
   1054  f25d		       a9 01		      lda	#TWO_COPIES_CLOSE
   1055  f25f		       85 05		      sta	NUSIZ1
   1056  f261		       a0 00		      ldy	#0
   1057  f263		       a9 da		      lda	#COL_LOGO_BAR
   1058  f265		       85 02		      sta	WSYNC
   1059  f267							;---------------------------------------
   1060  f267		       85 09		      sta	COLUBK	;3  @3
   1061  f269		       a5 ad		      lda	t1_digitFour	;3  @6  waste time
   1062  f26b		       ea		      nop		;2  @8  waste time
   1063  f26c				   .loopDrawLogo
   1064  f26c		       b9 ec f4 	      lda	Logo_A,Y	;4  @12
   1065  f26f		       85 1b		      sta	GRP0	;3  @15
   1066  f271		       b9 f4 f4 	      lda	Logo_B,Y	;4  @19
   1067  f274		       85 1c		      sta	GRP1	;3  @22
   1068  f276		       b9 fc f4 	      lda	Logo_C,Y	;4  @26
   1069  f279		       85 ad		      sta	t1_digitFour	;3  @29
   1070  f27b		       be 04 f5 	      ldx	Logo_D,Y	;4  @33
   1071  f27e		       b9 0c f5 	      lda	Logo_E,Y	;4  @37
   1072  f281		       84 ae		      sty	t2_loopCount	;3  @40
   1073  f283		       a4 ad		      ldy	t1_digitFour	;3  @43
   1074  f285		       84 1b		      sty	GRP0	;3  @46
   1075  f287		       86 1c		      stx	GRP1	;3  @49
   1076  f289		       85 1b		      sta	GRP0	;3  @52
   1077  f28b		       e6 ae		      inc	t2_loopCount	;5  @57
   1078  f28d		       85 02		      sta	WSYNC	;3
   1079  f28f							;---------------------------------------
   1080  f28f		       a4 ae		      ldy	t2_loopCount	;3  @3
   1081  f291		       c0 08		      cpy	#HEIGHT_LOGO_NUM	;2  @5
   1082  f293		       d0 d7		      bne	.loopDrawLogo	;2³ @7/8
   1083  f295		       a9 00		      lda	#0
   1084  f297		       85 1b		      sta	GRP0
   1085  f299		       85 1c		      sta	GRP1
   1086  f29b		       85 09		      sta	COLUBK	; black
   1087  f29d		       85 20		      sta	HMP0	; no motion
   1088  f29f		       85 21		      sta	HMP1
   1089  f2a1		       85 02		      sta	WSYNC
   1090  f2a3							;---------------------------------------
   1091  f2a3		       a9 01		      lda	#REFLECT_PF
   1092  f2a5		       85 0a		      sta	CTRLPF
   1093  f2a7		       a0 05		      ldy	#HEIGHT_LIVES_DISPLAY
   1094  f2a9
   1095  f2a9				   .loopLivesDisplay
   1096  f2a9		       a9 42		      lda	#COL_LIVES_LEFT_PF	;2  @49
   1097  f2ab		       85 02		      sta	WSYNC	;3
   1098  f2ad							;---------------------------------------
   1099  f2ad		       85 08		      sta	COLUPF	;3  @3
   1100  f2af		       a6 d2		      ldx	numOfLivesLeftPf	;3  @6
   1101  f2b1		       bd d6 f2 	      lda	LivesDisplayTab,X	;4  @10
   1102  f2b4		       85 0e		      sta	PF1	;3  @13
   1103  f2b6		       a6 d3		      ldx	numOfLivesRightPF	;3  @16
   1104  f2b8		       bd d6 f2 	      lda	LivesDisplayTab,X	;4  @20
   1105  f2bb		       a2 94		      ldx	#COL_LIVES_RIGHT_PF	;2  @22
   1106  f2bd		       ea		      nop		;2  @24
   1107  f2be		       ea		      nop		;2  @26
   1108  f2bf		       ea		      nop		;2  @28
   1109  f2c0		       ea		      nop		;2  @30
   1110  f2c1		       ea		      nop		;2  @32
   1111  f2c2		       ea		      nop		;2  @34
   1112  f2c3		       ea		      nop		;2  @36
   1113  f2c4		       86 08		      stx	COLUPF	;3  @39
   1114  f2c6		       85 0e		      sta	PF1	;3  @42
   1115  f2c8		       88		      dey		;2  @44
   1116  f2c9		       d0 de		      bne	.loopLivesDisplay	;2³ @46/47
   1117  f2cb		       85 02		      sta	WSYNC	;3
   1118  f2cd							;---------------------------------------
   1119  f2cd		       a9 00		      lda	#0
   1120  f2cf		       85 08		      sta	COLUPF	; black
   1121  f2d1		       85 0e		      sta	PF1
   1122  f2d3		       85 0a		      sta	CTRLPF
   1123  f2d5		       60		      rts
   1124  f2d6
   1125  f2d6				   LivesDisplayTab
   1126  f2d6		       00		      .byte.b	$00	; |	    | PF1
   1127  f2d7		       80		      .byte.b	$80	; |X	    |
   1128  f2d8		       a0		      .byte.b	$A0	; |X X     |
   1129  f2d9		       a8		      .byte.b	$A8	; |X X X   |
   1130  f2da
   1131  f2da							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1132  f2da
   1133  f2da				   FinishOverscanVsync SUBROUTINE		;x1
   1134  f2da		       e6 81		      inc	frameCounter
   1135  f2dc		       a5 81		      lda	frameCounter
   1136  f2de		       29 3f		      and	#SECONDS_MASK
   1137  f2e0		       d0 02		      bne	.skipTimeIncrement
   1138  f2e2		       e6 82		      inc	secondsCounter
   1139  f2e4				   .skipTimeIncrement
   1140  f2e4		       a9 02		      lda	#2
   1141  f2e6		       85 02		      sta	WSYNC
   1142  f2e8							;---------------------------------------
   1143  f2e8		       85 01		      sta	VBLANK	; turn vblank on
   1144  f2ea		       a5 81		      lda	frameCounter
   1145  f2ec		       d0 08		      bne	.contVblank
   1146  f2ee
   1147  f2ee		       a6 c1		      ldx	dinoDrawIndex	; this bit of code seems to be redundant...
   1148  f2f0		       b5 d8		      lda	dinoDirection,X
   1149  f2f2		       09 0f		      ora	#DIRECTION_MASK
   1150  f2f4		       95 d8		      sta	dinoDirection,X
   1151  f2f6
   1152  f2f6				   .contVblank
   1153  f2f6		       85 02		      sta	WSYNC
   1154  f2f8							;---------------------------------------
   1155  f2f8		       a5 81		      lda	frameCounter
   1156  f2fa		       29 07		      and	#MUSIC_MASK
   1157  f2fc		       d0 17		      bne	.finishMusic
   1158  f2fe		       a5 e6		      lda	moveCavemanFlag
   1159  f300		       d0 13		      bne	.finishMusic
   1160  f302		       a6 ac		      ldx	indexFreq
   1161  f304		       bd 70 f3 	      lda	ThemeSongFreqTab,X
   1162  f307		       85 17		      sta	AUDF0
   1163  f309		       e6 ac		      inc	indexFreq
   1164  f30b		       a5 ac		      lda	indexFreq
   1165  f30d		       c9 38		      cmp	#MAIN_THEME_LENGTH
   1166  f30f		       d0 04		      bne	.finishMusic
   1167  f311		       a9 00		      lda	#0	; restart song
   1168  f313		       85 ac		      sta	indexFreq
   1169  f315				   .finishMusic
   1170  f315
   1171  f315
   1172  f315				  -	      IF	ORIGINAL
   1173  f315				  -	      lda	#2
   1174  f315				  -	      sta	WSYNC
   1175  f315				  -			;---------------------------------------
   1176  f315				  -	      sta	VSYNC	; vsync starts
   1177  f315				  -	      lda	playerNum
   1178  f315				  -	      bne	.checkOtherJoystick
   1179  f315				  -
   1180  f315					      ELSE
   1181  f315		       4c 1b f1 	      jmp	IncreaseOverscan	; add lines to overscan, and start VSYNC
   1182  f318		       ea		      nop		; space filler, keeping code as closely aligned to original as possible just to be a little neater...
   1183  f319		       ea		      nop
   1184  f31a		       ea		      nop
   1185  f31b				   ContVsync
   1186  f31b		       a5 cf		      lda	playerNum
   1187  f31d		       d0 10		      bne	.checkOtherJoystick
   1188  f31f					      ENDIF
   1189  f31f
   1190  f31f
   1191  f31f
   1192  f31f				  -	      IF	REVERSED_CONTROLS
   1193  f31f				  -	      lda	SWCHA	; original joysticks were reversed between P0 and P1
   1194  f31f				  -	      and	#DIRECTION_MASK
   1195  f31f				  -	      sta	currentJoystick
   1196  f31f				  -	      lda	INPT5 | $30
   1197  f31f				  -	      sta	currentFirebutton
   1198  f31f				  -	      jmp	FindDinoToDraw
   1199  f31f				  -
   1200  f31f				  -.checkOtherJoystick
   1201  f31f				  -	      lda	SWCHA
   1202  f31f				  -	      lsr
   1203  f31f				  -	      lsr
   1204  f31f				  -	      lsr
   1205  f31f				  -	      lsr
   1206  f31f				  -	      sta	currentJoystick
   1207  f31f				  -	      lda	INPT4 | $30
   1208  f31f				  -	      sta	currentFirebutton
   1209  f31f				  -
   1210  f31f					      ELSE
   1211  f31f		       ad 80 02 	      lda	SWCHA	; this changes the joysticks back, and firebuttons too
   1212  f322		       4a		      lsr
   1213  f323		       4a		      lsr
   1214  f324		       4a		      lsr
   1215  f325		       4a		      lsr
   1216  f326		       85 d4		      sta	currentJoystick
   1217  f328		       a5 0c		      lda	INPT4
   1218  f32a		       85 d5		      sta	currentFirebutton
   1219  f32c		       4c 3a f3 	      jmp	FindDinoToDraw
   1220  f32f
   1221  f32f				   .checkOtherJoystick
   1222  f32f		       ad 80 02 	      lda	SWCHA
   1223  f332		       29 0f		      and	#DIRECTION_MASK
   1224  f334		       85 d4		      sta	currentJoystick
   1225  f336		       a5 0d		      lda	INPT5
   1226  f338		       85 d5		      sta	currentFirebutton
   1227  f33a					      ENDIF
   1228  f33a
   1229  f33a
   1230  f33a
   1231  f33a				   FindDinoToDraw
   1232  f33a		       a5 c1		      lda	dinoDrawIndex
   1233  f33c		       85 ad		      sta	t1_defaultDino	; default, if no other dinosaurs are alive...
   1234  f33e		       a0 03		      ldy	#NUM_OF_DINOSAURS-1
   1235  f340		       85 02		      sta	WSYNC
   1236  f342							;---------------------------------------
   1237  f342				   .loopFindNextAliveDino
   1238  f342		       e6 c1		      inc	dinoDrawIndex
   1239  f344		       a9 03		      lda	#NUM_OF_DINO_MASK	; no more then 4 dinosaurs
   1240  f346		       25 c1		      and	dinoDrawIndex
   1241  f348		       aa		      tax
   1242  f349		       b5 bd		      lda	dinoColors,X	; is this dino dead?
   1243  f34b		       d0 05		      bne	.dinoFound	; - no, use him
   1244  f34d		       88		      dey		; - yes, keep looking
   1245  f34e		       d0 f2		      bne	.loopFindNextAliveDino
   1246  f350		       a6 ad		      ldx	t1_defaultDino	; the other three dinosaurs are dead, so default to the last selected one.
   1247  f352				   .dinoFound
   1248  f352		       85 02		      sta	WSYNC
   1249  f354							;---------------------------------------
   1250  f354		       86 c1		      stx	dinoDrawIndex
   1251  f356		       b5 c2		      lda	dinoPosition,X
   1252  f358		       4a		      lsr
   1253  f359		       4a		      lsr
   1254  f35a		       4a		      lsr
   1255  f35b		       4a		      lsr
   1256  f35c		       85 85		      sta	rowCurrentDino
   1257  f35e		       a9 0f		      lda	#DINO_COLUMN_MASK
   1258  f360		       35 c2		      and	dinoPosition,X
   1259  f362		       85 b1		      sta	columnCurrentDino
   1260  f364		       a9 00		      lda	#0
   1261  f366		       85 02		      sta	WSYNC
   1262  f368							;---------------------------------------
   1263  f368		       85 00		      sta	VSYNC	; vsync ends
   1264  f36a		       a9 27		      lda	#TIME_VBLANK
   1265  f36c		       8d 96 02 	      sta	TIM64T
   1266  f36f		       60		      rts
   1267  f370
   1268  f370							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1269  f370
   1270  f370							; FREQ_00  = $00   ;	   30 kHz  reference frequency
   1271  f370							; FREQ_01  = $01   ;	   15 kHz
   1272  f370							; FREQ_02  = $02   ;	   10 kHz
   1273  f370							; FREQ_03  = $03   ;	  7.5 kHz
   1274  f370							; FREQ_04  = $04   ;	    6 kHz
   1275  f370							; FREQ_05  = $05   ;	    5 kHz
   1276  f370							; FREQ_06  = $06   ;  ~ 4.29 kHz
   1277  f370							; FREQ_07  = $07   ;	 3.75 kHz
   1278  f370							; FREQ_08  = $08   ;  ~ 3.33 kHz
   1279  f370							; FREQ_09  = $09   ;	    3 kHz
   1280  f370							; FREQ_0A  = $0A   ;  ~ 2.73 kHz
   1281  f370							; FREQ_0B  = $0B   ;	  2.5 kHz
   1282  f370							; FREQ_0C  = $0C   ;  ~ 2.31 kHz
   1283  f370							; FREQ_0D  = $0D   ;  ~ 2.14 kHz
   1284  f370							; FREQ_0E  = $0E   ;	    2 kHz
   1285  f370							; FREQ_0F  = $0F   ; ~ 1.875 kHz
   1286  f370							; FREQ_10  = $10   ;  ~ 1.76 kHz
   1287  f370							; FREQ_11  = $11   ;  ~ 1.67 kHz
   1288  f370							; FREQ_12  = $12   ;  ~ 1.58 kHz
   1289  f370							; FREQ_13  = $13   ;	  1.5 kHz
   1290  f370							; FREQ_14  = $14   ;  ~ 1.43 kHz
   1291  f370							; FREQ_15  = $15   ;  ~ 1.36 kHz
   1292  f370							; FREQ_16  = $16   ;  ~ 1.30 kHz
   1293  f370							; FREQ_17  = $17   ;	 1.25 kHz
   1294  f370							; FREQ_18  = $18   ;	  1.2 kHz
   1295  f370							; FREQ_19  = $19   ;  ~ 1.15 kHz
   1296  f370							; FREQ_1A  = $1A   ;  ~ 1.11 kHz
   1297  f370							; FREQ_1B  = $1B   ;  ~ 1.07 kHz
   1298  f370							; FREQ_1C  = $1C   ;  ~ 1.03 kHz
   1299  f370							; FREQ_1D  = $1D   ;	    1 kHz
   1300  f370							; FREQ_1E  = $1E   ;  ~ 0.97 kHz
   1301  f370							; FREQ_1F  = $1F   ;  ~ 0.94 kHz
   1302  f370
   1303  f370				   ThemeSongFreqTab
   1304  f370		       1f 1f		      .byte.b	$1F,$1F
   1305  f372		       15 15		      .byte.b	$15,$15
   1306  f374		       1f 1f		      .byte.b	$1F,$1F
   1307  f376		       15 15		      .byte.b	$15,$15
   1308  f378		       1c 1c		      .byte.b	$1C,$1C
   1309  f37a		       15 15		      .byte.b	$15,$15
   1310  f37c		       1c 1c		      .byte.b	$1C,$1C
   1311  f37e		       15 15		      .byte.b	$15,$15
   1312  f380		       1f 1f		      .byte.b	$1F,$1F
   1313  f382		       15 15		      .byte.b	$15,$15
   1314  f384		       1f 1f		      .byte.b	$1F,$1F
   1315  f386		       15 15		      .byte.b	$15,$15
   1316  f388		       1c 1c		      .byte.b	$1C,$1C
   1317  f38a		       15 15		      .byte.b	$15,$15
   1318  f38c		       1c 1c		      .byte.b	$1C,$1C
   1319  f38e		       15 15		      .byte.b	$15,$15
   1320  f390		       1f 1f		      .byte.b	$1F,$1F
   1321  f392		       15 15		      .byte.b	$15,$15
   1322  f394		       1c 1c		      .byte.b	$1C,$1C
   1323  f396		       15 15		      .byte.b	$15,$15
   1324  f398		       1f 1f		      .byte.b	$1F,$1F
   1325  f39a		       1c 1c		      .byte.b	$1C,$1C
   1326  f39c		       19 19		      .byte.b	$19,$19
   1327  f39e		       1c 1c		      .byte.b	$1C,$1C
   1328  f3a0		       1f		      .byte.b	$1F
   1329  f3a1		       1c		      .byte.b	$1C
   1330  f3a2		       19		      .byte.b	$19
   1331  f3a3		       1c		      .byte.b	$1C
   1332  f3a4		       19 19		      .byte.b	$19,$19
   1333  f3a6		       1c		      .byte.b	$1C
   1334  f3a7		       1f		      .byte.b	$1F
   1335  f3a8				   ThemeSongFinish
   1336  f3a8
   1337  f3a8				   CaveMan_LR_Even
   1338  f3a8		       3c		      .byte.b	$3C	; |  XXXX  |
   1339  f3a9		       14		      .byte.b	$14	; |   X X  |
   1340  f3aa		       34		      .byte.b	$34	; |  XX X  |
   1341  f3ab		       1c		      .byte.b	$1C	; |   XXX  |
   1342  f3ac		       38		      .byte.b	$38	; |  XXX   |
   1343  f3ad		       5c		      .byte.b	$5C	; | X XXX  |
   1344  f3ae		       16		      .byte.b	$16	; |   X XX |
   1345  f3af		       32		      .byte.b	$32	; |  XX  X |
   1346  f3b0				   CaveMan_Up_Odd
   1347  f3b0		       3c		      .byte.b	$3C	; |  XXXX  |
   1348  f3b1		       3c		      .byte.b	$3C	; |  XXXX  |
   1349  f3b2		       3c		      .byte.b	$3C	; |  XXXX  |
   1350  f3b3		       2c		      .byte.b	$2C	; |  X XX  |
   1351  f3b4		       5a		      .byte.b	$5A	; | X XX X |
   1352  f3b5		       3c		      .byte.b	$3C	; |  XXXX  |
   1353  f3b6		       16		      .byte.b	$16	; |   X XX |
   1354  f3b7		       30		      .byte.b	$30	; |  XX    |
   1355  f3b8				   CaveMan_Down_Odd
   1356  f3b8		       3c		      .byte.b	$3C	; |  XXXX  |
   1357  f3b9		       3c		      .byte.b	$3C	; |  XXXX  |
   1358  f3ba		       3c		      .byte.b	$3C	; |  XXXX  |
   1359  f3bb		       18		      .byte.b	$18	; |   XX   |
   1360  f3bc		       7e		      .byte.b	$7E	; | XXXXXX |
   1361  f3bd		       3c		      .byte.b	$3C	; |  XXXX  |
   1362  f3be		       16		      .byte.b	$16	; |   X XX |
   1363  f3bf		       30		      .byte.b	$30	; |  XX    |
   1364  f3c0				   CaveMan_LR_Odd
   1365  f3c0		       3c		      .byte.b	$3C	; |  XXXX  |
   1366  f3c1		       14		      .byte.b	$14	; |   X X  |
   1367  f3c2		       34		      .byte.b	$34	; |  XX X  |
   1368  f3c3		       5c		      .byte.b	$5C	; | X XXX  |
   1369  f3c4		       38		      .byte.b	$38	; |  XXX   |
   1370  f3c5		       1c		      .byte.b	$1C	; |   XXX  |
   1371  f3c6		       16		      .byte.b	$16	; |   X XX |
   1372  f3c7		       30		      .byte.b	$30	; |  XX    |
   1373  f3c8				   CaveMan_Up_Even
   1374  f3c8		       3c		      .byte.b	$3C	; |  XXXX  |
   1375  f3c9		       3c		      .byte.b	$3C	; |  XXXX  |
   1376  f3ca		       3c		      .byte.b	$3C	; |  XXXX  |
   1377  f3cb		       2c		      .byte.b	$2C	; |  X XX  |
   1378  f3cc		       7e		      .byte.b	$7E	; | XXXXXX |
   1379  f3cd		       3c		      .byte.b	$3C	; |  XXXX  |
   1380  f3ce		       68		      .byte.b	$68	; | XX X   |
   1381  f3cf		       0c		      .byte.b	$0C	; |	XX  |
   1382  f3d0				   CaveMan_Down_Even
   1383  f3d0		       3c		      .byte.b	$3C	; |  XXXX  |
   1384  f3d1		       3c		      .byte.b	$3C	; |  XXXX  |
   1385  f3d2		       3c		      .byte.b	$3C	; |  XXXX  |
   1386  f3d3		       5a		      .byte.b	$5A	; | X XX X |
   1387  f3d4		       3c		      .byte.b	$3C	; |  XXXX  |
   1388  f3d5		       3c		      .byte.b	$3C	; |  XXXX  |
   1389  f3d6		       68		      .byte.b	$68	; | XX X   |
   1390  f3d7		       0c		      .byte.b	$0C	; |	XX  |
   1391  f3d8
   1392  f3d8				   CaveMan_Push_LR
   1393  f3d8		       3c		      .byte.b	$3C	; |  XXXX  |
   1394  f3d9		       14		      .byte.b	$14	; |   X X  |
   1395  f3da		       34		      .byte.b	$34	; |  XX X  |
   1396  f3db		       58		      .byte.b	$58	; | X XX   |
   1397  f3dc		       7c		      .byte.b	$7C	; | XXXXX  |
   1398  f3dd		       1e		      .byte.b	$1E	; |   XXXX |
   1399  f3de		       04		      .byte.b	$04	; |	 X  |
   1400  f3df		       0c		      .byte.b	$0C	; |	XX  |
   1401  f3e0				   CaveMan_Push_Up
   1402  f3e0		       3c		      .byte.b	$3C	; |  XXXX  |
   1403  f3e1		       3c		      .byte.b	$3C	; |  XXXX  |
   1404  f3e2		       2c		      .byte.b	$2C	; |  X XX  |
   1405  f3e3		       5a		      .byte.b	$5A	; | X XX X |
   1406  f3e4		       3c		      .byte.b	$3C	; |  XXXX  |
   1407  f3e5		       18		      .byte.b	$18	; |   XX   |
   1408  f3e6		       3c		      .byte.b	$3C	; |  XXXX  |
   1409  f3e7		       00		      .byte.b	$00	; |	    |
   1410  f3e8				   CaveMan_Push_Down
   1411  f3e8		       00		      .byte.b	$00	; |	    |
   1412  f3e9		       3c		      .byte.b	$3C	; |  XXXX  |
   1413  f3ea		       3c		      .byte.b	$3C	; |  XXXX  |
   1414  f3eb		       3c		      .byte.b	$3C	; |  XXXX  |
   1415  f3ec		       5a		      .byte.b	$5A	; | X XX X |
   1416  f3ed		       3c		      .byte.b	$3C	; |  XXXX  |
   1417  f3ee		       18		      .byte.b	$18	; |   XX   |
   1418  f3ef		       3c		      .byte.b	$3C	; |  XXXX  |
   1419  f3f0
   1420  f3f0				   DinoGfx_A
   1421  f3f0		       1c		      .byte.b	$1C	; |   XXX  |
   1422  f3f1		       36		      .byte.b	$36	; |  XX XX |
   1423  f3f2		       26		      .byte.b	$26	; |  X  XX |
   1424  f3f3		       1c		      .byte.b	$1C	; |   XXX  |
   1425  f3f4		       7c		      .byte.b	$7C	; | XXXXX  |
   1426  f3f5		       3c		      .byte.b	$3C	; |  XXXX  |
   1427  f3f6		       16		      .byte.b	$16	; |   X XX |
   1428  f3f7		       32		      .byte.b	$32	; |  XX  X |
   1429  f3f8				   DinoGfx_B
   1430  f3f8		       1c		      .byte.b	$1C	; |   XXX  |
   1431  f3f9		       2a		      .byte.b	$2A	; |  X X X |
   1432  f3fa		       2a		      .byte.b	$2A	; |  X X X |
   1433  f3fb		       1c		      .byte.b	$1C	; |   XXX  |
   1434  f3fc		       08		      .byte.b	$08	; |	X   |
   1435  f3fd		       3e		      .byte.b	$3E	; |  XXXXX |
   1436  f3fe		       1c		      .byte.b	$1C	; |   XXX  |
   1437  f3ff		       32		      .byte.b	$32	; |  XX  X |
   1438  f400				   DinoGfx_C
   1439  f400		       1c		      .byte.b	$1C	; |   XXX  |  previously never used, restored in the new conversion
   1440  f401		       36		      .byte.b	$36	; |  XX XX |
   1441  f402		       26		      .byte.b	$26	; |  X  XX |
   1442  f403		       1c		      .byte.b	$1C	; |   XXX  |
   1443  f404		       3e		      .byte.b	$3E	; |  XXXXX |
   1444  f405		       7e		      .byte.b	$7E	; | XXXXXX |
   1445  f406		       14		      .byte.b	$14	; |   X X  |
   1446  f407		       34		      .byte.b	$34	; |  XX X  |
   1447  f408				   DinoGfx_D
   1448  f408		       1c		      .byte.b	$1C	; |   XXX  |  previously never used, restored in the new conversion
   1449  f409		       2a		      .byte.b	$2A	; |  X X X |
   1450  f40a		       2a		      .byte.b	$2A	; |  X X X |
   1451  f40b		       1c		      .byte.b	$1C	; |   XXX  |
   1452  f40c		       08		      .byte.b	$08	; |	X   |
   1453  f40d		       3e		      .byte.b	$3E	; |  XXXXX |
   1454  f40e		       1c		      .byte.b	$1C	; |   XXX  |
   1455  f40f		       26		      .byte.b	$26	; |  X  XX |
   1456  f410
   1457  f410				   ColCaveMan_LR_Even
   1458  f410		       42		      .byte.b	COL_42	; |  XXXX  |
   1459  f411		       48		      .byte.b	COL_48	; |   X X  |
   1460  f412		       48		      .byte.b	COL_48	; |  XX X  |
   1461  f413		       48		      .byte.b	COL_48	; |   XXX  |
   1462  f414		       48		      .byte.b	COL_48	; |  XXX   |
   1463  f415		       16		      .byte.b	COL_16	; | X XXX  |
   1464  f416		       48		      .byte.b	COL_48	; |   X XX |
   1465  f417		       48		      .byte.b	COL_48	; |  XX  X |
   1466  f418				   ColCaveMan_Up_Odd
   1467  f418		       42		      .byte.b	COL_42	; |  XXXX  |
   1468  f419		       42		      .byte.b	COL_42	; |  XXXX  |
   1469  f41a		       42		      .byte.b	COL_42	; |  XXXX  |
   1470  f41b		       42		      .byte.b	COL_42	; |  X XX  |
   1471  f41c		       48		      .byte.b	COL_48	; | X XX X |
   1472  f41d		       16		      .byte.b	COL_16	; |  XXXX  |
   1473  f41e		       48		      .byte.b	COL_48	; |   X XX |
   1474  f41f		       48		      .byte.b	COL_48	; |  XX    |
   1475  f420				   ColCaveMan_Down_Odd
   1476  f420		       42		      .byte.b	COL_42	; |  XXXX  |
   1477  f421		       48		      .byte.b	COL_48	; |  XXXX  |
   1478  f422		       48		      .byte.b	COL_48	; |  XXXX  |
   1479  f423		       48		      .byte.b	COL_48	; |   XX   |
   1480  f424		       48		      .byte.b	COL_48	; | XXXXXX |
   1481  f425		       16		      .byte.b	COL_16	; |  XXXX  |
   1482  f426		       48		      .byte.b	COL_48	; |   X XX |
   1483  f427		       48		      .byte.b	COL_48	; |  XX    |
   1484  f428				   ColCaveMan_LR_Odd
   1485  f428		       42		      .byte.b	COL_42	; |  XXXX  |
   1486  f429		       48		      .byte.b	COL_48	; |   X X  |
   1487  f42a		       48		      .byte.b	COL_48	; |  XX X  |
   1488  f42b		       48		      .byte.b	COL_48	; | X XXX  |
   1489  f42c		       48		      .byte.b	COL_48	; |  XXX   |
   1490  f42d		       16		      .byte.b	COL_16	; |   XXX  |
   1491  f42e		       48		      .byte.b	COL_48	; |   X XX |
   1492  f42f		       48		      .byte.b	COL_48	; |  XX    |
   1493  f430				   ColCaveMan_Up_Even
   1494  f430		       42		      .byte.b	COL_42	; |  XXXX  |
   1495  f431		       42		      .byte.b	COL_42	; |  XXXX  |
   1496  f432		       42		      .byte.b	COL_42	; |  XXXX  |
   1497  f433		       42		      .byte.b	COL_42	; |  X XX  |
   1498  f434		       48		      .byte.b	COL_48	; | XXXXXX |
   1499  f435		       16		      .byte.b	COL_16	; |  XXXX  |
   1500  f436		       48		      .byte.b	COL_48	; | XX X   |
   1501  f437		       48		      .byte.b	COL_48	; |	XX  |
   1502  f438				   ColCaveMan_Down_Even
   1503  f438		       42		      .byte.b	COL_42	; |  XXXX  |
   1504  f439		       48		      .byte.b	COL_48	; |  XXXX  |
   1505  f43a		       48		      .byte.b	COL_48	; |  XXXX  |
   1506  f43b		       48		      .byte.b	COL_48	; | X XX X |
   1507  f43c		       48		      .byte.b	COL_48	; |  XXXX  |
   1508  f43d		       16		      .byte.b	COL_16	; |  XXXX  |
   1509  f43e		       48		      .byte.b	COL_48	; | XX X   |
   1510  f43f		       48		      .byte.b	COL_48	; |	XX  |
   1511  f440
   1512  f440				   ColCaveMan_Push_LR
   1513  f440		       42		      .byte.b	COL_42	; |  XXXX  |
   1514  f441		       48		      .byte.b	COL_48	; |   X X  |
   1515  f442		       48		      .byte.b	COL_48	; |  XX X  |
   1516  f443		       48		      .byte.b	COL_48	; | X XX   |
   1517  f444		       48		      .byte.b	COL_48	; | XXXXX  |
   1518  f445		       16		      .byte.b	COL_16	; |   XXXX |
   1519  f446		       48		      .byte.b	COL_48	; |	 X  |
   1520  f447		       48		      .byte.b	COL_48	; |	XX  |
   1521  f448				   ColCaveMan_Push_Up
   1522  f448		       42		      .byte.b	COL_42	; |  XXXX  |
   1523  f449		       42		      .byte.b	COL_42	; |  XXXX  |
   1524  f44a		       42		      .byte.b	COL_42	; |  X XX  |
   1525  f44b		       48		      .byte.b	COL_48	; | X XX X |
   1526  f44c		       16		      .byte.b	COL_16	; |  XXXX  |
   1527  f44d		       48		      .byte.b	COL_48	; |   XX   |
   1528  f44e		       48		      .byte.b	COL_48	; |  XXXX  |
   1529  f44f		       00		      .byte.b	COL_00	; |	    |
   1530  f450				   ColCaveMan_Push_Down
   1531  f450		       00		      .byte.b	COL_00	; |	    |
   1532  f451		       42		      .byte.b	COL_42	; |  XXXX  |
   1533  f452		       48		      .byte.b	COL_48	; |  XXXX  |
   1534  f453		       48		      .byte.b	COL_48	; |  XXXX  |
   1535  f454		       48		      .byte.b	COL_48	; | X XX X |
   1536  f455		       16		      .byte.b	COL_16	; |  XXXX  |
   1537  f456		       48		      .byte.b	COL_48	; |   XX   |
   1538  f457		       48		      .byte.b	COL_48	; |  XXXX  |
   1539  f458
   1540  f458				   StoneShapesTab_A
   1541  f458		       00		      .byte.b	0	; |	    | 0   PF0,PF1,PF2
   1542  f459		       e0		      .byte.b	(STONE_PAT_1_FLIPPED << 4)	; |XXX     | 1   PF2
   1543  f45a		       0e		      .byte.b	(STONE_PAT_1_FLIPPED)	; |	XXX | 2   PF2
   1544  f45b		       ee		      .byte.b	(STONE_PAT_1_FLIPPED << 4) | (STONE_PAT_1_FLIPPED)	; |XXX XXX | 3   PF2
   1545  f45c		       07		      .byte.b	(STONE_PAT_1)	; |	 XXX| 4   PF1
   1546  f45d		       00 00 00 	      .byte.b	0,0,0	; not used
   1547  f460		       70		      .byte.b	(STONE_PAT_1 << 4)	; | XXX    | 8   PF1
   1548  f461		       00 00 00 	      .byte.b	0,0,0	; not used
   1549  f464		       77		      .byte.b	(STONE_PAT_1 << 4) | (STONE_PAT_1)	; | XXX XXX| 12  PF1
   1550  f465		       00 00 00 	      .byte.b	0,0,0	; not used
   1551  f468		       e0		      .byte.b	(STONE_PAT_1_FLIPPED << 4)	; |XXX     | 16  PF0
   1552  f469
   1553  f469				   StoneShapesTab_B
   1554  f469		       00		      .byte.b	0	; |	    | 0   PF0,PF1,PF2
   1555  f46a		       a0		      .byte.b	(STONE_PAT_2_FLIPPED << 4)	; |X X     | 1   PF2
   1556  f46b		       0a		      .byte.b	(STONE_PAT_2_FLIPPED)	; |	X X | 2   PF2
   1557  f46c		       aa		      .byte.b	(STONE_PAT_2_FLIPPED << 4) | (STONE_PAT_2_FLIPPED)	; |X X X X | 3   PF2
   1558  f46d		       05		      .byte.b	(STONE_PAT_2)	; |	 X X| 4   PF1
   1559  f46e		       00 00 00 	      .byte.b	0,0,0	; not used
   1560  f471		       50		      .byte.b	(STONE_PAT_2 << 4)	; | X X    | 8   PF1
   1561  f472		       00 00 00 	      .byte.b	0,0,0	; not used
   1562  f475		       55		      .byte.b	(STONE_PAT_2 << 4) | (STONE_PAT_2)	; | X X X X| 12  PF1
   1563  f476		       00 00 00 	      .byte.b	0,0,0	; not used
   1564  f479		       a0		      .byte.b	(STONE_PAT_2_FLIPPED << 4)	; |X X     | 16  PF0
   1565  f47a
   1566  f47a							;---------------------------------------------------------------------
   1567  f47a							; For some reason level 1's data also appears here, and is never used.
   1568  f47a							; Maybe it was put here to help develop the PFx tables above, or the
   1569  f47a							; position table below. Either way it got left behind.
   1570  f47a
      0  f47a					      stones	___X_X____
      1  f47a		       02 10		      .word.w	___X_X____
      0  f47c					      stones	XX_X_XXXX_
      1  f47c		       1a 1e		      .word.w	XX_X_XXXX_
      0  f47e					      stones	___X______
      1  f47e		       02 00		      .word.w	___X______
      0  f480					      stones	_XXX_XX_X_
      1  f480		       0e 1a		      .word.w	_XXX_XX_X_
      0  f482					      stones	______X_X_
      1  f482		       00 0a		      .word.w	______X_X_
      0  f484					      stones	XX_X__X_X_
      1  f484		       1a 0a		      .word.w	XX_X__X_X_
      0  f486					      stones	_X_XX_X_XX
      1  f486		       0b 0b		      .word.w	_X_XX_X_XX
      0  f488					      stones	___X__X___
      1  f488		       02 08		      .word.w	___X__X___
   1579  f48a
   1580  f48a							;---------------------------------------------------------------------
   1581  f48a
   1582  f48a				   StoneHorzPosTab
   1583  f48a				  -	      IF	OFF_CENTER_POSITION
   1584  f48a				  -			;			    column
   1585  f48a				  -			;			    number
   1586  f48a				  -	      .byte	LEFT_2 | 1	; 1	    HMPx | delay count
   1587  f48a				  -	      .byte	LEFT_7 | 3	; 2
   1588  f48a				  -	      .byte	LEFT_6 | 4	; 3
   1589  f48a				  -	      .byte	LEFT_5 | 5	; 4
   1590  f48a				  -	      .byte	LEFT_3 | 6	; 5
   1591  f48a				  -	      .byte	LEFT_3 | 7	; 6
   1592  f48a				  -	      .byte	LEFT_2 | 8	; 7
   1593  f48a				  -	      .byte	LEFT_1 | 9	; 8
   1594  f48a				  -	      .byte	NO_MOTION | 10	; 9
   1595  f48a				  -	      .byte	NO_MOTION | 11	; 10
   1596  f48a					      ELSE
   1597  f48a							;			    column
   1598  f48a							;			    number
   1599  f48a		       21		      .byte.b	LEFT_2 | 1	; 1	    HMPx | delay count
   1600  f48b		       73		      .byte.b	LEFT_7 | 3	; 2
   1601  f48c		       64		      .byte.b	LEFT_6 | 4	; 3
   1602  f48d		       55		      .byte.b	LEFT_5 | 5	; 4
   1603  f48e		       46		      .byte.b	LEFT_4 | 6	; 5  <--- fixed center column by shifting left 1 more spot
   1604  f48f		       37		      .byte.b	LEFT_3 | 7	; 6
   1605  f490		       28		      .byte.b	LEFT_2 | 8	; 7
   1606  f491		       19		      .byte.b	LEFT_1 | 9	; 8
   1607  f492		       0a		      .byte.b	NO_MOTION | 10	; 9
   1608  f493		       fb		      .byte.b	RIGHT_1 | 11	; 10 <--- fixed far right column by shifting right 1 more spot
   1609  f494					      ENDIF
   1610  f494
   1611  f494				   Zero
   1612  f494		       3c		      .byte.b	$3C	; |  XXXX  |
   1613  f495		       62		      .byte.b	$62	; | XX   X |
   1614  f496		       66		      .byte.b	$66	; | XX  XX |
   1615  f497		       6a		      .byte.b	$6A	; | XX X X |
   1616  f498		       72		      .byte.b	$72	; | XXX  X |
   1617  f499		       62		      .byte.b	$62	; | XX   X |
   1618  f49a		       3c		      .byte.b	$3C	; |  XXXX  |
   1619  f49b		       00		      .byte.b	$00	; |	    |
   1620  f49c				   One
   1621  f49c		       38		      .byte.b	$38	; |  XXX   |
   1622  f49d		       18		      .byte.b	$18	; |   XX   |
   1623  f49e		       18		      .byte.b	$18	; |   XX   |
   1624  f49f		       18		      .byte.b	$18	; |   XX   |
   1625  f4a0		       18		      .byte.b	$18	; |   XX   |
   1626  f4a1		       18		      .byte.b	$18	; |   XX   |
   1627  f4a2		       3c		      .byte.b	$3C	; |  XXXX  |
   1628  f4a3		       00		      .byte.b	$00	; |	    |
   1629  f4a4				   Two
   1630  f4a4		       3c		      .byte.b	$3C	; |  XXXX  |
   1631  f4a5		       62		      .byte.b	$62	; | XX   X |
   1632  f4a6		       02		      .byte.b	$02	; |	  X |
   1633  f4a7		       06		      .byte.b	$06	; |	 XX |
   1634  f4a8		       18		      .byte.b	$18	; |   XX   |
   1635  f4a9		       60		      .byte.b	$60	; | XX     |
   1636  f4aa		       7e		      .byte.b	$7E	; | XXXXXX |
   1637  f4ab		       00		      .byte.b	$00	; |	    |
   1638  f4ac				   Three
   1639  f4ac		       3c		      .byte.b	$3C	; |  XXXX  |
   1640  f4ad		       62		      .byte.b	$62	; | XX   X |
   1641  f4ae		       02		      .byte.b	$02	; |	  X |
   1642  f4af		       04		      .byte.b	$04	; |	 X  |
   1643  f4b0		       02		      .byte.b	$02	; |	  X |
   1644  f4b1		       62		      .byte.b	$62	; | XX   X |
   1645  f4b2		       3c		      .byte.b	$3C	; |  XXXX  |
   1646  f4b3		       00		      .byte.b	$00	; |	    |
   1647  f4b4				   Four
   1648  f4b4		       0c		      .byte.b	$0C	; |	XX  |
   1649  f4b5		       1c		      .byte.b	$1C	; |   XXX  |
   1650  f4b6		       34		      .byte.b	$34	; |  XX X  |
   1651  f4b7		       64		      .byte.b	$64	; | XX  X  |
   1652  f4b8		       7e		      .byte.b	$7E	; | XXXXXX |
   1653  f4b9		       04		      .byte.b	$04	; |	 X  |
   1654  f4ba		       04		      .byte.b	$04	; |	 X  |
   1655  f4bb		       00		      .byte.b	$00	; |	    |
   1656  f4bc				   Five
   1657  f4bc		       7e		      .byte.b	$7E	; | XXXXXX |
   1658  f4bd		       60		      .byte.b	$60	; | XX     |
   1659  f4be		       7c		      .byte.b	$7C	; | XXXXX  |
   1660  f4bf		       02		      .byte.b	$02	; |	  X |
   1661  f4c0		       02		      .byte.b	$02	; |	  X |
   1662  f4c1		       62		      .byte.b	$62	; | XX   X |
   1663  f4c2		       3c		      .byte.b	$3C	; |  XXXX  |
   1664  f4c3		       00		      .byte.b	$00	; |	    |
   1665  f4c4				   Six
   1666  f4c4		       1e		      .byte.b	$1E	; |   XXXX |
   1667  f4c5		       30		      .byte.b	$30	; |  XX    |
   1668  f4c6		       60		      .byte.b	$60	; | XX     |
   1669  f4c7		       7c		      .byte.b	$7C	; | XXXXX  |
   1670  f4c8		       62		      .byte.b	$62	; | XX   X |
   1671  f4c9		       62		      .byte.b	$62	; | XX   X |
   1672  f4ca		       3c		      .byte.b	$3C	; |  XXXX  |
   1673  f4cb		       00		      .byte.b	$00	; |	    |
   1674  f4cc				   Seven
   1675  f4cc		       7e		      .byte.b	$7E	; | XXXXXX |
   1676  f4cd		       06		      .byte.b	$06	; |	 XX |
   1677  f4ce		       0c		      .byte.b	$0C	; |	XX  |
   1678  f4cf		       18		      .byte.b	$18	; |   XX   |
   1679  f4d0		       30		      .byte.b	$30	; |  XX    |
   1680  f4d1		       30		      .byte.b	$30	; |  XX    |
   1681  f4d2		       30		      .byte.b	$30	; |  XX    |
   1682  f4d3		       00		      .byte.b	$00	; |	    |
   1683  f4d4				   Eight
   1684  f4d4		       3c		      .byte.b	$3C	; |  XXXX  |
   1685  f4d5		       62		      .byte.b	$62	; | XX   X |
   1686  f4d6		       62		      .byte.b	$62	; | XX   X |
   1687  f4d7		       3c		      .byte.b	$3C	; |  XXXX  |
   1688  f4d8		       62		      .byte.b	$62	; | XX   X |
   1689  f4d9		       62		      .byte.b	$62	; | XX   X |
   1690  f4da		       3c		      .byte.b	$3C	; |  XXXX  |
   1691  f4db		       00		      .byte.b	$00	; |	    |
   1692  f4dc				   Nine
   1693  f4dc		       3c		      .byte.b	$3C	; |  XXXX  |
   1694  f4dd		       62		      .byte.b	$62	; | XX   X |
   1695  f4de		       62		      .byte.b	$62	; | XX   X |
   1696  f4df		       3e		      .byte.b	$3E	; |  XXXXX |
   1697  f4e0		       02		      .byte.b	$02	; |	  X |
   1698  f4e1		       04		      .byte.b	$04	; |	 X  |
   1699  f4e2		       78		      .byte.b	$78	; | XXXX   |
   1700  f4e3		       00		      .byte.b	$00	; |	    |
   1701  f4e4				   BlankDigit
   1702  f4e4		       00		      .byte.b	$00	; |	    |
   1703  f4e5		       00		      .byte.b	$00	; |	    |
   1704  f4e6		       00		      .byte.b	$00	; |	    |
   1705  f4e7		       00		      .byte.b	$00	; |	    |
   1706  f4e8		       00		      .byte.b	$00	; |	    |
   1707  f4e9		       00		      .byte.b	$00	; |	    |
   1708  f4ea		       00		      .byte.b	$00	; |	    |
   1709  f4eb		       00		      .byte.b	$00	; |	    |
   1710  f4ec
   1711  f4ec				  -	      IF	CCE_LOGO
   1712  f4ec				  -
   1713  f4ec				  -			;----------------------------------------------
   1714  f4ec				  -			;	   XXXXX   XXXXX   XXXXX
   1715  f4ec				  -			;	  XXXXXXX XXXXXXX XXXXXXX
   1716  f4ec				  -			;     X  XX  XXX XX  XXX XX  XXX  X
   1717  f4ec				  -			;    X X XX	  XX	  XXXXXXX X X
   1718  f4ec				  -			;     X  XX  XXX XX  XXX XX	   X
   1719  f4ec				  -			;	  XXXXXXX XXXXXXX XXXXXXX
   1720  f4ec				  -			;	   XXXXX   XXXXX   XXXXX
   1721  f4ec				  -			;
   1722  f4ec				  -
   1723  f4ec				  -
   1724  f4ec				  -Logo_A
   1725  f4ec				  -	      .byte	$07	; |	 XXX|
   1726  f4ec				  -	      .byte	$0F	; |	XXXX|
   1727  f4ec				  -	      .byte	$4C	; | X	XX  |
   1728  f4ec				  -	      .byte	$AC	; |X X XX  |
   1729  f4ec				  -	      .byte	$4C	; | X	XX  |
   1730  f4ec				  -	      .byte	$0F	; |	XXXX|
   1731  f4ec				  -	      .byte	$07	; |	 XXX|
   1732  f4ec				  -	      .byte	$00	; |	    |
   1733  f4ec				  -Logo_B
   1734  f4ec				  -	      .byte	$C7	; |XX	 XXX|
   1735  f4ec				  -	      .byte	$EF	; |XXX XXXX|
   1736  f4ec				  -	      .byte	$EC	; |XXX XX  |
   1737  f4ec				  -	      .byte	$0C	; |	XX  |
   1738  f4ec				  -	      .byte	$EC	; |XXX XX  |
   1739  f4ec				  -	      .byte	$EF	; |XXX XXXX|
   1740  f4ec				  -	      .byte	$C7	; |XX	 XXX|
   1741  f4ec				  -	      .byte	$00	; |	    |
   1742  f4ec				  -Logo_C
   1743  f4ec				  -	      .byte	$C7	; |XX	 XXX|
   1744  f4ec				  -	      .byte	$EF	; |XXX XXXX|
   1745  f4ec				  -	      .byte	$EC	; |XXX XX  |
   1746  f4ec				  -	      .byte	$0F	; |	XXXX|
   1747  f4ec				  -	      .byte	$EC	; |XXX XX  |
   1748  f4ec				  -	      .byte	$EF	; |XXX XXXX|
   1749  f4ec				  -	      .byte	$C7	; |XX	 XXX|
   1750  f4ec				  -	      .byte	$00	; |	    |
   1751  f4ec				  -Logo_D
   1752  f4ec				  -	      .byte	$C0	; |XX	    |
   1753  f4ec				  -	      .byte	$E0	; |XXX     |
   1754  f4ec				  -	      .byte	$E4	; |XXX  X  |
   1755  f4ec				  -	      .byte	$EA	; |XXX X X |
   1756  f4ec				  -	      .byte	$04	; |	 X  |
   1757  f4ec				  -	      .byte	$E0	; |XXX     |
   1758  f4ec				  -	      .byte	$C0	; |XX	    |
   1759  f4ec				  -	      .byte	$00	; |	    |
   1760  f4ec				  -Logo_E
   1761  f4ec				  -	      .byte	$00	; |	    |
   1762  f4ec				  -	      .byte	$00	; |	    |
   1763  f4ec				  -	      .byte	$00	; |	    |
   1764  f4ec				  -	      .byte	$00	; |	    |
   1765  f4ec				  -	      .byte	$00	; |	    |
   1766  f4ec				  -	      .byte	$00	; |	    |
   1767  f4ec				  -	      .byte	$00	; |	    |
   1768  f4ec				  -	      .byte	$00	; |	    |
   1769  f4ec				  -
   1770  f4ec					      ENDIF
   1771  f4ec
   1772  f4ec					      IF	TECHNOVISION_LOGO
   1773  f4ec
   1774  f4ec							;----------------------------------------------
   1775  f4ec							;			  XX   XX
   1776  f4ec							;			   X   X
   1777  f4ec							;    XXXXXX XX X X  X	 X XX XX  XX	X   X
   1778  f4ec							;     X X  X	X X X X X X X X X X  X X X X X
   1779  f4ec							;     X XX X	XXX X X X X X X X X  X X X X X
   1780  f4ec							;     X X  X	X X X X X X XXX X  X X X X X X
   1781  f4ec							;     X XXX XX X X X X  X   X	X XX X	X  X X
   1782  f4ec							;			     X
   1783  f4ec
   1784  f4ec				   Logo_A
   1785  f4ec		       00		      .byte.b	$00	; |	    |
   1786  f4ed		       00		      .byte.b	$00	; |	    |
   1787  f4ee		       fd		      .byte.b	$FD	; |XXXXXX X|
   1788  f4ef		       52		      .byte.b	$52	; | X X  X |
   1789  f4f0		       5a		      .byte.b	$5A	; | X XX X |
   1790  f4f1		       52		      .byte.b	$52	; | X X  X |
   1791  f4f2		       5d		      .byte.b	$5D	; | X XXX X|
   1792  f4f3		       00		      .byte.b	$00	; |	    |
   1793  f4f4				   Logo_B
   1794  f4f4		       00		      .byte.b	$00	; |	    |
   1795  f4f5		       00		      .byte.b	$00	; |	    |
   1796  f4f6		       a9		      .byte.b	$A9	; |X X X  X|
   1797  f4f7		       2a		      .byte.b	$2A	; |  X X X |
   1798  f4f8		       3a		      .byte.b	$3A	; |  XXX X |
   1799  f4f9		       2a		      .byte.b	$2A	; |  X X X |
   1800  f4fa		       aa		      .byte.b	$AA	; |X X X X |
   1801  f4fb		       00		      .byte.b	$00	; |	    |
   1802  f4fc				   Logo_C
   1803  f4fc		       0c		      .byte.b	$0C	; |	XX  |
   1804  f4fd		       04		      .byte.b	$04	; |	 X  |
   1805  f4fe		       16		      .byte.b	$16	; |   X XX |
   1806  f4ff		       aa		      .byte.b	$AA	; |X X X X |
   1807  f500		       aa		      .byte.b	$AA	; |X X X X |
   1808  f501		       ab		      .byte.b	$AB	; |X X X XX|
   1809  f502		       91		      .byte.b	$91	; |X  X   X|
   1810  f503		       01		      .byte.b	$01	; |	   X|
   1811  f504				   Logo_D
   1812  f504		       60		      .byte.b	$60	; | XX     |
   1813  f505		       40		      .byte.b	$40	; | X	    |
   1814  f506		       cc		      .byte.b	$CC	; |XX	XX  |
   1815  f507		       a9		      .byte.b	$A9	; |X X X  X|
   1816  f508		       a9		      .byte.b	$A9	; |X X X  X|
   1817  f509		       a5		      .byte.b	$A5	; |X X  X X|
   1818  f50a		       2d		      .byte.b	$2D	; |  X XX X|
   1819  f50b		       00		      .byte.b	$00	; |	    |
   1820  f50c				   Logo_E
   1821  f50c		       00		      .byte.b	$00	; |	    |
   1822  f50d		       00		      .byte.b	$00	; |	    |
   1823  f50e		       22		      .byte.b	$22	; |  X   X |
   1824  f50f		       55		      .byte.b	$55	; | X X X X|
   1825  f510		       55		      .byte.b	$55	; | X X X X|
   1826  f511		       55		      .byte.b	$55	; | X X X X|
   1827  f512		       25		      .byte.b	$25	; |  X  X X|
   1828  f513		       00		      .byte.b	$00	; |	    |
   1829  f514
   1830  f514					      ENDIF
   1831  f514
   1832  f514							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1833  f514
   1834  f514				   MoveDinoUp
   1835  f514		       a6 c6		      ldx	dinoMoveIndex
   1836  f516		       b5 c2		      lda	dinoPosition,X
   1837  f518		       38		      sec
   1838  f519		       e9 10		      sbc	#ONE_ROW
   1839  f51b		       95 c2		      sta	dinoPosition,X
   1840  f51d		       a9 f8		      lda	#<DinoGfx_B
   1841  f51f		       95 b9		      sta	dinoLoPtr,X
   1842  f521		       b5 d8		      lda	dinoDirection,X
   1843  f523		       29 0d		      and	#DOWN_NOT_ALLOWED_MASK
   1844  f525		       09 10		      ora	#TRAVEL_UP
   1845  f527		       95 d8		      sta	dinoDirection,X
   1846  f529		       60		      rts
   1847  f52a
   1848  f52a				   MoveDinoDown
   1849  f52a		       a6 c6		      ldx	dinoMoveIndex
   1850  f52c		       b5 c2		      lda	dinoPosition,X
   1851  f52e		       18		      clc
   1852  f52f		       69 10		      adc	#ONE_ROW
   1853  f531		       95 c2		      sta	dinoPosition,X
   1854  f533		       a9 f8		      lda	#<DinoGfx_B
   1855  f535		       95 b9		      sta	dinoLoPtr,X
   1856  f537		       b5 d8		      lda	dinoDirection,X
   1857  f539		       29 0e		      and	#UP_NOT_ALLOWED_MASK
   1858  f53b		       09 20		      ora	#TRAVEL_DOWN
   1859  f53d		       95 d8		      sta	dinoDirection,X
   1860  f53f		       60		      rts
   1861  f540
   1862  f540				   MoveDinoLeft
   1863  f540		       a6 c6		      ldx	dinoMoveIndex
   1864  f542		       b5 c2		      lda	dinoPosition,X
   1865  f544		       38		      sec
   1866  f545		       e9 01		      sbc	#ONE_COLUMN
   1867  f547		       95 c2		      sta	dinoPosition,X
   1868  f549		       a9 00		      lda	#NO_REFLECT
   1869  f54b		       95 b5		      sta	reflectDinoGfx,X
   1870  f54d		       a9 f0		      lda	#<DinoGfx_A
   1871  f54f		       95 b9		      sta	dinoLoPtr,X
   1872  f551		       b5 d8		      lda	dinoDirection,X
   1873  f553		       29 07		      and	#RIGHT_NOT_ALLOWED_MASK
   1874  f555		       09 40		      ora	#TRAVEL_LEFT
   1875  f557		       95 d8		      sta	dinoDirection,X
   1876  f559		       60		      rts
   1877  f55a
   1878  f55a				   MoveDinoRight
   1879  f55a		       a6 c6		      ldx	dinoMoveIndex
   1880  f55c		       b5 c2		      lda	dinoPosition,X
   1881  f55e		       18		      clc
   1882  f55f		       69 01		      adc	#ONE_COLUMN
   1883  f561		       95 c2		      sta	dinoPosition,X
   1884  f563		       a9 08		      lda	#REFLECT_GFX
   1885  f565		       95 b5		      sta	reflectDinoGfx,X
   1886  f567		       a9 f0		      lda	#<DinoGfx_A
   1887  f569		       95 b9		      sta	dinoLoPtr,X
   1888  f56b		       b5 d8		      lda	dinoDirection,X
   1889  f56d		       29 0b		      and	#LEFT_NOT_ALLOWED_MASK
   1890  f56f		       09 80		      ora	#TRAVEL_RIGHT
   1891  f571		       95 d8		      sta	dinoDirection,X
   1892  f573		       60		      rts
   1893  f574
   1894  f574							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1895  f574							;			      BuildDinoStoneIndexes SUBROUTINE
   1896  f574							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1897  f574							;
   1898  f574							; 10 bits are used for the stones in each row, as shown below:
   1899  f574							;
   1900  f574							;		  1st byte    2nd byte
   1901  f574							;		   left PF    right PF
   1902  f574							;
   1903  f574							;		   76543210   76543210
   1904  f574							; one row ----->  ...XXXXX   ...XXXXX
   1905  f574							;		      |   |	 |   |
   1906  f574							;		      |   |	 |   stone bit for column 10
   1907  f574							;		      |   |	 |
   1908  f574							;		      |   |	 stone bit for column 6
   1909  f574							;		      |   |
   1910  f574							;		      |   stone bit for column 5
   1911  f574							;		      |
   1912  f574							;		      stone bit for column 1
   1913  f574							;
   1914  f574							; - The index covers 8 rows times 2 (2 bytes of stone data).
   1915  f574							; - If the dinosaur is on the rightside of the playfield, then the 2nd byte of data would have to be checked.
   1916  f574							; - Special cases when the dinosaur is in column 5 or 6 are handled in the stone checking routine. If, for example, the
   1917  f574							;   dinosaur is column 6 then the leftside PF stone byte would have to be checked for a stone in column 5, while the
   1918  f574							;   rightside stone bytes are checked for stones above, below, and to the right of the dinosaur.
   1919  f574							; - The row index is also converted to a zero based index (DEX is used twice since the multiplication by 2 bytes is done before the adjustment).
   1920  f574							;
   1921  f574							; row index, which now indexes leftside/rightside stone bytes for that row:
   1922  f574							; 00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15
   1923  f574							;  |  |  |  |	|  |  |  |  |  |  |  |	|  |  |  |
   1924  f574							;  |  |  |  |	|  |  |  |  |  |  |  |	|  |  |  bottom row, use right side PF stone bits
   1925  f574							;  |  |  |  |	|  |  |  |  |  |  |  |	|  |  bottom row, use left side PF stone bits
   1926  f574							;  |  |  |  |	|  |  |  |  |  |  |  |	|  |
   1927  f574							;  |  |   .................................
   1928  f574							;  |  |
   1929  f574							;  |  top row, use right side PF stone bits
   1930  f574							;  top row, use left side PF stone bits
   1931  f574
   1932  f574
   1933  f574
   1934  f574
   1935  f574				   BuildDinoStoneIndexes SUBROUTINE		;x1
   1936  f574		       a5 b2		      lda	currentDinoRow	; currentDinoRow, 1 to 8
   1937  f576		       0a		      asl		; time by two bytes of data, index is now 2 to 16 (but only even numbers)
   1938  f577		       aa		      tax
   1939  f578		       ca		      dex
   1940  f579		       ca		      dex		; decrease one row, value is now 0,2,4,6,8,10,12, or 14 (zero based index)
   1941  f57a		       a5 b3		      lda	currentDinoColumn	; load currentDinoColumn, 1 to 10
   1942  f57c		       c9 06		      cmp	#(NUM_OF_COLUMNS/2)+1	; is Dino on the left side playfield?
   1943  f57e		       90 04		      bcc	.makeDinoColumnIndex	; - yes, on left side (columns 1 to 5)
   1944  f580		       e8		      inx		; - no, dino is on right side, increase row index in order to load the 2nd byte.
   1945  f581							;   Index becomes an odd number ---> 1,3,5,7,9,11,13, or 15
   1946  f581		       38		      sec
   1947  f582		       e9 05		      sbc	#(NUM_OF_COLUMNS/2)	; subtract five columns, to make columns 6 to 10 -----> 1 to 5 as well
   1948  f584				   .makeDinoColumnIndex
   1949  f584
   1950  f584							;   ****  at this point the column index is now always 1 to 5, which will be used index the five stone bits in the left or right PF stone byte.
   1951  f584
   1952  f584
   1953  f584
   1954  f584
   1955  f584							; ASL will ultimately be used to parse all the stone bits (probably because the leftmost stone is also the lowest column number).
   1956  f584							;
   1957  f584							;	76543210
   1958  f584							;	...XXXXX   <-------- ASL this byte 3 times to get the leftmost stone into the carry, to be checked with BCS
   1959  f584							;	   |
   1960  f584							;	   leftmost stone, column 1 for leftside of PF or column 6 for rightside PF
   1961  f584							;
   1962  f584							; The addition below factors in these extra number of shifts...
   1963  f584
   1964  f584		       18		      clc
   1965  f585		       69 03		      adc	#SHIFT_UNUSED_BITS	; add 3 bits, index goes 1 to 5 ------> 4 to 8
   1966  f587		       86 b2		      stx	indexStoneByteDino	; store as an index for the PF stone byte, 0 to 15
   1967  f589		       85 b3		      sta	stoneBitDinoIsOn	; store as an left shift index for the stone bit, 4 to 8
   1968  f58b		       60		      rts
   1969  f58c
   1970  f58c
   1971  f58c							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1972  f58c							; This is essentially the same subroutine as "BuildDinoStoneIndexes" right above here,
   1973  f58c							; except it is for the caveman and the X register ends up holding the byte index, and Y the bit shift index
   1974  f58c
   1975  f58c				   BuildCavemanStoneIndexes SUBROUTINE		;x5
   1976  f58c		       a5 84		      lda	rowCaveman
   1977  f58e		       0a		      asl
   1978  f58f		       aa		      tax
   1979  f590		       ca		      dex
   1980  f591		       ca		      dex
   1981  f592		       a5 af		      lda	columnCaveman
   1982  f594		       c9 06		      cmp	#(NUM_OF_COLUMNS/2)+1
   1983  f596		       90 04		      bcc	.makeCavemanColumnIndex
   1984  f598		       e8		      inx
   1985  f599		       38		      sec
   1986  f59a		       e9 05		      sbc	#(NUM_OF_COLUMNS/2)
   1987  f59c				   .makeCavemanColumnIndex
   1988  f59c		       18		      clc
   1989  f59d		       69 03		      adc	#SHIFT_UNUSED_BITS
   1990  f59f		       a8		      tay
   1991  f5a0		       60		      rts
   1992  f5a1
   1993  f5a1							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   1994  f5a1
   1995  f5a1				   CheckTimeRemaing SUBROUTINE		;x1
   1996  f5a1		       a5 81		      lda	frameCounter
   1997  f5a3		       29 07		      and	#EIGHT_FRAME_MASK
      0  f5a5					      EXIT_UNLESS_SUBFRAME	TIME_LEFT_SUBFRAME
      1  f5a5		       c9 01		      cmp	#TIME_LEFT_SUBFRAME
      2  f5a7		       f0 01		      beq	.contRoutine
      3  f5a9		       60		      rts
      4  f5aa				   .contRoutine
   1999  f5aa
   2000  f5aa		       a9 4b		      lda	#TIME_LIMIT
   2001  f5ac		       38		      sec
   2002  f5ad		       e5 82		      sbc	secondsCounter
   2003  f5af		       d0 03		      bne	.checkForTimeWarning
   2004  f5b1		       4c 65 fc 	      jmp	StartDeathSequence	; times up!
   2005  f5b4
   2006  f5b4				   .checkForTimeWarning
   2007  f5b4		       c9 0f		      cmp	#TIME_WARNING
   2008  f5b6		       f0 01		      beq	.issueTimeWarning
   2009  f5b8		       60		      rts
   2010  f5b9
   2011  f5b9				   .issueTimeWarning
   2012  f5b9		       a9 b8		      lda	#COL_PF_STONES_BLUE
   2013  f5bb		       85 dc		      sta	colStones
   2014  f5bd		       60		      rts
   2015  f5be
   2016  f5be							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2017  f5be
   2018  f5be				   MoveCavemanUpdateGfx SUBROUTINE		;x1
      0  f5be					      EXIT_IF_STONE_SLIDING
      1  f5be		       a5 c7		      lda	movingStone
      2  f5c0		       10 01		      bpl	.contRoutine
      3  f5c2		       60		      rts
      4  f5c3				   .contRoutine
   2020  f5c3		       a5 df		      lda	joystickDelay
   2021  f5c5		       10 06		      bpl	.doOnceEvery16frames	; - if ALLOW_JOYSTICK_FLAG not set
   2022  f5c7		       a5 81		      lda	frameCounter
   2023  f5c9		       29 0f		      and	#SIXTEEN_FRAME_MASK
   2024  f5cb		       85 df		      sta	joystickDelay
   2025  f5cd				   .doOnceEvery16frames
   2026  f5cd		       45 81		      eor	frameCounter
   2027  f5cf		       29 0f		      and	#SIXTEEN_FRAME_MASK
   2028  f5d1		       f0 01		      beq	.isCavemanMoving
   2029  f5d3		       60		      rts
   2030  f5d4
   2031  f5d4				   .isCavemanMoving
   2032  f5d4		       a5 e6		      lda	moveCavemanFlag	; was caveman being moved (previous frame)
   2033  f5d6		       f0 05		      beq	.joyNotPressed	; - no
   2034  f5d8		       a9 00		      lda	#CLEAR_CAVEMAN_FLAG	; - yes, and frameCounter was decremented so that this is reached.
   2035  f5da		       85 e6		      sta	moveCavemanFlag
   2036  f5dc		       60		      rts
   2037  f5dd
   2038  f5dd				   .joyNotPressed
   2039  f5dd		       a5 d4		      lda	currentJoystick
   2040  f5df		       c9 0f		      cmp	#DIRECTION_MASK	; is nothing pressed?
   2041  f5e1		       d0 05		      bne	.directionIsPressed	; - no
   2042  f5e3		       a9 80		      lda	#ALLOW_JOYSTICK_FLAG	; - yes, start checking movement, but not this frame
   2043  f5e5		       85 df		      sta	joystickDelay
   2044  f5e7		       60		      rts
   2045  f5e8
   2046  f5e8				   .directionIsPressed
   2047  f5e8		       a9 01		      lda	#CAVEMAN_MOVEMENT_FLAG	; happens every 16 frames when joystick held, and gets cleared next frame
   2048  f5ea		       85 e6		      sta	moveCavemanFlag
   2049  f5ec		       c6 81		      dec	frameCounter	; this might cause bad timings, but doing this allows moveCavemanFlag to be cleared the following frame
   2050  f5ee		       20 8c f5 	      jsr	BuildCavemanStoneIndexes
   2051  f5f1
   2052  f5f1		       a5 d4		      lda	currentJoystick
   2053  f5f3				  -	      IF	BAD_DIRECTIONS
   2054  f5f3				  -	      cmp	#(~UP_DIRECTION & DIRECTION_MASK)
   2055  f5f3				  -	      bne	.isCavemanOnBottomRow
   2056  f5f3					      ELSE
   2057  f5f3		       ea		      nop		; free byte, just using the NOP to keep new code aligned with old...
   2058  f5f4		       4a		      lsr
   2059  f5f5		       b0 42		      bcs	.isCavemanOnBottomRow
   2060  f5f7					      ENDIF
   2061  f5f7		       e0 02		      cpx	#TOP_ROW_BYTE_INDEX
   2062  f5f9		       b0 03		      bcs	.checkAboveCaveman
   2063  f5fb		       4c de fb 	      jmp	GotoScorePrep
   2064  f5fe
   2065  f5fe				   .checkAboveCaveman
      0  f5fe					      MOVE_INDEX_UP_ONE_ROW
      1  f5fe		       ca		      dex
      2  f5ff		       ca		      dex
      0  f600					      TEST_STONE_BIT
      1  f600		       b5 92		      lda	stoneOrder,X
      2  f602				   .loopTestStoneBit
      3  f602		       0a		      asl
      4  f603		       88		      dey
      5  f604		       d0 fc		      bne	.loopTestStoneBit
   2068  f606		       90 03		      bcc	.moveCavemanUp
   2069  f608		       4c de fb 	      jmp	GotoScorePrep
   2070  f60b
   2071  f60b				   .moveCavemanUp
   2072  f60b		       c6 84		      dec	rowCaveman
   2073  f60d		       a5 84		      lda	rowCaveman
   2074  f60f		       29 01		      and	#ODD_EVEN_PTRS_MASK
   2075  f611		       f0 13		      beq	.evenCavemanUp
      0  f613					      SET_CAVEMAN_PTRS	CaveMan_Up_Odd, ColCaveMan_Up_Odd
      1  f613		       a9 b0		      lda	#<CaveMan_Up_Odd
      2  f615		       85 86		      sta	cavemanPtr
      3  f617		       a9 f3		      lda	#>CaveMan_Up_Odd
      4  f619		       85 87		      sta	cavemanPtr+1
      5  f61b		       a9 18		      lda	#<ColCaveMan_Up_Odd
      6  f61d		       85 aa		      sta	cavemanColPtr
      7  f61f		       a9 f4		      lda	#>ColCaveMan_Up_Odd
      8  f621		       85 ab		      sta	cavemanColPtr+1
   2077  f623		       4c de fb 	      jmp	GotoScorePrep
   2078  f626
   2079  f626				   .evenCavemanUp
      0  f626					      SET_CAVEMAN_PTRS	CaveMan_Up_Even, ColCaveMan_Up_Even
      1  f626		       a9 c8		      lda	#<CaveMan_Up_Even
      2  f628		       85 86		      sta	cavemanPtr
      3  f62a		       a9 f3		      lda	#>CaveMan_Up_Even
      4  f62c		       85 87		      sta	cavemanPtr+1
      5  f62e		       a9 30		      lda	#<ColCaveMan_Up_Even
      6  f630		       85 aa		      sta	cavemanColPtr
      7  f632		       a9 f4		      lda	#>ColCaveMan_Up_Even
      8  f634		       85 ab		      sta	cavemanColPtr+1
   2081  f636		       4c de fb 	      jmp	GotoScorePrep
   2082  f639
   2083  f639
   2084  f639
   2085  f639				   .isCavemanOnBottomRow
   2086  f639				  -	      IF	BAD_DIRECTIONS
   2087  f639				  -	      cmp	#(~DOWN_DIRECTION & DIRECTION_MASK)
   2088  f639				  -	      bne	.isCavemanOnLeftColumn
   2089  f639					      ELSE
   2090  f639		       ea		      nop		; free byte, just using the NOP to keep new code aligned with old...
   2091  f63a		       4a		      lsr
   2092  f63b		       b0 42		      bcs	.isCavemanOnLeftColumn
   2093  f63d					      ENDIF
   2094  f63d		       e0 0e		      cpx	#BOTTOM_ROW_BYTE_INDEX
   2095  f63f		       90 03		      bcc	.checkBelowCaveman
   2096  f641		       4c de fb 	      jmp	GotoScorePrep
   2097  f644
   2098  f644				   .checkBelowCaveman
      0  f644					      MOVE_INDEX_DOWN_ONE_ROW
      1  f644		       e8		      inx
      2  f645		       e8		      inx
      0  f646					      TEST_STONE_BIT
      1  f646		       b5 92		      lda	stoneOrder,X
      2  f648				   .loopTestStoneBit
      3  f648		       0a		      asl
      4  f649		       88		      dey
      5  f64a		       d0 fc		      bne	.loopTestStoneBit
   2101  f64c		       90 03		      bcc	.moveCavemanDown
   2102  f64e		       4c de fb 	      jmp	GotoScorePrep
   2103  f651
   2104  f651				   .moveCavemanDown
   2105  f651		       e6 84		      inc	rowCaveman
   2106  f653		       a5 84		      lda	rowCaveman
   2107  f655		       29 01		      and	#ODD_EVEN_PTRS_MASK
   2108  f657		       f0 13		      beq	.evenCavemanDown
      0  f659					      SET_CAVEMAN_PTRS	CaveMan_Down_Odd, ColCaveMan_Down_Odd
      1  f659		       a9 b8		      lda	#<CaveMan_Down_Odd
      2  f65b		       85 86		      sta	cavemanPtr
      3  f65d		       a9 f3		      lda	#>CaveMan_Down_Odd
      4  f65f		       85 87		      sta	cavemanPtr+1
      5  f661		       a9 20		      lda	#<ColCaveMan_Down_Odd
      6  f663		       85 aa		      sta	cavemanColPtr
      7  f665		       a9 f4		      lda	#>ColCaveMan_Down_Odd
      8  f667		       85 ab		      sta	cavemanColPtr+1
   2110  f669		       4c de fb 	      jmp	GotoScorePrep
   2111  f66c
   2112  f66c				   .evenCavemanDown
      0  f66c					      SET_CAVEMAN_PTRS	CaveMan_Down_Even, ColCaveMan_Down_Even
      1  f66c		       a9 d0		      lda	#<CaveMan_Down_Even
      2  f66e		       85 86		      sta	cavemanPtr
      3  f670		       a9 f3		      lda	#>CaveMan_Down_Even
      4  f672		       85 87		      sta	cavemanPtr+1
      5  f674		       a9 38		      lda	#<ColCaveMan_Down_Even
      6  f676		       85 aa		      sta	cavemanColPtr
      7  f678		       a9 f4		      lda	#>ColCaveMan_Down_Even
      8  f67a		       85 ab		      sta	cavemanColPtr+1
   2114  f67c		       4c de fb 	      jmp	GotoScorePrep
   2115  f67f
   2116  f67f
   2117  f67f
   2118  f67f				   .isCavemanOnLeftColumn
   2119  f67f				  -	      IF	BAD_DIRECTIONS
   2120  f67f				  -	      cmp	#(~LEFT_DIRECTION & DIRECTION_MASK)
   2121  f67f				  -	      bne	.tryMoveRightCaveman
   2122  f67f					      ELSE
   2123  f67f		       ea		      nop		; free byte, just using the NOP to keep new code aligned with old...
   2124  f680		       4a		      lsr
   2125  f681		       b0 4e		      bcs	.tryMoveRightCaveman
   2126  f683					      ENDIF
   2127  f683		       c0 05		      cpy	#COLUMN_INDEX_START+1	; is caveman in column 1 or column 6?
   2128  f685		       b0 0c		      bcs	.checkLeftOfCaveman	; - neither...
   2129  f687		       8a		      txa		; - yes, caveman is in one of them, determine if it is column 6.
   2130  f688		       29 01		      and	#RIGHTSIDE_PF_MASK
   2131  f68a		       d0 03		      bne	.checkColumnFiveCaveman	; - caveman is in column 6, so we will need to check for a stone in column 5
   2132  f68c		       4c de fb 	      jmp	GotoScorePrep	; - column 1
   2133  f68f
   2134  f68f				   .checkColumnFiveCaveman
   2135  f68f		       ca		      dex		; switch index to load left side playfield stones instead
   2136  f690		       a9 09		      lda	#SHIFT_STONE_5 +1	; shift until column five's stone is in the carry, +1 is for handling the very first DEY
   2137  f692		       a8		      tay
   2138  f693				   .checkLeftOfCaveman
   2139  f693		       88		      dey		; decrease by 1 initially, to stop on the stone column to the left of the Caveman
      0  f694					      TEST_STONE_BIT
      1  f694		       b5 92		      lda	stoneOrder,X
      2  f696				   .loopTestStoneBit
      3  f696		       0a		      asl
      4  f697		       88		      dey
      5  f698		       d0 fc		      bne	.loopTestStoneBit
   2141  f69a		       90 03		      bcc	.moveCavemanLeft
   2142  f69c		       4c de fb 	      jmp	GotoScorePrep
   2143  f69f
   2144  f69f				   .moveCavemanLeft
   2145  f69f		       c6 af		      dec	columnCaveman
   2146  f6a1		       a9 00		      lda	#NO_REFLECT
   2147  f6a3		       85 b0		      sta	reflectCaveman
   2148  f6a5		       a5 af		      lda	columnCaveman
   2149  f6a7		       29 01		      and	#ODD_EVEN_PTRS_MASK
   2150  f6a9		       d0 13		      bne	.oddCavemanLeft
      0  f6ab					      SET_CAVEMAN_PTRS	CaveMan_LR_Even, ColCaveMan_LR_Even
      1  f6ab		       a9 a8		      lda	#<CaveMan_LR_Even
      2  f6ad		       85 86		      sta	cavemanPtr
      3  f6af		       a9 f3		      lda	#>CaveMan_LR_Even
      4  f6b1		       85 87		      sta	cavemanPtr+1
      5  f6b3		       a9 10		      lda	#<ColCaveMan_LR_Even
      6  f6b5		       85 aa		      sta	cavemanColPtr
      7  f6b7		       a9 f4		      lda	#>ColCaveMan_LR_Even
      8  f6b9		       85 ab		      sta	cavemanColPtr+1
   2152  f6bb		       4c de fb 	      jmp	GotoScorePrep
   2153  f6be
   2154  f6be				   .oddCavemanLeft
      0  f6be					      SET_CAVEMAN_PTRS	CaveMan_LR_Odd, ColCaveMan_LR_Odd
      1  f6be		       a9 c0		      lda	#<CaveMan_LR_Odd
      2  f6c0		       85 86		      sta	cavemanPtr
      3  f6c2		       a9 f3		      lda	#>CaveMan_LR_Odd
      4  f6c4		       85 87		      sta	cavemanPtr+1
      5  f6c6		       a9 28		      lda	#<ColCaveMan_LR_Odd
      6  f6c8		       85 aa		      sta	cavemanColPtr
      7  f6ca		       a9 f4		      lda	#>ColCaveMan_LR_Odd
      8  f6cc		       85 ab		      sta	cavemanColPtr+1
   2156  f6ce		       4c de fb 	      jmp	GotoScorePrep
   2157  f6d1
   2158  f6d1
   2159  f6d1
   2160  f6d1				   .tryMoveRightCaveman
   2161  f6d1				  -	      IF	BAD_DIRECTIONS
   2162  f6d1				  -	      cmp	#(~RIGHT_DIRECTION & DIRECTION_MASK)
   2163  f6d1				  -	      beq	.isCavemanOnRightColumn
   2164  f6d1					      ELSE
   2165  f6d1		       ea		      nop		; free byte, just using the NOP to keep new code aligned with old...
   2166  f6d2		       4a		      lsr
   2167  f6d3		       90 01		      bcc	.isCavemanOnRightColumn
   2168  f6d5					      ENDIF
   2169  f6d5		       60		      rts
   2170  f6d6
   2171  f6d6				   .isCavemanOnRightColumn
   2172  f6d6		       c0 08		      cpy	#COLUMN_INDEX_END	; is caveman on column 5 or 10?
   2173  f6d8		       90 0c		      bcc	.checkRightOfCaveman	; neither...
   2174  f6da		       8a		      txa		; - yes, was it is column 5 or 10, find out which
   2175  f6db		       29 01		      and	#RIGHTSIDE_PF_MASK
   2176  f6dd		       f0 03		      beq	.checkColumnSixCaveman	; - column 5
   2177  f6df		       4c de fb 	      jmp	GotoScorePrep	; - column 10, caveman is at the right edge, and can't go any further right
   2178  f6e2
   2179  f6e2				   .checkColumnSixCaveman
   2180  f6e2		       e8		      inx		; change index to use right side playfield stones, to look at column 6
   2181  f6e3		       a9 03		      lda	#SHIFT_STONE_6	; get column six's shift value for the routine
   2182  f6e5		       a8		      tay
   2183  f6e6				   .checkRightOfCaveman
   2184  f6e6		       c8		      iny		; increase by 1 initially, to stop on the stone column to the right of the caveman
      0  f6e7					      TEST_STONE_BIT
      1  f6e7		       b5 92		      lda	stoneOrder,X
      2  f6e9				   .loopTestStoneBit
      3  f6e9		       0a		      asl
      4  f6ea		       88		      dey
      5  f6eb		       d0 fc		      bne	.loopTestStoneBit
   2186  f6ed		       90 03		      bcc	.moveCavemanRight
   2187  f6ef		       4c de fb 	      jmp	GotoScorePrep
   2188  f6f2
   2189  f6f2				   .moveCavemanRight
   2190  f6f2		       e6 af		      inc	columnCaveman
   2191  f6f4		       a9 08		      lda	#REFLECT_GFX
   2192  f6f6		       85 b0		      sta	reflectCaveman
   2193  f6f8		       a5 af		      lda	columnCaveman
   2194  f6fa		       29 01		      and	#ODD_EVEN_PTRS_MASK
   2195  f6fc		       d0 13		      bne	.oddCavemanRight
      0  f6fe					      SET_CAVEMAN_PTRS	CaveMan_LR_Even, ColCaveMan_LR_Even
      1  f6fe		       a9 a8		      lda	#<CaveMan_LR_Even
      2  f700		       85 86		      sta	cavemanPtr
      3  f702		       a9 f3		      lda	#>CaveMan_LR_Even
      4  f704		       85 87		      sta	cavemanPtr+1
      5  f706		       a9 10		      lda	#<ColCaveMan_LR_Even
      6  f708		       85 aa		      sta	cavemanColPtr
      7  f70a		       a9 f4		      lda	#>ColCaveMan_LR_Even
      8  f70c		       85 ab		      sta	cavemanColPtr+1
   2197  f70e		       4c de fb 	      jmp	GotoScorePrep
   2198  f711
   2199  f711				   .oddCavemanRight
      0  f711					      SET_CAVEMAN_PTRS	CaveMan_LR_Odd, ColCaveMan_LR_Odd
      1  f711		       a9 c0		      lda	#<CaveMan_LR_Odd
      2  f713		       85 86		      sta	cavemanPtr
      3  f715		       a9 f3		      lda	#>CaveMan_LR_Odd
      4  f717		       85 87		      sta	cavemanPtr+1
      5  f719		       a9 28		      lda	#<ColCaveMan_LR_Odd
      6  f71b		       85 aa		      sta	cavemanColPtr
      7  f71d		       a9 f4		      lda	#>ColCaveMan_LR_Odd
      8  f71f		       85 ab		      sta	cavemanColPtr+1
   2201  f721		       4c de fb 	      jmp	GotoScorePrep
   2202  f724
   2203  f724							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2204  f724
   2205  f724				   CheckWhereDinoCanMove SUBROUTINE		;x1
      0  f724					      EXIT_IF_STONE_SLIDING
      1  f724		       a5 c7		      lda	movingStone
      2  f726		       10 01		      bpl	.contRoutine
      3  f728		       60		      rts
      4  f729				   .contRoutine
   2207  f729		       a5 81		      lda	frameCounter
   2208  f72b		       a6 cf		      ldx	playerNum
   2209  f72d		       35 d6		      and	difficultyP0,X	; HARD_SETTING_MASK allows dinoaur movement to occur twice as fast
      0  f72f					      EXIT_UNLESS_SUBFRAME	DINO_MOVE_CHOICES_SUBFRAME
      1  f72f		       c9 01		      cmp	#DINO_MOVE_CHOICES_SUBFRAME
      2  f731		       f0 01		      beq	.contRoutine
      3  f733		       60		      rts
      4  f734				   .contRoutine
   2211  f734		       a0 04		      ldy	#NUM_OF_DINOSAURS
   2212  f736				   .loopTryToFindAliveDino
   2213  f736		       e6 c6		      inc	dinoMoveIndex
   2214  f738		       a5 c6		      lda	dinoMoveIndex
   2215  f73a		       29 03		      and	#NUM_OF_DINO_MASK	; no more then 4 dinosaurs
   2216  f73c		       aa		      tax
   2217  f73d		       b5 bd		      lda	dinoColors,X
   2218  f73f		       d0 03		      bne	.updateDinoSelection
   2219  f741		       88		      dey
   2220  f742		       d0 f2		      bne	.loopTryToFindAliveDino
   2221  f744
   2222  f744				   .updateDinoSelection
   2223  f744		       86 c6		      stx	dinoMoveIndex	; if no dinosaours are alive, the default is to use the last dino selected by "dinoMoveIndex"
   2224  f746		       20 c9 f7 	      jsr	SeparateDinoRowColumn
   2225  f749		       20 74 f5 	      jsr	BuildDinoStoneIndexes
   2226  f74c		       a9 f0		      lda	#CURRENT_DIR_MASK	; for saving current direction
   2227  f74e		       85 b4		      sta	obstacleFreeDir
   2228  f750		       a6 b2		      ldx	indexStoneByteDino
   2229  f752		       a4 b3		      ldy	stoneBitDinoIsOn
   2230  f754		       e0 02		      cpx	#TOP_ROW_BYTE_INDEX
   2231  f756		       b0 02		      bcs	.checkForStoneAbove	; - if dino is below top row
   2232  f758		       90 10		      bcc	.isDinoOnBottomRow	; always branch, dino is on top row and can't go any higher
   2233  f75a
   2234  f75a				   .checkForStoneAbove
      0  f75a					      MOVE_INDEX_UP_ONE_ROW
      1  f75a		       ca		      dex
      2  f75b		       ca		      dex
      0  f75c					      TEST_STONE_BIT
      1  f75c		       b5 92		      lda	stoneOrder,X
      2  f75e				   .loopTestStoneBit
      3  f75e		       0a		      asl
      4  f75f		       88		      dey
      5  f760		       d0 fc		      bne	.loopTestStoneBit
   2237  f762		       b0 06		      bcs	.isDinoOnBottomRow	; - a stone is directly above, so dino can't go there...
   2238  f764		       a9 f1		      lda	#UP_IS_CLEAR
   2239  f766		       05 b4		      ora	obstacleFreeDir	; - no stone above, so up is possible
   2240  f768		       85 b4		      sta	obstacleFreeDir
   2241  f76a
   2242  f76a				   .isDinoOnBottomRow
   2243  f76a		       a6 b2		      ldx	indexStoneByteDino
   2244  f76c		       a4 b3		      ldy	stoneBitDinoIsOn
   2245  f76e		       e0 0e		      cpx	#BOTTOM_ROW_BYTE_INDEX
   2246  f770		       90 02		      bcc	.checkForStoneBelow	; - if dino is above bottom row
   2247  f772		       b0 10		      bcs	.isDinoOnLeftColumn	; always branch
   2248  f774
   2249  f774				   .checkForStoneBelow
      0  f774					      MOVE_INDEX_DOWN_ONE_ROW
      1  f774		       e8		      inx
      2  f775		       e8		      inx
      0  f776					      TEST_STONE_BIT
      1  f776		       b5 92		      lda	stoneOrder,X
      2  f778				   .loopTestStoneBit
      3  f778		       0a		      asl
      4  f779		       88		      dey
      5  f77a		       d0 fc		      bne	.loopTestStoneBit
   2252  f77c		       b0 06		      bcs	.isDinoOnLeftColumn	; - stone is directly below
   2253  f77e		       a9 f2		      lda	#DOWN_IS_CLEAR
   2254  f780		       05 b4		      ora	obstacleFreeDir	; - no stone below, down direction is possible
   2255  f782		       85 b4		      sta	obstacleFreeDir
   2256  f784
   2257  f784				   .isDinoOnLeftColumn
   2258  f784		       a6 b2		      ldx	indexStoneByteDino
   2259  f786		       a4 b3		      ldy	stoneBitDinoIsOn
   2260  f788		       c0 05		      cpy	#COLUMN_INDEX_START+1	; is dino in column 1 or column 6?
   2261  f78a		       b0 0b		      bcs	.checkForStoneToLeft	; - neither...
   2262  f78c		       8a		      txa		; - yes, dino is in one of them, determine if it is column 6.
   2263  f78d		       29 01		      and	#RIGHTSIDE_PF_MASK	; if it is column 6 (right side of playfield), then "indexStoneByteDino" will be an odd number to index the 2nd byte
   2264  f78f		       d0 02		      bne	.checkStoneColumnFive	; branch, if dino is on column 6
   2265  f791		       f0 13		      beq	.isDinoOnRightColumn	; always branch, dino is in column 1 so no stones can be to left of him.
   2266  f793
   2267  f793				   .checkStoneColumnFive
   2268  f793		       ca		      dex		; switch index to load left side playfield stones instead
   2269  f794		       a9 09		      lda	#SHIFT_STONE_5 +1	; shift until column five's stone is in the carry, +1 is for handling the very first DEY
   2270  f796		       a8		      tay
   2271  f797				   .checkForStoneToLeft
   2272  f797		       88		      dey		; decrease by 1 initially, to stop on the stone column to the left of the dinosaur
      0  f798					      TEST_STONE_BIT
      1  f798		       b5 92		      lda	stoneOrder,X
      2  f79a				   .loopTestStoneBit
      3  f79a		       0a		      asl
      4  f79b		       88		      dey
      5  f79c		       d0 fc		      bne	.loopTestStoneBit
   2274  f79e		       b0 06		      bcs	.isDinoOnRightColumn	; branch if the left direction is not clear
   2275  f7a0		       a9 f4		      lda	#LEFT_IS_CLEAR
   2276  f7a2		       05 b4		      ora	obstacleFreeDir
   2277  f7a4		       85 b4		      sta	obstacleFreeDir
   2278  f7a6
   2279  f7a6				   .isDinoOnRightColumn
   2280  f7a6		       a6 b2		      ldx	indexStoneByteDino
   2281  f7a8		       a4 b3		      ldy	stoneBitDinoIsOn
   2282  f7aa		       c0 08		      cpy	#COLUMN_INDEX_END	; is dino on column 5 or 10?
   2283  f7ac		       90 0b		      bcc	.checkForStoneToRight	; - neither...
   2284  f7ae		       8a		      txa		; - yes, determine if it is column 10.
   2285  f7af		       29 01		      and	#RIGHTSIDE_PF_MASK
   2286  f7b1		       f0 02		      beq	.checkStoneColumnSix	; - branch, if it was column 5
   2287  f7b3		       d0 13		      bne	.finishDinoStoneCheck	; always branch, column 10 is the last column, so we are done here
   2288  f7b5
   2289  f7b5				   .checkStoneColumnSix
   2290  f7b5		       e8		      inx		; change index to use right side playfield stones, to look at column 6
   2291  f7b6		       a9 03		      lda	#SHIFT_STONE_6	; get column six's shift value for the routine
   2292  f7b8		       a8		      tay
   2293  f7b9				   .checkForStoneToRight
   2294  f7b9		       c8		      iny		; increase by 1 initially, to stop on the stone column to the right of the dinosaur
      0  f7ba					      TEST_STONE_BIT
      1  f7ba		       b5 92		      lda	stoneOrder,X
      2  f7bc				   .loopTestStoneBit
      3  f7bc		       0a		      asl
      4  f7bd		       88		      dey
      5  f7be		       d0 fc		      bne	.loopTestStoneBit
   2296  f7c0		       b0 06		      bcs	.finishDinoStoneCheck
   2297  f7c2		       a9 f8		      lda	#RIGHT_IS_CLEAR
   2298  f7c4		       05 b4		      ora	obstacleFreeDir
   2299  f7c6		       85 b4		      sta	obstacleFreeDir
   2300  f7c8
   2301  f7c8				   .finishDinoStoneCheck
   2302  f7c8		       60		      rts
   2303  f7c9
   2304  f7c9							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2305  f7c9
   2306  f7c9				   SeparateDinoRowColumn SUBROUTINE		;x2
   2307  f7c9		       a6 c6		      ldx	dinoMoveIndex
   2308  f7cb		       b5 c2		      lda	dinoPosition,X
   2309  f7cd		       4a		      lsr
   2310  f7ce		       4a		      lsr
   2311  f7cf		       4a		      lsr
   2312  f7d0		       4a		      lsr
   2313  f7d1		       85 b2		      sta	currentDinoRow
   2314  f7d3		       a9 0f		      lda	#DINO_COLUMN_MASK
   2315  f7d5		       35 c2		      and	dinoPosition,X
   2316  f7d7		       85 b3		      sta	currentDinoColumn
   2317  f7d9		       60		      rts
   2318  f7da
   2319  f7da							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2320  f7da
   2321  f7da				   CheckForStoneThrow SUBROUTINE		;x1
   2322  f7da		       a5 81		      lda	frameCounter
   2323  f7dc		       29 0f		      and	#SIXTEEN_FRAME_MASK
      0  f7de					      EXIT_UNLESS_SUBFRAME	CHECK_THROW_SUBFRAME
      1  f7de		       c9 06		      cmp	#CHECK_THROW_SUBFRAME
      2  f7e0		       f0 01		      beq	.contRoutine
      3  f7e2		       60		      rts
      4  f7e3				   .contRoutine
      0  f7e3					      EXIT_IF_STONE_SLIDING
      1  f7e3		       a5 c7		      lda	movingStone
      2  f7e5		       10 01		      bpl	.contRoutine
      3  f7e7		       60		      rts
      4  f7e8				   .contRoutine
   2326  f7e8
   2327  f7e8		       a9 01		      lda	#STONE_CRUSHED_FLAG	; set rock being crushed to powder as a default, if the stone can be moved (and won't be crushed) then this flag will be cleared...
   2328  f7ea		       85 c8		      sta	stoneThrowFlag
   2329  f7ec		       a5 d5		      lda	currentFirebutton	; is firebutton pressed?
   2330  f7ee		       10 05		      bpl	.firebuttonPressed	; - yes
   2331  f7f0		       a9 00		      lda	#0
   2332  f7f2		       85 1a		      sta	AUDV1
   2333  f7f4		       60		      rts
   2334  f7f5
   2335  f7f5				   .firebuttonPressed
   2336  f7f5		       a5 d4		      lda	currentJoystick
   2337  f7f7		       09 f0		      ora	#~DIRECTION_MASK	; fill the unused joystick bits, 7-4, but this is not essential to the routines goal
   2338  f7f9		       c9 ff		      cmp	#JOY_NOT_PRESSED	; is joystick direction pressed?
   2339  f7fb		       d0 05		      bne	.joystickPressed	; - yes, we can check for stones to throw
   2340  f7fd		       a9 00		      lda	#0	; - no
   2341  f7ff		       85 1a		      sta	AUDV1
   2342  f801		       60		      rts
   2343  f802
   2344  f802				   .joystickPressed
   2345  f802		       a0 00		      ldy	#0	; no matter what, the volume gets killed
   2346  f804		       84 1a		      sty	AUDV1
   2347  f806		       84 dd		      sty	pointsMultiplier	; clear multiplier
   2348  f808		       29 7f		      and	#~STONE_MOVING_FLAG	; clear bit 7, but it was useless to have to filled it anyhow!
   2349  f80a		       85 c7		      sta	movingStone
   2350  f80c
   2351  f80c
   2352  f80c				  -	      IF	BAD_DIRECTIONS
   2353  f80c				  -	      cmp	#~(STONE_MOVING_FLAG | UP_DIRECTION)	; we could have skipped the whole OR'ing of the upper nibble, and just checked the direction by itself.
   2354  f80c				  -	      bne	.seeIfStoneCanSlideDown
   2355  f80c				  -	      jmp	TryToSlideUp
   2356  f80c				  -
   2357  f80c				  -.seeIfStoneCanSlideDown
   2358  f80c				  -	      cmp	#~(STONE_MOVING_FLAG | DOWN_DIRECTION)
   2359  f80c				  -	      bne	.seeIfStoneCanSlideLeft
   2360  f80c				  -	      jmp	TryToSlideDown
   2361  f80c				  -
   2362  f80c				  -.seeIfStoneCanSlideLeft
   2363  f80c				  -	      cmp	#~(STONE_MOVING_FLAG | LEFT_DIRECTION)
   2364  f80c				  -	      bne	.defaultTryToSlideStoneRight
   2365  f80c				  -	      jmp	TryToSlideLeft
   2366  f80c				  -			; This routine has a logic error.... it only considers single direction presses as valid.
   2367  f80c				  -			; If two directions are pressed at the same time it will jump to the default of trying to
   2368  f80c				  -			; throw the stone to the right. It doesn't matter which two directions are pressed either!
   2369  f80c				  -.defaultTryToSlideStoneRight
   2370  f80c				  -	      jmp	TryToSlideRight
   2371  f80c				  -
   2372  f80c				  -
   2373  f80c				  -
   2374  f80c					      ELSE		; fixing the logic error for stone throw
   2375  f80c		       ea		      nop		; free byte, just using NOP's to keep new code aligned with old...
   2376  f80d		       4a		      lsr
   2377  f80e		       b0 03		      bcs	.seeIfStoneCanSlideDown
   2378  f810		       4c 24 f8 	      jmp	TryToSlideUp
   2379  f813
   2380  f813				   .seeIfStoneCanSlideDown
   2381  f813		       ea		      nop		; free byte
   2382  f814		       4a		      lsr
   2383  f815		       b0 03		      bcs	.seeIfStoneCanSlideLeft
   2384  f817		       4c 60 f8 	      jmp	TryToSlideDown
   2385  f81a
   2386  f81a				   .seeIfStoneCanSlideLeft
   2387  f81a		       ea		      nop		; free byte
   2388  f81b		       4a		      lsr
   2389  f81c		       b0 03		      bcs	.defaultTryToSlideStoneRight
   2390  f81e		       4c de f8 	      jmp	TryToSlideLeft
   2391  f821
   2392  f821				   .defaultTryToSlideStoneRight
   2393  f821		       4c 9c f8 	      jmp	TryToSlideRight
   2394  f824
   2395  f824					      ENDIF
   2396  f824
   2397  f824
   2398  f824
   2399  f824				   TryToSlideUp
   2400  f824		       a5 84		      lda	rowCaveman
   2401  f826		       c9 01		      cmp	#TOP_ROW
   2402  f828		       d0 01		      bne	.lookForStoneAboveCaveman
   2403  f82a		       60		      rts
   2404  f82b
   2405  f82b				   .lookForStoneAboveCaveman
   2406  f82b		       20 8c f5 	      jsr	BuildCavemanStoneIndexes
      0  f82e					      MOVE_INDEX_UP_ONE_ROW
      1  f82e		       ca		      dex
      2  f82f		       ca		      dex
   2408  f830		       86 b2		      stx	indexStoneByteCaveman
   2409  f832		       84 b3		      sty	stoneBitCavemanIsOn
      0  f834					      TEST_STONE_BIT
      1  f834		       b5 92		      lda	stoneOrder,X
      2  f836				   .loopTestStoneBit
      3  f836		       0a		      asl
      4  f837		       88		      dey
      5  f838		       d0 fc		      bne	.loopTestStoneBit
   2411  f83a		       b0 01		      bcs	.pushStoneUp
   2412  f83c		       60		      rts
   2413  f83d
   2414  f83d				   .pushStoneUp
      0  f83d					      SET_CAVEMAN_PTRS	CaveMan_Push_Up, ColCaveMan_Push_Up
      1  f83d		       a9 e0		      lda	#<CaveMan_Push_Up
      2  f83f		       85 86		      sta	cavemanPtr
      3  f841		       a9 f3		      lda	#>CaveMan_Push_Up
      4  f843		       85 87		      sta	cavemanPtr+1
      5  f845		       a9 48		      lda	#<ColCaveMan_Push_Up
      6  f847		       85 aa		      sta	cavemanColPtr
      7  f849		       a9 f4		      lda	#>ColCaveMan_Push_Up
      8  f84b		       85 ab		      sta	cavemanColPtr+1
      0  f84d					      DO_STONE_THROW
      1  f84d		       a5 c7		      lda	movingStone
      2  f84f		       09 80		      ora	#STONE_MOVING_FLAG
      3  f851		       85 c7		      sta	movingStone
      4  f853		       a9 03		      lda	#TONE_SLIDING_STONE
      5  f855		       85 16		      sta	AUDC1
      6  f857		       a9 07		      lda	#FREQ_SLIDING_STONE
      7  f859		       85 18		      sta	AUDF1
      8  f85b		       a9 0d		      lda	#VOL_SLIDING_STONE
      9  f85d		       85 1a		      sta	AUDV1
   2417  f85f		       60		      rts
   2418  f860
   2419  f860				   TryToSlideDown
   2420  f860		       a5 84		      lda	rowCaveman
   2421  f862		       c9 08		      cmp	#BOTTOM_ROW
   2422  f864		       d0 01		      bne	.lookForStoneBelowCaveman
   2423  f866		       60		      rts
   2424  f867
   2425  f867				   .lookForStoneBelowCaveman
   2426  f867		       20 8c f5 	      jsr	BuildCavemanStoneIndexes
      0  f86a					      MOVE_INDEX_DOWN_ONE_ROW
      1  f86a		       e8		      inx
      2  f86b		       e8		      inx
   2428  f86c		       86 b2		      stx	indexStoneByteCaveman
   2429  f86e		       84 b3		      sty	stoneBitCavemanIsOn
      0  f870					      TEST_STONE_BIT
      1  f870		       b5 92		      lda	stoneOrder,X
      2  f872				   .loopTestStoneBit
      3  f872		       0a		      asl
      4  f873		       88		      dey
      5  f874		       d0 fc		      bne	.loopTestStoneBit
   2431  f876		       b0 01		      bcs	.pushStoneDown
   2432  f878		       60		      rts
   2433  f879
   2434  f879				   .pushStoneDown
      0  f879					      SET_CAVEMAN_PTRS	CaveMan_Push_Down, ColCaveMan_Push_Down
      1  f879		       a9 e8		      lda	#<CaveMan_Push_Down
      2  f87b		       85 86		      sta	cavemanPtr
      3  f87d		       a9 f3		      lda	#>CaveMan_Push_Down
      4  f87f		       85 87		      sta	cavemanPtr+1
      5  f881		       a9 50		      lda	#<ColCaveMan_Push_Down
      6  f883		       85 aa		      sta	cavemanColPtr
      7  f885		       a9 f4		      lda	#>ColCaveMan_Push_Down
      8  f887		       85 ab		      sta	cavemanColPtr+1
      0  f889					      DO_STONE_THROW
      1  f889		       a5 c7		      lda	movingStone
      2  f88b		       09 80		      ora	#STONE_MOVING_FLAG
      3  f88d		       85 c7		      sta	movingStone
      4  f88f		       a9 03		      lda	#TONE_SLIDING_STONE
      5  f891		       85 16		      sta	AUDC1
      6  f893		       a9 07		      lda	#FREQ_SLIDING_STONE
      7  f895		       85 18		      sta	AUDF1
      8  f897		       a9 0d		      lda	#VOL_SLIDING_STONE
      9  f899		       85 1a		      sta	AUDV1
   2437  f89b		       60		      rts
   2438  f89c
   2439  f89c				   TryToSlideRight
   2440  f89c		       a5 af		      lda	columnCaveman
   2441  f89e		       c9 0a		      cmp	#RIGHTMOST_COLUMN
   2442  f8a0		       d0 01		      bne	.lookForStoneToRightOfCaveman
   2443  f8a2		       60		      rts
   2444  f8a3
   2445  f8a3				   .lookForStoneToRightOfCaveman
   2446  f8a3		       e6 af		      inc	columnCaveman	; temporarily increase, to build correct indexes
   2447  f8a5		       20 8c f5 	      jsr	BuildCavemanStoneIndexes
   2448  f8a8		       c6 af		      dec	columnCaveman	; restore the column
   2449  f8aa		       86 b2		      stx	indexStoneByteCaveman
   2450  f8ac		       84 b3		      sty	stoneBitCavemanIsOn
      0  f8ae					      TEST_STONE_BIT
      1  f8ae		       b5 92		      lda	stoneOrder,X
      2  f8b0				   .loopTestStoneBit
      3  f8b0		       0a		      asl
      4  f8b1		       88		      dey
      5  f8b2		       d0 fc		      bne	.loopTestStoneBit
   2452  f8b4		       b0 01		      bcs	.pushStoneRight
   2453  f8b6		       60		      rts
   2454  f8b7
   2455  f8b7				   .pushStoneRight
      0  f8b7					      SET_CAVEMAN_PTRS	CaveMan_Push_LR, ColCaveMan_Push_LR
      1  f8b7		       a9 d8		      lda	#<CaveMan_Push_LR
      2  f8b9		       85 86		      sta	cavemanPtr
      3  f8bb		       a9 f3		      lda	#>CaveMan_Push_LR
      4  f8bd		       85 87		      sta	cavemanPtr+1
      5  f8bf		       a9 40		      lda	#<ColCaveMan_Push_LR
      6  f8c1		       85 aa		      sta	cavemanColPtr
      7  f8c3		       a9 f4		      lda	#>ColCaveMan_Push_LR
      8  f8c5		       85 ab		      sta	cavemanColPtr+1
   2457  f8c7		       a9 08		      lda	#REFLECT_GFX
   2458  f8c9		       85 b0		      sta	reflectCaveman
      0  f8cb					      DO_STONE_THROW
      1  f8cb		       a5 c7		      lda	movingStone
      2  f8cd		       09 80		      ora	#STONE_MOVING_FLAG
      3  f8cf		       85 c7		      sta	movingStone
      4  f8d1		       a9 03		      lda	#TONE_SLIDING_STONE
      5  f8d3		       85 16		      sta	AUDC1
      6  f8d5		       a9 07		      lda	#FREQ_SLIDING_STONE
      7  f8d7		       85 18		      sta	AUDF1
      8  f8d9		       a9 0d		      lda	#VOL_SLIDING_STONE
      9  f8db		       85 1a		      sta	AUDV1
   2460  f8dd		       60		      rts
   2461  f8de
   2462  f8de				   TryToSlideLeft
   2463  f8de		       a5 af		      lda	columnCaveman
   2464  f8e0		       c9 01		      cmp	#LEFTMOST_COLUMN
   2465  f8e2		       d0 01		      bne	.lookForStoneToLeftOfCaveman
   2466  f8e4		       60		      rts
   2467  f8e5
   2468  f8e5				   .lookForStoneToLeftOfCaveman
   2469  f8e5		       c6 af		      dec	columnCaveman	; temporarily decrease, to build correct indexes
   2470  f8e7		       20 8c f5 	      jsr	BuildCavemanStoneIndexes
   2471  f8ea		       e6 af		      inc	columnCaveman	; restore the column
   2472  f8ec		       86 b2		      stx	indexStoneByteCaveman
   2473  f8ee		       84 b3		      sty	stoneBitCavemanIsOn
      0  f8f0					      TEST_STONE_BIT
      1  f8f0		       b5 92		      lda	stoneOrder,X
      2  f8f2				   .loopTestStoneBit
      3  f8f2		       0a		      asl
      4  f8f3		       88		      dey
      5  f8f4		       d0 fc		      bne	.loopTestStoneBit
   2475  f8f6		       b0 01		      bcs	.pushStoneLeft
   2476  f8f8		       60		      rts
   2477  f8f9
   2478  f8f9				   .pushStoneLeft
      0  f8f9					      SET_CAVEMAN_PTRS	CaveMan_Push_LR, ColCaveMan_Push_LR
      1  f8f9		       a9 d8		      lda	#<CaveMan_Push_LR
      2  f8fb		       85 86		      sta	cavemanPtr
      3  f8fd		       a9 f3		      lda	#>CaveMan_Push_LR
      4  f8ff		       85 87		      sta	cavemanPtr+1
      5  f901		       a9 40		      lda	#<ColCaveMan_Push_LR
      6  f903		       85 aa		      sta	cavemanColPtr
      7  f905		       a9 f4		      lda	#>ColCaveMan_Push_LR
      8  f907		       85 ab		      sta	cavemanColPtr+1
   2480  f909		       a9 00		      lda	#NO_REFLECT
   2481  f90b		       85 b0		      sta	reflectCaveman
      0  f90d					      DO_STONE_THROW
      1  f90d		       a5 c7		      lda	movingStone
      2  f90f		       09 80		      ora	#STONE_MOVING_FLAG
      3  f911		       85 c7		      sta	movingStone
      4  f913		       a9 03		      lda	#TONE_SLIDING_STONE
      5  f915		       85 16		      sta	AUDC1
      6  f917		       a9 07		      lda	#FREQ_SLIDING_STONE
      7  f919		       85 18		      sta	AUDF1
      8  f91b		       a9 0d		      lda	#VOL_SLIDING_STONE
      9  f91d		       85 1a		      sta	AUDV1
   2483  f91f		       60		      rts
   2484  f920
   2485  f920							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2486  f920
   2487  f920				   UpdateStones SUBROUTINE		;x1
   2488  f920		       a5 81		      lda	frameCounter
   2489  f922		       29 07		      and	#EIGHT_FRAME_MASK
      0  f924					      EXIT_UNLESS_SUBFRAME	STONE_UPDATE_SUBFRAME
      1  f924		       c9 06		      cmp	#STONE_UPDATE_SUBFRAME
      2  f926		       f0 01		      beq	.contRoutine
      3  f928		       60		      rts
      4  f929				   .contRoutine
      0  f929					      CONTINUE_IF_STONE_SLIDING
      1  f929		       a5 c7		      lda	movingStone
      2  f92b		       30 01		      bmi	.contRoutine
      3  f92d		       60		      rts
      4  f92e				   .contRoutine
   2492  f92e
   2493  f92e		       a0 07		      ldy	#FREQ_STONE_SLIDING
   2494  f930		       84 18		      sty	AUDF1
   2495  f932
   2496  f932
   2497  f932
   2498  f932				  -	      IF	BAD_DIRECTIONS
   2499  f932				  -	      cmp	#STONE_UP_DIR
   2500  f932				  -	      bne	.isStoneMovingDown
   2501  f932				  -	      jmp	.tryMoveStoneUp
   2502  f932				  -
   2503  f932				  -.isStoneMovingDown
   2504  f932				  -	      cmp	#STONE_DOWN_DIR
   2505  f932				  -	      bne	.isStoneMovingLeft
   2506  f932				  -	      jmp	.tryMoveStoneDown
   2507  f932				  -
   2508  f932				  -.isStoneMovingLeft
   2509  f932				  -	      cmp	#STONE_LEFT_DIR
   2510  f932				  -	      bne	stoneIsMovingRight
   2511  f932				  -	      jmp	.tryMoveStoneLeft
   2512  f932				  -
   2513  f932				  -stoneIsMovingRight
   2514  f932				  -	      jmp	.tryMoveStoneRight
   2515  f932				  -
   2516  f932				  -
   2517  f932					      ELSE		; fixing the logic error for stone throw
   2518  f932		       ea		      nop		; free byte, just using NOP's to keep new code aligned with old...
   2519  f933		       4a		      lsr
   2520  f934		       b0 03		      bcs	.isStoneMovingDown
   2521  f936		       4c 4a f9 	      jmp	.tryMoveStoneUp
   2522  f939
   2523  f939				   .isStoneMovingDown
   2524  f939		       ea		      nop		; free byte
   2525  f93a		       4a		      lsr
   2526  f93b		       b0 03		      bcs	.isStoneMovingLeft
   2527  f93d		       4c 84 f9 	      jmp	.tryMoveStoneDown
   2528  f940
   2529  f940				   .isStoneMovingLeft
   2530  f940		       ea		      nop		; free byte
   2531  f941		       4a		      lsr
   2532  f942		       b0 03		      bcs	stoneIsMovingRight
   2533  f944		       4c be f9 	      jmp	.tryMoveStoneLeft
   2534  f947
   2535  f947				   stoneIsMovingRight
   2536  f947		       4c 0f fa 	      jmp	.tryMoveStoneRight
   2537  f94a
   2538  f94a					      ENDIF
   2539  f94a
   2540  f94a
   2541  f94a				   .tryMoveStoneUp
   2542  f94a		       a6 b2		      ldx	indexStoneByteThrow
   2543  f94c		       a4 b3		      ldy	stoneColumnThrowIsOn
   2544  f94e		       e0 02		      cpx	#TOP_ROW_BYTE_INDEX
   2545  f950		       b0 03		      bcs	.checkStoneUp
   2546  f952		       4c 60 fa 	      jmp	StoneCanNoLongerMove
   2547  f955
   2548  f955				   .checkStoneUp
      0  f955					      MOVE_INDEX_UP_ONE_ROW
      1  f955		       ca		      dex
      2  f956		       ca		      dex
      0  f957					      TEST_STONE_BIT
      1  f957		       b5 92		      lda	stoneOrder,X
      2  f959				   .loopTestStoneBit
      3  f959		       0a		      asl
      4  f95a		       88		      dey
      5  f95b		       d0 fc		      bne	.loopTestStoneBit
   2551  f95d		       90 03		      bcc	.moveStoneUp
   2552  f95f		       4c 60 fa 	      jmp	StoneCanNoLongerMove
   2553  f962
   2554  f962				   .moveStoneUp
   2555  f962		       a6 b2		      ldx	indexStoneByteThrow
   2556  f964		       a4 b3		      ldy	stoneColumnThrowIsOn
      0  f966					      GET_STONE_BIT_POSITION
      1  f966		       a9 80		      lda	#ONE_STONE
      2  f968		       88		      dey
      3  f969				   .loopFindStone
      4  f969		       4a		      lsr
      5  f96a		       88		      dey
      6  f96b		       d0 fc		      bne	.loopFindStone
   2558  f96d		       85 ad		      sta	t1_singleStone
      0  f96f					      REMOVE_STONE
      1  f96f		       49 ff		      eor	#$FF
      2  f971		       35 92		      and	stoneOrder,X
      3  f973		       95 92		      sta	stoneOrder,X
      0  f975					      MOVE_INDEX_UP_ONE_ROW
      1  f975		       ca		      dex
      2  f976		       ca		      dex
   2561  f977		       86 b2		      stx	indexStoneByteThrow
   2562  f979		       a5 ad		      lda	t1_singleStone
      0  f97b					      ADD_STONE
      1  f97b		       15 92		      ora	stoneOrder,X
      2  f97d		       95 92		      sta	stoneOrder,X
   2564  f97f		       a9 00		      lda	#STONE_NOT_CRUSHED_FLAG
   2565  f981		       85 c8		      sta	stoneThrowFlag
   2566  f983		       60		      rts
   2567  f984
   2568  f984
   2569  f984				   .tryMoveStoneDown
   2570  f984		       a6 b2		      ldx	indexStoneByteThrow
   2571  f986		       a4 b3		      ldy	stoneColumnThrowIsOn
   2572  f988		       e0 0e		      cpx	#BOTTOM_ROW_BYTE_INDEX
   2573  f98a		       90 03		      bcc	.checkStoneBelow
   2574  f98c		       4c 60 fa 	      jmp	StoneCanNoLongerMove
   2575  f98f
   2576  f98f				   .checkStoneBelow
      0  f98f					      MOVE_INDEX_DOWN_ONE_ROW
      1  f98f		       e8		      inx
      2  f990		       e8		      inx
      0  f991					      TEST_STONE_BIT
      1  f991		       b5 92		      lda	stoneOrder,X
      2  f993				   .loopTestStoneBit
      3  f993		       0a		      asl
      4  f994		       88		      dey
      5  f995		       d0 fc		      bne	.loopTestStoneBit
   2579  f997		       90 03		      bcc	.moveStoneDown
   2580  f999		       4c 60 fa 	      jmp	StoneCanNoLongerMove
   2581  f99c
   2582  f99c				   .moveStoneDown
   2583  f99c		       a6 b2		      ldx	indexStoneByteThrow
   2584  f99e		       a4 b3		      ldy	stoneColumnThrowIsOn
      0  f9a0					      GET_STONE_BIT_POSITION
      1  f9a0		       a9 80		      lda	#ONE_STONE
      2  f9a2		       88		      dey
      3  f9a3				   .loopFindStone
      4  f9a3		       4a		      lsr
      5  f9a4		       88		      dey
      6  f9a5		       d0 fc		      bne	.loopFindStone
   2586  f9a7		       85 ad		      sta	t1_singleStone
      0  f9a9					      REMOVE_STONE
      1  f9a9		       49 ff		      eor	#$FF
      2  f9ab		       35 92		      and	stoneOrder,X
      3  f9ad		       95 92		      sta	stoneOrder,X
      0  f9af					      MOVE_INDEX_DOWN_ONE_ROW
      1  f9af		       e8		      inx
      2  f9b0		       e8		      inx
   2589  f9b1		       86 b2		      stx	indexStoneByteThrow
   2590  f9b3		       a5 ad		      lda	t1_singleStone
      0  f9b5					      ADD_STONE
      1  f9b5		       15 92		      ora	stoneOrder,X
      2  f9b7		       95 92		      sta	stoneOrder,X
   2592  f9b9		       a9 00		      lda	#STONE_NOT_CRUSHED_FLAG
   2593  f9bb		       85 c8		      sta	stoneThrowFlag
   2594  f9bd		       60		      rts
   2595  f9be
   2596  f9be
   2597  f9be				   .tryMoveStoneLeft
   2598  f9be		       a6 b2		      ldx	indexStoneByteThrow
   2599  f9c0		       a4 b3		      ldy	stoneColumnThrowIsOn
   2600  f9c2		       c0 04		      cpy	#COLUMN_INDEX_START	; is the stone to be moved in column 1 or 6?
   2601  f9c4		       d0 0c		      bne	.lookStoneToLeft	; - neither...
   2602  f9c6		       a5 b2		      lda	indexStoneByteThrow	; - yes, but is it column 6?
   2603  f9c8		       29 01		      and	#RIGHTSIDE_PF_MASK
   2604  f9ca		       d0 03		      bne	.lookAtStoneColumnFive	; - branch, if it is column 6.
   2605  f9cc		       4c 60 fa 	      jmp	StoneCanNoLongerMove	; - column 1, so we can't go any farther left
   2606  f9cf
   2607  f9cf				   .lookAtStoneColumnFive
   2608  f9cf		       ca		      dex		; switch index to load left side playfield stones instead
   2609  f9d0		       a0 09		      ldy	#SHIFT_STONE_5 +1	; shift until column five's stone is in the carry, +1 is for handling the very first DEY
   2610  f9d2				   .lookStoneToLeft
   2611  f9d2		       88		      dey		; decrease by 1 initially, to stop on the stone column to the left of the stone to be moved
      0  f9d3					      TEST_STONE_BIT
      1  f9d3		       b5 92		      lda	stoneOrder,X
      2  f9d5				   .loopTestStoneBit
      3  f9d5		       0a		      asl
      4  f9d6		       88		      dey
      5  f9d7		       d0 fc		      bne	.loopTestStoneBit
   2613  f9d9		       90 03		      bcc	.moveStoneLeft
   2614  f9db		       4c 60 fa 	      jmp	StoneCanNoLongerMove
   2615  f9de
   2616  f9de				   .moveStoneLeft
   2617  f9de		       a6 b2		      ldx	indexStoneByteThrow
   2618  f9e0		       a4 b3		      ldy	stoneColumnThrowIsOn
      0  f9e2					      GET_STONE_BIT_POSITION
      1  f9e2		       a9 80		      lda	#ONE_STONE
      2  f9e4		       88		      dey
      3  f9e5				   .loopFindStone
      4  f9e5		       4a		      lsr
      5  f9e6		       88		      dey
      6  f9e7		       d0 fc		      bne	.loopFindStone
      0  f9e9					      REMOVE_STONE
      1  f9e9		       49 ff		      eor	#$FF
      2  f9eb		       35 92		      and	stoneOrder,X
      3  f9ed		       95 92		      sta	stoneOrder,X
   2621  f9ef
   2622  f9ef		       a4 b3		      ldy	stoneColumnThrowIsOn	; doing the same logic as before, except we know that we are not in column 1,
   2623  f9f1		       a6 b2		      ldx	indexStoneByteThrow	; and now we are actually moving the stone
   2624  f9f3		       c0 04		      cpy	#COLUMN_INDEX_START
   2625  f9f5		       d0 05		      bne	.notOnColumn6
   2626  f9f7		       ca		      dex
   2627  f9f8		       86 b2		      stx	indexStoneByteThrow
   2628  f9fa		       a0 09		      ldy	#SHIFT_STONE_5 +1
   2629  f9fc				   .notOnColumn6
   2630  f9fc		       88		      dey
   2631  f9fd		       84 b3		      sty	stoneColumnThrowIsOn
      0  f9ff					      GET_STONE_BIT_POSITION
      1  f9ff		       a9 80		      lda	#ONE_STONE
      2  fa01		       88		      dey
      3  fa02				   .loopFindStone
      4  fa02		       4a		      lsr
      5  fa03		       88		      dey
      6  fa04		       d0 fc		      bne	.loopFindStone
      0  fa06					      ADD_STONE
      1  fa06		       15 92		      ora	stoneOrder,X
      2  fa08		       95 92		      sta	stoneOrder,X
   2634  fa0a		       a9 00		      lda	#STONE_NOT_CRUSHED_FLAG
   2635  fa0c		       85 c8		      sta	stoneThrowFlag
   2636  fa0e		       60		      rts
   2637  fa0f
   2638  fa0f				   .tryMoveStoneRight
   2639  fa0f		       a6 b2		      ldx	indexStoneByteThrow
   2640  fa11		       a4 b3		      ldy	stoneColumnThrowIsOn
   2641  fa13		       c0 08		      cpy	#COLUMN_INDEX_END	; is stone in column 5 or 10?
   2642  fa15		       d0 0c		      bne	.lookStoneToRight	; - neither...
   2643  fa17		       a5 b2		      lda	indexStoneByteThrow	; - yes, determine if it is column 10.
   2644  fa19		       29 01		      and	#RIGHTSIDE_PF_MASK
   2645  fa1b		       f0 03		      beq	.lookAtStoneColumnSix	; - branch, if it was column 5
   2646  fa1d		       4c 60 fa 	      jmp	StoneCanNoLongerMove	; column 10 is the last column, so we are done here...
   2647  fa20
   2648  fa20				   .lookAtStoneColumnSix
   2649  fa20		       e8		      inx		; change index to use right side playfield stones, to look at column 6
   2650  fa21		       a0 03		      ldy	#SHIFT_STONE_6	; get column six's shift value for the routine
   2651  fa23				   .lookStoneToRight
   2652  fa23		       c8		      iny		; increase by 1 initially, to stop on the stone column to the right of the stone to be moved
      0  fa24					      TEST_STONE_BIT
      1  fa24		       b5 92		      lda	stoneOrder,X
      2  fa26				   .loopTestStoneBit
      3  fa26		       0a		      asl
      4  fa27		       88		      dey
      5  fa28		       d0 fc		      bne	.loopTestStoneBit
   2654  fa2a		       90 03		      bcc	.moveStoneRight
   2655  fa2c		       4c 60 fa 	      jmp	StoneCanNoLongerMove
   2656  fa2f
   2657  fa2f				   .moveStoneRight
   2658  fa2f		       a6 b2		      ldx	indexStoneByteThrow
   2659  fa31		       a4 b3		      ldy	stoneColumnThrowIsOn
      0  fa33					      GET_STONE_BIT_POSITION
      1  fa33		       a9 80		      lda	#ONE_STONE
      2  fa35		       88		      dey
      3  fa36				   .loopFindStone
      4  fa36		       4a		      lsr
      5  fa37		       88		      dey
      6  fa38		       d0 fc		      bne	.loopFindStone
      0  fa3a					      REMOVE_STONE
      1  fa3a		       49 ff		      eor	#$FF
      2  fa3c		       35 92		      and	stoneOrder,X
      3  fa3e		       95 92		      sta	stoneOrder,X
   2662  fa40
   2663  fa40		       a4 b3		      ldy	stoneColumnThrowIsOn	; doing the similar logic as before, and now actually updating stone
   2664  fa42		       a6 b2		      ldx	indexStoneByteThrow
   2665  fa44		       c0 08		      cpy	#COLUMN_INDEX_END
   2666  fa46		       d0 05		      bne	.notOnColumn5
   2667  fa48		       e8		      inx
   2668  fa49		       86 b2		      stx	indexStoneByteThrow
   2669  fa4b		       a0 03		      ldy	#SHIFT_STONE_6
   2670  fa4d				   .notOnColumn5
   2671  fa4d		       c8		      iny
   2672  fa4e		       84 b3		      sty	stoneColumnThrowIsOn
      0  fa50					      GET_STONE_BIT_POSITION
      1  fa50		       a9 80		      lda	#ONE_STONE
      2  fa52		       88		      dey
      3  fa53				   .loopFindStone
      4  fa53		       4a		      lsr
      5  fa54		       88		      dey
      6  fa55		       d0 fc		      bne	.loopFindStone
      0  fa57					      ADD_STONE
      1  fa57		       15 92		      ora	stoneOrder,X
      2  fa59		       95 92		      sta	stoneOrder,X
   2675  fa5b		       a9 00		      lda	#STONE_NOT_CRUSHED_FLAG
   2676  fa5d		       85 c8		      sta	stoneThrowFlag
   2677  fa5f		       60		      rts
   2678  fa60
   2679  fa60
   2680  fa60				   StoneCanNoLongerMove
   2681  fa60		       a5 c8		      lda	stoneThrowFlag	; - has stone been crushed to powder?
   2682  fa62		       f0 26		      beq	.stopStoneAudio	; - no
   2683  fa64		       a5 81		      lda	frameCounter	; - yes!
   2684  fa66		       29 1f		      and	#CRUSHED_STONE_MASK
   2685  fa68		       c9 06		      cmp	#CRUSHED_STONE_SUBFRAME
   2686  fa6a		       d0 1e		      bne	.stopStoneAudio
   2687  fa6c		       a6 b2		      ldx	indexStoneByteThrow
   2688  fa6e		       a4 b3		      ldy	stoneColumnThrowIsOn
      0  fa70					      GET_STONE_BIT_POSITION
      1  fa70		       a9 80		      lda	#ONE_STONE
      2  fa72		       88		      dey
      3  fa73				   .loopFindStone
      4  fa73		       4a		      lsr
      5  fa74		       88		      dey
      6  fa75		       d0 fc		      bne	.loopFindStone
      0  fa77					      REMOVE_STONE
      1  fa77		       49 ff		      eor	#$FF
      2  fa79		       35 92		      and	stoneOrder,X
      3  fa7b		       95 92		      sta	stoneOrder,X
   2691  fa7d		       20 10 fb 	      jsr	AddCrushedRockPoints
   2692  fa80		       a9 05		      lda	#FREQ_CRUSHED_STONE
   2693  fa82		       85 18		      sta	AUDF1
   2694  fa84		       a9 0b		      lda	#VOL_CRUSHED_STONE
   2695  fa86		       85 1a		      sta	AUDV1
   2696  fa88		       d0 04		      bne	.updateStoneFlag	; always branch
   2697  fa8a
   2698  fa8a				   .stopStoneAudio
   2699  fa8a		       a9 00		      lda	#0	; kill special event audio
   2700  fa8c		       85 1a		      sta	AUDV1
   2701  fa8e				   .updateStoneFlag
   2702  fa8e		       a9 00		      lda	#STONE_NOT_SLIDING_FLAG	; this flag is useless!
   2703  fa90		       85 c7		      sta	movingStone
   2704  fa92		       60		      rts
   2705  fa93
   2706  fa93							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2707  fa93
   2708  fa93				   AddSquishedDinoScore SUBROUTINE		;x1
   2709  fa93		       a5 81		      lda	frameCounter
   2710  fa95		       29 07		      and	#EIGHT_FRAME_MASK
      0  fa97					      EXIT_UNLESS_SUBFRAME	DINO_POINTS_SUBFRAME
      1  fa97		       c9 07		      cmp	#DINO_POINTS_SUBFRAME
      2  fa99		       f0 01		      beq	.contRoutine
      3  fa9b		       60		      rts
      4  fa9c				   .contRoutine
      0  fa9c					      CONTINUE_IF_STONE_SLIDING
      1  fa9c		       a5 c7		      lda	movingStone
      2  fa9e		       30 01		      bmi	.contRoutine
      3  faa0		       60		      rts
      4  faa1				   .contRoutine
   2713  faa1
   2714  faa1		       a2 03		      ldx	#NUM_OF_DINOSAURS-1
   2715  faa3				   .loopIsDinoSquished
   2716  faa3		       b5 bd		      lda	dinoColors,X
   2717  faa5		       f0 3b		      beq	.tryNextDino	; this dinosaur was already eliminated..
   2718  faa7
   2719  faa7							;is dinosaur in the same column as the thrown stone?
   2720  faa7		       b5 c2		      lda	dinoPosition,X
   2721  faa9		       29 0f		      and	#DINO_COLUMN_MASK
   2722  faab		       85 ad		      sta	t1_dinoColumn
   2723  faad		       a5 b2		      lda	indexStoneByteThrow
   2724  faaf		       4a		      lsr		; right or left PF stone byte
   2725  fab0		       b0 04		      bcs	.useRightByte	; - use right
   2726  fab2		       a9 00		      lda	#0	; - use left
   2727  fab4		       f0 02		      beq	.useLeftByte	; always branch
   2728  fab6
   2729  fab6				   .useRightByte
   2730  fab6		       a9 05		      lda	#(NUM_OF_COLUMNS/2)	; offset to reach the right playfield
   2731  fab8				   .useLeftByte
   2732  fab8		       18		      clc
   2733  fab9		       65 b3		      adc	stoneColumnThrowIsOn
   2734  fabb		       38		      sec
   2735  fabc		       e9 03		      sbc	#SHIFT_UNUSED_BITS
   2736  fabe		       c5 ad		      cmp	t1_dinoColumn
   2737  fac0		       d0 20		      bne	.tryNextDino	; dinosaur is not in the column of the thrown stone...
   2738  fac2
   2739  fac2							;is dinosaur in the same row as the thrown stone?
   2740  fac2		       b5 c2		      lda	dinoPosition,X
   2741  fac4		       4a		      lsr
   2742  fac5		       4a		      lsr
   2743  fac6		       4a		      lsr
   2744  fac7		       4a		      lsr
   2745  fac8		       85 ad		      sta	t1_dinoRow
   2746  faca		       c6 ad		      dec	t1_dinoRow
   2747  facc		       a5 b2		      lda	indexStoneByteThrow
   2748  face		       4a		      lsr
   2749  facf		       c5 ad		      cmp	t1_dinoRow
   2750  fad1		       d0 0f		      bne	.tryNextDino
   2751  fad3
   2752  fad3							;dinosaur has been squashed by the stone!
   2753  fad3		       a9 00		      lda	#DEAD_DINOSAUR_FLAG	; a color of 0 (for BEQ/BNE) marks a dead dinosaur
   2754  fad5		       95 bd		      sta	dinoColors,X
   2755  fad7		       a9 01		      lda	#DEAD_DINO_POS	; set row to zero, column to 1
   2756  fad9		       95 c2		      sta	dinoPosition,X
   2757  fadb		       a9 01		      lda	#FREQ_DEAD_DINO
   2758  fadd		       85 18		      sta	AUDF1
   2759  fadf		       20 e6 fa 	      jsr	AddDinoKillPoints
   2760  fae2				   .tryNextDino
   2761  fae2		       ca		      dex		; move to next dinosaur
   2762  fae3		       10 be		      bpl	.loopIsDinoSquished
   2763  fae5		       60		      rts
   2764  fae6
   2765  fae6							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2766  fae6
   2767  fae6				   AddDinoKillPoints SUBROUTINE		;x1
   2768  fae6		       f8		      sed
   2769  fae7		       18		      clc
   2770  fae8		       a4 cf		      ldy	playerNum
   2771  faea		       b9 c9 00 	      lda.wy	scoreBcdLow,Y
   2772  faed		       a4 dd		      ldy	pointsMultiplier
   2773  faef		       79 08 fb 	      adc	PointsTabLow,Y
   2774  faf2		       a4 cf		      ldy	playerNum
   2775  faf4		       99 c9 00 	      sta.wy	scoreBcdLow,Y
   2776  faf7		       b9 cb 00 	      lda.wy	scoreBcdMid,Y
   2777  fafa		       a4 dd		      ldy	pointsMultiplier
   2778  fafc		       79 0c fb 	      adc	PointsTabHigh,Y
   2779  faff		       a4 cf		      ldy	playerNum
   2780  fb01		       99 cb 00 	      sta.wy	scoreBcdMid,Y
   2781  fb04		       d8		      cld
   2782  fb05		       e6 dd		      inc	pointsMultiplier
   2783  fb07		       60		      rts
   2784  fb08
   2785  fb08							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2786  fb08							;  10 --> 40 --> 160 --> 640
   2787  fb08							;  4x more points each time
   2788  fb08
   2789  fb08				   PointsTabLow
   2790  fb08		       10 40 60 40	      .byte.b	$10,$40,$60,$40
   2791  fb0c				   PointsTabHigh
   2792  fb0c		       00 00 01 06	      .byte.b	$00,$00,$01,$06
   2793  fb10
   2794  fb10							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2795  fb10
   2796  fb10				   AddCrushedRockPoints SUBROUTINE		;x1
   2797  fb10		       f8		      sed
   2798  fb11		       18		      clc
   2799  fb12		       a4 cf		      ldy	playerNum
   2800  fb14		       b9 c9 00 	      lda.wy	scoreBcdLow,Y
   2801  fb17		       69 01		      adc	#CRUSHED_ROCK_POINTS	; 1's digit is hardcoded to zero, so just update the 10's value digit.
   2802  fb19		       99 c9 00 	      sta.wy	scoreBcdLow,Y
   2803  fb1c		       b9 cb 00 	      lda.wy	scoreBcdMid,Y
   2804  fb1f		       69 00		      adc	#0	; handled overflow
   2805  fb21		       99 cb 00 	      sta.wy	scoreBcdMid,Y
   2806  fb24		       d8		      cld
   2807  fb25		       60		      rts
   2808  fb26
   2809  fb26							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2810  fb26
   2811  fb26				   GetScorePtrs SUBROUTINE		;x1
   2812  fb26		       a5 81		      lda	frameCounter
   2813  fb28		       29 07		      and	#EIGHT_FRAME_MASK
      0  fb2a					      EXIT_UNLESS_SUBFRAME	SCORE_UPDATE_SUBFRAME
      1  fb2a		       c9 07		      cmp	#SCORE_UPDATE_SUBFRAME
      2  fb2c		       f0 01		      beq	.contRoutine
      3  fb2e		       60		      rts
      4  fb2f				   .contRoutine
   2815  fb2f
   2816  fb2f		       a4 cf		      ldy	playerNum
   2817  fb31		       b9 c9 00 	      lda.wy	scoreBcdLow,Y
   2818  fb34		       29 0f		      and	#$0F
   2819  fb36		       0a		      asl
   2820  fb37		       0a		      asl
   2821  fb38		       0a		      asl
   2822  fb39		       69 94		      adc	#<Zero
   2823  fb3b		       85 90		      sta	scorePtrs+6
   2824  fb3d		       b9 c9 00 	      lda.wy	scoreBcdLow,Y
   2825  fb40		       29 f0		      and	#$F0
   2826  fb42		       4a		      lsr
   2827  fb43		       69 94		      adc	#<Zero
   2828  fb45		       85 8e		      sta	scorePtrs+4
   2829  fb47
   2830  fb47		       b9 cb 00 	      lda.wy	scoreBcdMid,Y
   2831  fb4a		       29 0f		      and	#$0F
   2832  fb4c		       0a		      asl
   2833  fb4d		       0a		      asl
   2834  fb4e		       0a		      asl
   2835  fb4f		       69 94		      adc	#<Zero
   2836  fb51		       85 8c		      sta	scorePtrs+2
   2837  fb53		       b9 cb 00 	      lda.wy	scoreBcdMid,Y
   2838  fb56		       29 f0		      and	#$F0
   2839  fb58		       4a		      lsr
   2840  fb59		       69 94		      adc	#<Zero
   2841  fb5b		       85 8a		      sta	scorePtrs
   2842  fb5d
   2843  fb5d		       60		      rts
   2844  fb5e
   2845  fb5e							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2846  fb5e
   2847  fb5e				   CheckIfLevelDone SUBROUTINE		;x1
   2848  fb5e		       a5 d0		      lda	startTuneCount
   2849  fb60		       d0 39		      bne	.contStartTune	; if starting tune is playing, don't stop!
   2850  fb62		       a5 81		      lda	frameCounter
   2851  fb64		       29 07		      and	#EIGHT_FRAME_MASK
      0  fb66					      EXIT_UNLESS_SUBFRAME	LEVEL_DONE_SUBFRAME
      1  fb66		       c9 07		      cmp	#LEVEL_DONE_SUBFRAME
      2  fb68		       f0 01		      beq	.contRoutine
      3  fb6a		       60		      rts
      4  fb6b				   .contRoutine
      0  fb6b					      EXIT_IF_STONE_SLIDING
      1  fb6b		       a5 c7		      lda	movingStone
      2  fb6d		       10 01		      bpl	.contRoutine
      3  fb6f		       60		      rts
      4  fb70				   .contRoutine
   2854  fb70
   2855  fb70		       a0 00		      ldy	#0
   2856  fb72		       a2 03		      ldx	#NUM_OF_DINOSAURS-1
   2857  fb74				   .loopAnyDinosaursLeft
   2858  fb74		       b5 bd		      lda	dinoColors,X
   2859  fb76		       d0 01		      bne	.someDinosaursLive
   2860  fb78		       c8		      iny
   2861  fb79				   .someDinosaursLive
   2862  fb79		       ca		      dex
   2863  fb7a		       10 f8		      bpl	.loopAnyDinosaursLeft
   2864  fb7c		       c0 04		      cpy	#NUM_OF_DINOSAURS
   2865  fb7e		       f0 01		      beq	LevelComplete	; all dinosaurs are dead!
   2866  fb80		       60		      rts
   2867  fb81
   2868  fb81				   LevelComplete		; also jumped to from "CheckForDeath" SUBROUTINE when it's done, so the next player can be set up
   2869  fb81		       a9 0d		      lda	#STARTING_TUNE_LENGTH
   2870  fb83		       85 d0		      sta	startTuneCount
   2871  fb85		       a6 cf		      ldx	playerNum
   2872  fb87		       f6 cd		      inc	levelNum,X	; goto next level!
   2873  fb89		       b5 cd		      lda	levelNum,X
   2874  fb8b		       29 0f		      and	#LEVEL_MASK	; no more then 16 levels
   2875  fb8d		       95 cd		      sta	levelNum,X
   2876  fb8f		       20 f7 fb 	      jsr	NewScreenPrep
   2877  fb92		       a9 00		      lda	#0	; kill theme music
   2878  fb94		       85 19		      sta	AUDV0
   2879  fb96		       85 81		      sta	frameCounter
   2880  fb98		       4c de fb 	      jmp	GotoScorePrep
   2881  fb9b
   2882  fb9b				   .contStartTune
   2883  fb9b		       a5 81		      lda	frameCounter
   2884  fb9d		       29 07		      and	#MUSIC_MASK
   2885  fb9f		       d0 3d		      bne	GotoScorePrep
   2886  fba1		       c6 d0		      dec	startTuneCount
   2887  fba3		       a6 d0		      ldx	startTuneCount
   2888  fba5		       bd ea fb 	      lda	LevelBeginFreqTab,X
   2889  fba8		       85 18		      sta	AUDF1
   2890  fbaa		       a9 04		      lda	#TONE_START_TUNE
   2891  fbac		       85 16		      sta	AUDC1
   2892  fbae		       a9 0f		      lda	#VOL_START_TUNE
   2893  fbb0		       85 1a		      sta	AUDV1
   2894  fbb2		       ca		      dex
   2895  fbb3		       10 29		      bpl	GotoScorePrep
   2896  fbb5
   2897  fbb5							;start tune has finished!
   2898  fbb5		       a9 00		      lda	#0
   2899  fbb7		       85 d0		      sta	startTuneCount
   2900  fbb9		       85 ac		      sta	indexFreq
   2901  fbbb		       85 82		      sta	secondsCounter
   2902  fbbd		       85 c6		      sta	dinoMoveIndex
   2903  fbbf		       85 c1		      sta	dinoDrawIndex	; start at dinosaur 1
   2904  fbc1		       85 b4		      sta	obstacleFreeDir	; no direction possible (yet)
   2905  fbc3		       85 c7		      sta	movingStone	; stone can slide
   2906  fbc5		       85 c8		      sta	stoneThrowFlag	; allow stones to be thrown
   2907  fbc7		       85 1a		      sta	AUDV1	; kill audio for the start tune,
   2908  fbc9		       a9 08		      lda	#VOL_MAIN_THEME	; and turn audio on for the main theme.
   2909  fbcb		       85 19		      sta	AUDV0
   2910  fbcd
   2911  fbcd		       a9 1f		      lda	#TRAVEL_UP | DIRECTION_MASK
   2912  fbcf		       85 d8		      sta	dinoDirection
   2913  fbd1		       a9 2f		      lda	#TRAVEL_DOWN | DIRECTION_MASK
   2914  fbd3		       85 d9		      sta	dinoDirection+1
   2915  fbd5		       a9 4f		      lda	#TRAVEL_LEFT | DIRECTION_MASK
   2916  fbd7		       85 da		      sta	dinoDirection+2
   2917  fbd9		       a9 8f		      lda	#TRAVEL_RIGHT | DIRECTION_MASK
   2918  fbdb		       85 db		      sta	dinoDirection+3
   2919  fbdd		       60		      rts
   2920  fbde
   2921  fbde							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2922  fbde							; could just use PLA-PLA-JMP
   2923  fbde
   2924  fbde				   GotoScorePrep
   2925  fbde		       68		      pla
   2926  fbdf		       68		      pla
   2927  fbe0		       a9 f0		      lda	#>DoScorePrep
   2928  fbe2		       48		      pha
   2929  fbe3		       a9 49		      lda	#<DoScorePrep
   2930  fbe5		       38		      sec
   2931  fbe6		       e9 01		      sbc	#1
   2932  fbe8		       48		      pha
   2933  fbe9		       60		      rts
   2934  fbea
   2935  fbea							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2936  fbea							; When a level begins this is annoying
   2937  fbea							; quick tune that plays. Writes to AUDF1.
   2938  fbea
   2939  fbea				   LevelBeginFreqTab
   2940  fbea		       00 00		      .byte.b	$00,$00	; <-- end of jingle
   2941  fbec		       17 17 17 17	      .byte.b	$17,$17,$17,$17
   2942  fbf0		       13		      .byte.b	$13
   2943  fbf1		       15 15		      .byte.b	$15,$15
   2944  fbf3		       13		      .byte.b	$13
   2945  fbf4		       15 15		      .byte.b	$15,$15
   2946  fbf6		       13		      .byte.b	$13	; <-- start
   2947  fbf7				   FinishLevelBeginFreqTab
   2948  fbf7
   2949  fbf7							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   2950  fbf7
   2951  fbf7				   NewScreenPrep SUBROUTINE		;x3
   2952  fbf7		       a4 cf		      ldy	playerNum
   2953  fbf9		       b9 cd 00 	      lda.wy	levelNum,Y
   2954  fbfc		       0a		      asl		; times 2 for indexing two bytes (left and right sides of PF)
   2955  fbfd		       aa		      tax
   2956  fbfe		       bd 70 fe 	      lda	LevelConfigTab,X
   2957  fc01		       85 88		      sta	tempPtr
   2958  fc03		       bd 71 fe 	      lda	LevelConfigTab+1,X
   2959  fc06		       85 89		      sta	tempPtr+1
   2960  fc08
   2961  fc08		       a0 00		      ldy	#0
   2962  fc0a				   .loopGetStones
   2963  fc0a		       b1 88		      lda	(tempPtr),Y	; get stones for current level
   2964  fc0c		       99 92 00 	      sta.wy	stoneOrder,Y
   2965  fc0f		       c8		      iny
   2966  fc10		       c0 10		      cpy	#(End_Stones - Start_Stones)	; length of stone data
   2967  fc12		       d0 f6		      bne	.loopGetStones
   2968  fc14
   2969  fc14		       a2 00		      ldx	#0
   2970  fc16				   .loopGetDinoPosition
   2971  fc16		       b1 88		      lda	(tempPtr),Y	; place dinosaurs for current level
   2972  fc18		       95 c2		      sta	dinoPosition,X
   2973  fc1a		       e8		      inx
   2974  fc1b		       c8		      iny
   2975  fc1c		       c0 14		      cpy	#(End_Dino_Positions - Start_Stones)	; length of dinosaur position data plus the stone data
   2976  fc1e		       d0 f6		      bne	.loopGetDinoPosition
   2977  fc20
   2978  fc20		       b1 88		      lda	(tempPtr),Y
   2979  fc22		       85 84		      sta	rowCaveman	; caveman position in terms of rows (1-8)
   2980  fc24		       c8		      iny
   2981  fc25		       b1 88		      lda	(tempPtr),Y
   2982  fc27		       85 af		      sta	columnCaveman	; caveman position in terms of columns (1-10)
   2983  fc29
      0  fc29					      SET_CAVEMAN_PTRS	CaveMan_Down_Odd, ColCaveMan_Down_Odd
      1  fc29		       a9 b8		      lda	#<CaveMan_Down_Odd
      2  fc2b		       85 86		      sta	cavemanPtr
      3  fc2d		       a9 f3		      lda	#>CaveMan_Down_Odd
      4  fc2f		       85 87		      sta	cavemanPtr+1
      5  fc31		       a9 20		      lda	#<ColCaveMan_Down_Odd
      6  fc33		       85 aa		      sta	cavemanColPtr
      7  fc35		       a9 f4		      lda	#>ColCaveMan_Down_Odd
      8  fc37		       85 ab		      sta	cavemanColPtr+1
   2985  fc39
   2986  fc39		       a9 f3		      lda	#>DinoGfx_A
   2987  fc3b		       85 89		      sta	dinosaurPtr+1
   2988  fc3d		       a9 f0		      lda	#<DinoGfx_A
   2989  fc3f		       85 b9		      sta	dinoLoPtr
   2990  fc41		       85 ba		      sta	dinoLoPtr+1
   2991  fc43		       85 bb		      sta	dinoLoPtr+2
   2992  fc45		       85 bc		      sta	dinoLoPtr+3
   2993  fc47		       a9 2a		      lda	#COL_PF_STONES
   2994  fc49		       85 dc		      sta	colStones
   2995  fc4b
   2996  fc4b		       a9 36		      lda	#COL_DINO1	; Stored in ram, and when the dinosaur is dead the color is cleared to 0 as a marker.
   2997  fc4d		       85 bd		      sta	dinoColors
   2998  fc4f		       a9 56		      lda	#COL_DINO2
   2999  fc51		       85 be		      sta	dinoColors+1
   3000  fc53		       a9 ba		      lda	#COL_DINO3
   3001  fc55		       85 bf		      sta	dinoColors+2
   3002  fc57		       a9 16		      lda	#COL_DINO4
   3003  fc59		       85 c0		      sta	dinoColors+3
   3004  fc5b		       60		      rts
   3005  fc5c
   3006  fc5c							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   3007  fc5c
   3008  fc5c				   CheckForDeath SUBROUTINE		;x1
   3009  fc5c		       a5 d1		      lda	deathCounter
   3010  fc5e		       d0 1c		      bne	.checkIfGameIsOver	; branch, if game is over or a death sequenc is happening
   3011  fc60		       a5 37		      lda	CXPPMM | $30	; else, check for collision between dinosaur and caveman
   3012  fc62		       30 01		      bmi	StartDeathSequence	; - branch, if they have collided
   3013  fc64		       60		      rts
   3014  fc65
   3015  fc65				   StartDeathSequence		; also jumped to from "CheckTimeRemaing" SUBROUTINE, when time has run out.
   3016  fc65		       a9 04		      lda	#DEATH_GFX_INDEX
   3017  fc67		       85 d1		      sta	deathCounter
   3018  fc69		       a9 00		      lda	#0
   3019  fc6b		       85 81		      sta	frameCounter
   3020  fc6d		       a9 06		      lda	#TONE_DEATH
   3021  fc6f		       85 16		      sta	AUDC1
   3022  fc71		       a9 03		      lda	#FREQ_DEATH
   3023  fc73		       85 18		      sta	AUDF1
   3024  fc75		       a9 0d		      lda	#VOL_DEATH
   3025  fc77		       85 1a		      sta	AUDV1
   3026  fc79		       4c de fb 	      jmp	GotoScorePrep
   3027  fc7c
   3028  fc7c				   .checkIfGameIsOver
   3029  fc7c		       c9 ff		      cmp	#GAME_OVER_FLAG
   3030  fc7e		       d0 0d		      bne	.deathStillHappening
   3031  fc80
   3032  fc80		       a5 81		      lda	frameCounter	; the game is over,
   3033  fc82		       d0 06		      bne	.skipScoreToggle	; toggle between players everytime the framecounter runs out to show both scores.
   3034  fc84		       a5 cf		      lda	playerNum
   3035  fc86		       45 80		      eor	gameMode
   3036  fc88		       85 cf		      sta	playerNum
   3037  fc8a				   .skipScoreToggle
   3038  fc8a		       4c de fb 	      jmp	GotoScorePrep
   3039  fc8d
   3040  fc8d				   .deathStillHappening
   3041  fc8d		       a2 03		      ldx	#NUM_OF_DINOSAURS-1
   3042  fc8f		       a5 81		      lda	frameCounter
   3043  fc91		       29 0f		      and	#DEATH_FRAMES_MASK
   3044  fc93		       f0 03		      beq	.doDeathSequence
   3045  fc95		       4c de fb 	      jmp	GotoScorePrep
   3046  fc98
   3047  fc98				   .doDeathSequence
   3048  fc98				   .loopClearDinosaurs
   3049  fc98		       95 bd		      sta	dinoColors,X	; A=0
   3050  fc9a		       ca		      dex
   3051  fc9b		       10 fb		      bpl	.loopClearDinosaurs
   3052  fc9d		       85 2c		      sta	CXCLR
   3053  fc9f		       85 19		      sta	AUDV0	; kill theme music
   3054  fca1		       a5 d1		      lda	deathCounter
   3055  fca3		       0a		      asl		; times 2 to index WORD size pointers
   3056  fca4		       aa		      tax
   3057  fca5		       bd 16 fd 	      lda	DeathGfxPtrs,X
   3058  fca8		       85 86		      sta	cavemanPtr
   3059  fcaa		       bd 17 fd 	      lda	DeathGfxPtrs+1,X
   3060  fcad		       85 87		      sta	cavemanPtr+1
   3061  fcaf		       a9 04		      lda	#<DeathGfxColTab
   3062  fcb1		       85 aa		      sta	cavemanColPtr
   3063  fcb3		       a9 fd		      lda	#>DeathGfxColTab
   3064  fcb5		       85 ab		      sta	cavemanColPtr+1
   3065  fcb7		       bd 0c fd 	      lda	DeathSoundFreqTab,X
   3066  fcba		       85 18		      sta	AUDF1
   3067  fcbc		       c6 d1		      dec	deathCounter
   3068  fcbe		       f0 03		      beq	.finishDeathSequence
   3069  fcc0		       4c de fb 	      jmp	GotoScorePrep
   3070  fcc3
   3071  fcc3				   .finishDeathSequence
   3072  fcc3		       a9 00		      lda	#0
   3073  fcc5		       85 1a		      sta	AUDV1
   3074  fcc7		       a6 cf		      ldx	playerNum
   3075  fcc9		       d6 d2		      dec	numOfLivesP0,X	; has player lost their final life?
   3076  fccb		       d0 0b		      bne	.switchPlayers	; - no, continue game, move to next player
   3077  fccd
   3078  fccd							; one of the players is completely dead, look for game over...
   3079  fccd		       e4 80		      cpx	gameMode	; who died?
   3080  fccf		       d0 07		      bne	.switchPlayers	; - branch, only if it was P0 on a two player game mode, because P1 has to lose their final life before the game is finally over
   3081  fcd1							; ** Note - the game gets away with this logic because it awards no bonus lives, and P0 will always die before P1
   3082  fcd1
   3083  fcd1							;either P0 (on a one player game), or P1 (two player game) has finished their final life, and the game is over
   3084  fcd1		       a9 ff		      lda	#GAME_OVER_FLAG
   3085  fcd3		       85 d1		      sta	deathCounter
   3086  fcd5		       4c de fb 	      jmp	GotoScorePrep
   3087  fcd8
   3088  fcd8				   .switchPlayers
   3089  fcd8		       a5 80		      lda	gameMode
   3090  fcda		       45 cf		      eor	playerNum
   3091  fcdc		       85 cf		      sta	playerNum
   3092  fcde		       aa		      tax
   3093  fcdf		       d6 cd		      dec	levelNum,X	; this is to compensate for the INC levelNum,X that is encounters in "LevelComplete",
   3094  fce1		       4c 81 fb 	      jmp	LevelComplete	; so that you don't bump up a level when the other player dies.
   3095  fce4
   3096  fce4				   DeathGfx_A
   3097  fce4		       00		      .byte.b	$00	; |	    |
   3098  fce5		       00		      .byte.b	$00	; |	    |
   3099  fce6		       00		      .byte.b	$00	; |	    |
   3100  fce7		       00		      .byte.b	$00	; |	    |
   3101  fce8		       00		      .byte.b	$00	; |	    |
   3102  fce9		       00		      .byte.b	$00	; |	    |
   3103  fcea		       00		      .byte.b	$00	; |	    |
   3104  fceb		       00		      .byte.b	$00	; |	    |
   3105  fcec				   DeathGfx_B
   3106  fcec		       00		      .byte.b	$00	; |	    |
   3107  fced		       52		      .byte.b	$52	; | X X  X |
   3108  fcee		       00		      .byte.b	$00	; |	    |
   3109  fcef		       02		      .byte.b	$02	; |	  X |
   3110  fcf0		       40		      .byte.b	$40	; | X	    |
   3111  fcf1		       00		      .byte.b	$00	; |	    |
   3112  fcf2		       4a		      .byte.b	$4A	; | X	X X |
   3113  fcf3		       00		      .byte.b	$00	; |	    |
   3114  fcf4				   DeathGfx_C
   3115  fcf4		       00		      .byte.b	$00	; |	    |
   3116  fcf5		       00		      .byte.b	$00	; |	    |
   3117  fcf6		       24		      .byte.b	$24	; |  X  X  |
   3118  fcf7		       00		      .byte.b	$00	; |	    |
   3119  fcf8		       00		      .byte.b	$00	; |	    |
   3120  fcf9		       24		      .byte.b	$24	; |  X  X  |
   3121  fcfa		       00		      .byte.b	$00	; |	    |
   3122  fcfb		       00		      .byte.b	$00	; |	    |
   3123  fcfc				   DeathGfx_D
   3124  fcfc		       00		      .byte.b	$00	; |	    |
   3125  fcfd		       00		      .byte.b	$00	; |	    |
   3126  fcfe		       00		      .byte.b	$00	; |	    |
   3127  fcff		       18		      .byte.b	$18	; |   XX   |
   3128  fd00		       18		      .byte.b	$18	; |   XX   |
   3129  fd01		       00		      .byte.b	$00	; |	    |
   3130  fd02		       00		      .byte.b	$00	; |	    |
   3131  fd03		       00		      .byte.b	$00	; |	    |
   3132  fd04				   DeathGfxColTab
   3133  fd04		       48		      .byte.b	COL_48
   3134  fd05		       48		      .byte.b	COL_48
   3135  fd06		       48		      .byte.b	COL_48
   3136  fd07		       48		      .byte.b	COL_48
   3137  fd08		       48		      .byte.b	COL_48
   3138  fd09		       48		      .byte.b	COL_48
   3139  fd0a		       48		      .byte.b	COL_48
   3140  fd0b		       48		      .byte.b	COL_48
   3141  fd0c				   DeathSoundFreqTab
   3142  fd0c		       00		      .byte.b	$00	; |	    |
   3143  fd0d		       00		      .byte.b	$00	; |	    |
   3144  fd0e		       00		      .byte.b	$00	; |	    |
   3145  fd0f		       00		      .byte.b	$00	; |	    |
   3146  fd10		       09		      .byte.b	$09	; |	X  X|
   3147  fd11		       09		      .byte.b	$09	; |	X  X|
   3148  fd12		       07		      .byte.b	$07	; |	 XXX|
   3149  fd13		       07		      .byte.b	$07	; |	 XXX|
   3150  fd14		       05		      .byte.b	$05	; |	 X X|
   3151  fd15		       05		      .byte.b	$05	; |	 X X|
   3152  fd16
   3153  fd16				   DeathGfxPtrs
   3154  fd16		       e4 fc		      .word.w	DeathGfx_A
   3155  fd18		       e4 fc		      .word.w	DeathGfx_A
   3156  fd1a		       ec fc		      .word.w	DeathGfx_B
   3157  fd1c		       f4 fc		      .word.w	DeathGfx_C
   3158  fd1e		       fc fc		      .word.w	DeathGfx_D
   3159  fd20				   EndDeathPtrs
   3160  fd20
   3161  fd20							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   3162  fd20							;			      MoveDinosaur  SUBROUTINE
   3163  fd20							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   3164  fd20
   3165  fd20				   MoveDinosaur SUBROUTINE		;x1
   3166  fd20		       a5 81		      lda	frameCounter
   3167  fd22		       a6 cf		      ldx	playerNum
   3168  fd24		       35 d6		      and	difficultyP0,X
      0  fd26					      EXIT_UNLESS_SUBFRAME	DINO_DO_MOVEMENT_SUBFRAME
      1  fd26		       c9 02		      cmp	#DINO_DO_MOVEMENT_SUBFRAME
      2  fd28		       f0 01		      beq	.contRoutine
      3  fd2a		       60		      rts
      4  fd2b				   .contRoutine
      0  fd2b					      EXIT_IF_STONE_SLIDING
      1  fd2b		       a5 c7		      lda	movingStone
      2  fd2d		       10 01		      bpl	.contRoutine
      3  fd2f		       60		      rts
      4  fd30				   .contRoutine
   3171  fd30
   3172  fd30		       20 c9 f7 	      jsr	SeparateDinoRowColumn
   3173  fd33		       a6 c6		      ldx	dinoMoveIndex
   3174  fd35		       a5 b4		      lda	obstacleFreeDir	; Get all direction choices which are not blocked by stones or screen boundaries,
   3175  fd37		       35 d8		      and	dinoDirection,X	; and eliminate whichever direction is opposite to the current one.
   3176  fd39
   3177  fd39		       85 ad		      sta	t1_dinoMoveChoices	; ( direction of current travel  |  direction choices )
   3178  fd3b
   3179  fd3b		       b5 d8		      lda	dinoDirection,X	; if dinosaur changed direction, re-allow the old opposite direction,
   3180  fd3d		       49 0f		      eor	#DIRECTION_MASK	; while blocking the new opposite direction. Then get rid of all
   3181  fd3f		       25 b4		      and	obstacleFreeDir	; directions blocked by stones (for the next movement time). This keeps dino from changing
   3182  fd41		       49 0f		      eor	#DIRECTION_MASK	; direction too much in a tight area, but freedom to move any which way in an open area.
   3183  fd43		       95 d8		      sta	dinoDirection,X
   3184  fd45
   3185  fd45							;---------------------------------------
   3186  fd45							; attract dinosaur to caveman
   3187  fd45							;---------------------------------------
   3188  fd45		       a9 f0		      lda	#(DIRECTION_MASK << 4)	; not required, as only the low 4 bits ever get AND'd and checked...
   3189  fd47		       85 ae		      sta	t2_attractDirection
   3190  fd49		       a5 b2		      lda	currentDinoRow
   3191  fd4b		       c5 84		      cmp	rowCaveman
   3192  fd4d		       f0 10		      beq	.doColumnCompare	; dinosaur and caveman are on same row, no need to move dino up/down
   3193  fd4f		       b0 08		      bcs	.tryMoveDinoUp	; dino is below caveman (down and up are reversed)
   3194  fd51		       a9 02		      lda	#DOWN_DIRECTION	; dino is above caveman
   3195  fd53		       05 ae		      ora	t2_attractDirection
   3196  fd55		       85 ae		      sta	t2_attractDirection
   3197  fd57		       d0 06		      bne	.doColumnCompare	; always branch
   3198  fd59
   3199  fd59				   .tryMoveDinoUp
   3200  fd59		       a9 01		      lda	#UP_DIRECTION
   3201  fd5b		       05 ae		      ora	t2_attractDirection
   3202  fd5d		       85 ae		      sta	t2_attractDirection
   3203  fd5f				   .doColumnCompare
   3204  fd5f		       a5 b3		      lda	currentDinoColumn
   3205  fd61		       c5 af		      cmp	columnCaveman
   3206  fd63		       f0 10		      beq	.testMovement	; dinosaur and caveman are on same column
   3207  fd65		       b0 08		      bcs	.tryMoveDinoLeft	; dino is to the right of caveman
   3208  fd67		       a9 08		      lda	#RIGHT_DIRECTION	; dino is to the left of caveman
   3209  fd69		       05 ae		      ora	t2_attractDirection
   3210  fd6b		       85 ae		      sta	t2_attractDirection
   3211  fd6d		       d0 06		      bne	.testMovement	; always branch
   3212  fd6f
   3213  fd6f				   .tryMoveDinoLeft
   3214  fd6f		       a9 04		      lda	#LEFT_DIRECTION
   3215  fd71		       05 ae		      ora	t2_attractDirection
   3216  fd73		       85 ae		      sta	t2_attractDirection
   3217  fd75				   .testMovement
   3218  fd75		       a5 ae		      lda	t2_attractDirection	; get directions that bring dino closer to caveman
   3219  fd77		       25 ad		      and	t1_dinoMoveChoices
   3220  fd79		       29 0f		      and	#DIRECTION_MASK	; can dino move towards caveman?
   3221  fd7b		       f0 05		      beq	.tryOldDirection	; - no, dino can't move towards the caveman
   3222  fd7d		       85 ad		      sta	t1_dinoDirection	; - yes, travel in one of those directions, UP/DOWN taking priority over LEFT/RIGHT
   3223  fd7f		       4c ca fd 	      jmp	DoDinosaurMovement
   3224  fd82
   3225  fd82							;---------------------------------------
   3226  fd82							; dino can't be attracted to caveman, so
   3227  fd82							; can dino continue in current direction?
   3228  fd82							;---------------------------------------
   3229  fd82				   .tryOldDirection
   3230  fd82		       a5 ad		      lda	t1_dinoMoveChoices
   3231  fd84		       4a		      lsr
   3232  fd85		       4a		      lsr
   3233  fd86		       4a		      lsr
   3234  fd87		       4a		      lsr
   3235  fd88		       85 ae		      sta	t2_dinoCurrentDir
   3236  fd8a		       25 ad		      and	t1_dinoMoveChoices	; can the dinosaur continue his current direction?
   3237  fd8c		       f0 05		      beq	.isCurrentDirClear	; - no
   3238  fd8e		       85 ad		      sta	t1_dinoDirection	; - yes, travel in that direction
   3239  fd90		       4c ca fd 	      jmp	DoDinosaurMovement
   3240  fd93
   3241  fd93				   .isCurrentDirClear
   3242  fd93		       a5 ae		      lda	t2_dinoCurrentDir	; is forward unblocked for dino?
   3243  fd95		       25 b4		      and	obstacleFreeDir
   3244  fd97		       d0 1a		      bne	.canDino90degreeTurn	; - yes
   3245  fd99
   3246  fd99		       a5 ae		      lda	t2_dinoCurrentDir	; - no, reverse directions
   3247  fd9b		       c9 01		      cmp	#UP_DIRECTION
   3248  fd9d		       d0 03		      bne	.seeDinoDown
   3249  fd9f		       0a		      asl		; change to DOWN_DIRECTION
   3250  fda0		       d0 0f		      bne	.storeOppositeDir	; always branch
   3251  fda2
   3252  fda2				   .seeDinoDown
   3253  fda2		       c9 02		      cmp	#DOWN_DIRECTION
   3254  fda4		       d0 03		      bne	.seeDinoLeft
   3255  fda6		       4a		      lsr		; change to UP_DIRECTION
   3256  fda7		       d0 08		      bne	.storeOppositeDir	; always branch
   3257  fda9
   3258  fda9				   .seeDinoLeft
   3259  fda9		       c9 04		      cmp	#LEFT_DIRECTION
   3260  fdab		       d0 03		      bne	.doDinoRight
   3261  fdad		       0a		      asl		; change to RIGHT_DIRECTION
   3262  fdae		       d0 01		      bne	.storeOppositeDir	; always branch
   3263  fdb0
   3264  fdb0				   .doDinoRight
   3265  fdb0		       4a		      lsr		; change to RIGHT_DIRECTION
   3266  fdb1				   .storeOppositeDir
   3267  fdb1		       85 ae		      sta	t2_dinoCurrentDir	; updated to travel in opposite direction!
   3268  fdb3				   .canDino90degreeTurn
   3269  fdb3		       a5 ad		      lda	t1_dinoMoveChoices
   3270  fdb5		       29 0f		      and	#DIRECTION_MASK
   3271  fdb7		       f0 05		      beq	.moveDinoFwdOrBack	; - dino can not do a 90 degree turn, travel in current direction or do 180 turn
   3272  fdb9		       85 ad		      sta	t1_dinoDirection
   3273  fdbb		       4c ca fd 	      jmp	DoDinosaurMovement
   3274  fdbe
   3275  fdbe				   .moveDinoFwdOrBack
   3276  fdbe		       a5 ae		      lda	t2_dinoCurrentDir
   3277  fdc0		       25 b4		      and	obstacleFreeDir
   3278  fdc2		       f0 05		      beq	.dinosaurCantMove
   3279  fdc4		       85 ad		      sta	t1_dinoDirection
   3280  fdc6		       4c ca fd 	      jmp	DoDinosaurMovement
   3281  fdc9
   3282  fdc9				   .dinosaurCantMove
   3283  fdc9		       60		      rts
   3284  fdca
   3285  fdca				   DoDinosaurMovement
   3286  fdca		       a5 ad		      lda	t1_dinoDirection
   3287  fdcc		       4a		      lsr
   3288  fdcd		       90 03		      bcc	.checkDinoDown
   3289  fdcf		       4c 14 f5 	      jmp	MoveDinoUp
   3290  fdd2
   3291  fdd2				   .checkDinoDown
   3292  fdd2		       4a		      lsr
   3293  fdd3		       90 03		      bcc	.checkDinoLeft
   3294  fdd5		       4c 2a f5 	      jmp	MoveDinoDown
   3295  fdd8
   3296  fdd8				   .checkDinoLeft
   3297  fdd8		       4a		      lsr
   3298  fdd9		       90 03		      bcc	.defaultDinoRight
   3299  fddb		       4c 40 f5 	      jmp	MoveDinoLeft
   3300  fdde
   3301  fdde				   .defaultDinoRight
   3302  fdde		       4c 5a f5 	      jmp	MoveDinoRight
   3303  fde1
   3304  fde1							;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   3305  fde1
   3306  fde1				   CheckSwitches SUBROUTINE		;x1
   3307  fde1		       a2 07		      ldx	#HARD_SETTING_MASK	; these masks AND with the frameCounter, controlling how fast the dinosaurs can move
   3308  fde3		       a9 0f		      lda	#EASY_SETTING_MASK
   3309  fde5		       85 d6		      sta	difficultyP0
   3310  fde7		       85 d7		      sta	difficultyP1	; default to easy setting
   3311  fde9		       ad 82 02 	      lda	SWCHB
   3312  fdec
   3313  fdec				  -	      IF	REVERSED_CONTROLS
   3314  fdec				  -	      bmi	.checkP0difficulty
   3315  fdec				  -	      stx	difficultyP0
   3316  fdec				  -.checkP0difficulty
   3317  fdec				  -	      and	#DIFFICULTY_SWITCH_P1
   3318  fdec				  -	      bne	.checkSelectSwitch
   3319  fdec				  -	      stx	difficultyP1
   3320  fdec				  -.checkSelectSwitch
   3321  fdec				  -
   3322  fdec					      ELSE
   3323  fdec		       10 02		      bpl	.checkP0difficulty
   3324  fdee		       86 d7		      stx	difficultyP1
   3325  fdf0				   .checkP0difficulty
   3326  fdf0		       29 40		      and	#DIFFICULTY_SWITCH_P1
   3327  fdf2		       f0 02		      beq	.checkSelectSwitch
   3328  fdf4		       86 d6		      stx	difficultyP0
   3329  fdf6				   .checkSelectSwitch
   3330  fdf6					      ENDIF
   3331  fdf6
   3332  fdf6		       ad 82 02 	      lda	SWCHB
   3333  fdf9		       29 02		      and	#SELECT_SWITCH
   3334  fdfb		       45 de		      eor	switchesEor
   3335  fdfd		       29 02		      and	#SELECT_SWITCH
   3336  fdff		       f0 11		      beq	.checkReset
   3337  fe01		       45 de		      eor	switchesEor
   3338  fe03		       85 de		      sta	switchesEor
   3339  fe05		       29 02		      and	#SELECT_SWITCH
   3340  fe07		       d0 09		      bne	.checkReset
   3341  fe09		       a5 80		      lda	gameMode
   3342  fe0b		       49 01		      eor	#SELECT_GAME_MODE
   3343  fe0d		       85 80		      sta	gameMode
   3344  fe0f		       4c 29 fe 	      jmp	DoReset
   3345  fe12
   3346  fe12				   .checkReset
   3347  fe12		       ad 82 02 	      lda	SWCHB
   3348  fe15		       29 01		      and	#RESET_SWITCH
   3349  fe17		       45 de		      eor	switchesEor
   3350  fe19		       29 01		      and	#RESET_SWITCH
   3351  fe1b		       f0 0b		      beq	.exitSwitchesCheck
   3352  fe1d		       45 de		      eor	switchesEor
   3353  fe1f		       85 de		      sta	switchesEor
   3354  fe21		       29 01		      and	#RESET_SWITCH
   3355  fe23		       d0 03		      bne	.exitSwitchesCheck
   3356  fe25		       4c 29 fe 	      jmp	DoReset
   3357  fe28
   3358  fe28				   .exitSwitchesCheck
   3359  fe28		       60		      rts
   3360  fe29
   3361  fe29				   DoReset
   3362  fe29		       a9 00		      lda	#0
   3363  fe2b		       85 19		      sta	AUDV0	; kill all music
   3364  fe2d		       85 1a		      sta	AUDV1
   3365  fe2f		       85 2c		      sta	CXCLR
   3366  fe31		       85 e6		      sta	moveCavemanFlag
   3367  fe33		       a2 00		      ldx	#0
   3368  fe35
   3369  fe35							;clear the following to 0:
   3370  fe35							;  scoreBcdLow        ds 2  ; $C9-$CA	  P0,P1
   3371  fe35							;  scoreBcdMid        ds 2  ; $CB-$CC	  P0,P1
   3372  fe35							;  levelNum	       ds 2  ; $CD-$CE	  P0,P1
   3373  fe35							;  playerNum	       ds 1  ; $CF
   3374  fe35							;  startTuneCount     ds 1  ; $D0
   3375  fe35							;  deathCounter       ds 1  ; $D1
   3376  fe35
   3377  fe35				   .loopClearForLevelStart
   3378  fe35		       95 c9		      sta	scoreBcdLow,X
   3379  fe37		       e8		      inx
   3380  fe38		       e0 09		      cpx	#(deathCounter-scoreBcdLow)+1
   3381  fe3a		       d0 f9		      bne	.loopClearForLevelStart
   3382  fe3c		       a9 80		      lda	#ALLOW_JOYSTICK_FLAG
   3383  fe3e		       85 df		      sta	joystickDelay
   3384  fe40		       a9 03		      lda	#START_LIVES
   3385  fe42		       85 d2		      sta	numOfLivesP0
   3386  fe44		       a4 80		      ldy	gameMode	; Is it a 2 player game?
   3387  fe46		       d0 02		      bne	.setLivesDisplayP1	; - yes
   3388  fe48		       a9 00		      lda	#0	; - no, set lives for P1 to zero, and they won't appear on screen
   3389  fe4a				   .setLivesDisplayP1
   3390  fe4a		       85 d3		      sta	numOfLivesP1
   3391  fe4c		       20 f7 fb 	      jsr	NewScreenPrep
   3392  fe4f		       a9 0d		      lda	#STARTING_TUNE_LENGTH
   3393  fe51		       85 d0		      sta	startTuneCount
   3394  fe53		       4c de fb 	      jmp	GotoScorePrep
   3395  fe56
   3396  fe56					      IF	SHOW_FREE_BYTES
 26 free bytes
   3397  fe56					      ECHO	[$FE70-*]d, "free bytes"
   3398  fe56					      ENDIF
   3399  fe56		       00 01	   SHOW_FREE_BYTES =	1
   3400  fe56
   3401  fe70					      ORG	$FE70, 0
   3402  fe70
   3403  fe70				   LevelConfigTab
   3404  fe70		       90 fe		      .word.w	Level_01
   3405  fe72		       bc fe		      .word.w	Level_02
   3406  fe74		       a6 fe		      .word.w	Level_03
   3407  fe76		       fe fe		      .word.w	Level_04
   3408  fe78		       da ff		      .word.w	Level_05
   3409  fe7a		       2a ff		      .word.w	Level_06
   3410  fe7c		       c4 ff		      .word.w	Level_07
   3411  fe7e		       14 ff		      .word.w	Level_08
   3412  fe80		       98 ff		      .word.w	Level_09
   3413  fe82		       e8 fe		      .word.w	Level_10
   3414  fe84		       82 ff		      .word.w	Level_11
   3415  fe86		       40 ff		      .word.w	Level_12
   3416  fe88		       ae ff		      .word.w	Level_13
   3417  fe8a		       d2 fe		      .word.w	Level_14
   3418  fe8c		       56 ff		      .word.w	Level_15
   3419  fe8e		       6c ff		      .word.w	Level_16
   3420  fe90
   3421  fe90				   Level_01
   3422  fe90				   Start_Stones
      0  fe90					      stones	___X_X____
      1  fe90		       02 10		      .word.w	___X_X____
      0  fe92					      stones	XX_X_XXXX_
      1  fe92		       1a 1e		      .word.w	XX_X_XXXX_
      0  fe94					      stones	___X______
      1  fe94		       02 00		      .word.w	___X______
      0  fe96					      stones	_XXX_XX_X_
      1  fe96		       0e 1a		      .word.w	_XXX_XX_X_
      0  fe98					      stones	______X_X_
      1  fe98		       00 0a		      .word.w	______X_X_
      0  fe9a					      stones	XX_X__X_X_
      1  fe9a		       1a 0a		      .word.w	XX_X__X_X_
      0  fe9c					      stones	_X_XX_X_XX
      1  fe9c		       0b 0b		      .word.w	_X_XX_X_XX
      0  fe9e					      stones	___X__X___
      1  fe9e		       02 08		      .word.w	___X__X___
   3431  fea0				   End_Stones
   3432  fea0
   3433  fea0				   Start_Dino_Positions
      0  fea0					      dino1PosXY	1,8
      0  fea0					      checkX	1
      1  fea0				  -	      IF	(1 = 0)
      2  fea0				  -	      postionError
      3  fea0					      ENDIF
      4  fea0				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  fea0				  -	      postionError
      6  fea0					      ENDIF
      0  fea0					      checkY	8
      1  fea0				  -	      IF	(8 = 0)
      2  fea0				  -	      postionError
      3  fea0					      ENDIF
      4  fea0				  -	      IF	(8 > NUM_OF_ROWS)
      5  fea0				  -	      postionError
      6  fea0					      ENDIF
      3  fea0		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  fea1					      dino2PosXY	10,8
      0  fea1					      checkX	10
      1  fea1				  -	      IF	(10 = 0)
      2  fea1				  -	      postionError
      3  fea1					      ENDIF
      4  fea1				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  fea1				  -	      postionError
      6  fea1					      ENDIF
      0  fea1					      checkY	8
      1  fea1				  -	      IF	(8 = 0)
      2  fea1				  -	      postionError
      3  fea1					      ENDIF
      4  fea1				  -	      IF	(8 > NUM_OF_ROWS)
      5  fea1				  -	      postionError
      6  fea1					      ENDIF
      3  fea1		       1a		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 10
      0  fea2					      dino3PosXY	1,1
      0  fea2					      checkX	1
      1  fea2				  -	      IF	(1 = 0)
      2  fea2				  -	      postionError
      3  fea2					      ENDIF
      4  fea2				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  fea2				  -	      postionError
      6  fea2					      ENDIF
      0  fea2					      checkY	1
      1  fea2				  -	      IF	(1 = 0)
      2  fea2				  -	      postionError
      3  fea2					      ENDIF
      4  fea2				  -	      IF	(1 > NUM_OF_ROWS)
      5  fea2				  -	      postionError
      6  fea2					      ENDIF
      3  fea2		       81		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 1
      0  fea3					      dino4PosXY	10,1
      0  fea3					      checkX	10
      1  fea3				  -	      IF	(10 = 0)
      2  fea3				  -	      postionError
      3  fea3					      ENDIF
      4  fea3				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  fea3				  -	      postionError
      6  fea3					      ENDIF
      0  fea3					      checkY	1
      1  fea3				  -	      IF	(1 = 0)
      2  fea3				  -	      postionError
      3  fea3					      ENDIF
      4  fea3				  -	      IF	(1 > NUM_OF_ROWS)
      5  fea3				  -	      postionError
      6  fea3					      ENDIF
      3  fea3		       8a		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 10
   3438  fea4				   End_Dino_Positions
      0  fea4					      cavemanPosXY	5,5
      0  fea4					      checkX	5
      1  fea4				  -	      IF	(5 = 0)
      2  fea4				  -	      postionError
      3  fea4					      ENDIF
      4  fea4				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  fea4				  -	      postionError
      6  fea4					      ENDIF
      0  fea4					      checkY	5
      1  fea4				  -	      IF	(5 = 0)
      2  fea4				  -	      postionError
      3  fea4					      ENDIF
      4  fea4				  -	      IF	(5 > NUM_OF_ROWS)
      5  fea4				  -	      postionError
      6  fea4					      ENDIF
      3  fea4		       04		      .byte.b	NUM_OF_ROWS+1-5
      4  fea5		       05		      .byte.b	5
   3440  fea6
   3441  fea6				   Level_03
      0  fea6					      stones	____X___X_
      1  fea6		       01 02		      .word.w	____X___X_
      0  fea8					      stones	_X_XX_XXX_
      1  fea8		       0b 0e		      .word.w	_X_XX_XXX_
      0  feaa					      stones	_X__X_____
      1  feaa		       09 00		      .word.w	_X__X_____
      0  feac					      stones	_XX_XX_XX_
      1  feac		       0d 16		      .word.w	_XX_XX_XX_
      0  feae					      stones	_______X__
      1  feae		       00 04		      .word.w	_______X__
      0  feb0					      stones	_XXX___X__
      1  feb0		       0e 04		      .word.w	_XXX___X__
      0  feb2					      stones	XX___XXX__
      1  feb2		       18 1c		      .word.w	XX___XXX__
      0  feb4					      stones	__________
      1  feb4		       00 00		      .word.w	__________
   3450  feb6
      0  feb6					      dino1PosXY	3,8
      0  feb6					      checkX	3
      1  feb6				  -	      IF	(3 = 0)
      2  feb6				  -	      postionError
      3  feb6					      ENDIF
      4  feb6				  -	      IF	(3 > NUM_OF_COLUMNS)
      5  feb6				  -	      postionError
      6  feb6					      ENDIF
      0  feb6					      checkY	8
      1  feb6				  -	      IF	(8 = 0)
      2  feb6				  -	      postionError
      3  feb6					      ENDIF
      4  feb6				  -	      IF	(8 > NUM_OF_ROWS)
      5  feb6				  -	      postionError
      6  feb6					      ENDIF
      3  feb6		       13		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 3
      0  feb7					      dino2PosXY	10,6
      0  feb7					      checkX	10
      1  feb7				  -	      IF	(10 = 0)
      2  feb7				  -	      postionError
      3  feb7					      ENDIF
      4  feb7				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  feb7				  -	      postionError
      6  feb7					      ENDIF
      0  feb7					      checkY	6
      1  feb7				  -	      IF	(6 = 0)
      2  feb7				  -	      postionError
      3  feb7					      ENDIF
      4  feb7				  -	      IF	(6 > NUM_OF_ROWS)
      5  feb7				  -	      postionError
      6  feb7					      ENDIF
      3  feb7		       3a		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 10
      0  feb8					      dino3PosXY	1,4
      0  feb8					      checkX	1
      1  feb8				  -	      IF	(1 = 0)
      2  feb8				  -	      postionError
      3  feb8					      ENDIF
      4  feb8				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  feb8				  -	      postionError
      6  feb8					      ENDIF
      0  feb8					      checkY	4
      1  feb8				  -	      IF	(4 = 0)
      2  feb8				  -	      postionError
      3  feb8					      ENDIF
      4  feb8				  -	      IF	(4 > NUM_OF_ROWS)
      5  feb8				  -	      postionError
      6  feb8					      ENDIF
      3  feb8		       51		      .byte.b	((NUM_OF_ROWS+1-4)<<4) | 1
      0  feb9					      dino4PosXY	8,1
      0  feb9					      checkX	8
      1  feb9				  -	      IF	(8 = 0)
      2  feb9				  -	      postionError
      3  feb9					      ENDIF
      4  feb9				  -	      IF	(8 > NUM_OF_COLUMNS)
      5  feb9				  -	      postionError
      6  feb9					      ENDIF
      0  feb9					      checkY	1
      1  feb9				  -	      IF	(1 = 0)
      2  feb9				  -	      postionError
      3  feb9					      ENDIF
      4  feb9				  -	      IF	(1 > NUM_OF_ROWS)
      5  feb9				  -	      postionError
      6  feb9					      ENDIF
      3  feb9		       88		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 8
      0  feba					      cavemanPosXY	5,4
      0  feba					      checkX	5
      1  feba				  -	      IF	(5 = 0)
      2  feba				  -	      postionError
      3  feba					      ENDIF
      4  feba				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  feba				  -	      postionError
      6  feba					      ENDIF
      0  feba					      checkY	4
      1  feba				  -	      IF	(4 = 0)
      2  feba				  -	      postionError
      3  feba					      ENDIF
      4  feba				  -	      IF	(4 > NUM_OF_ROWS)
      5  feba				  -	      postionError
      6  feba					      ENDIF
      3  feba		       05		      .byte.b	NUM_OF_ROWS+1-4
      4  febb		       05		      .byte.b	5
   3456  febc
   3457  febc				   Level_02
      0  febc					      stones	__________
      1  febc		       00 00		      .word.w	__________
      0  febe					      stones	_X_XXXXXX_
      1  febe		       0b 1e		      .word.w	_X_XXXXXX_
      0  fec0					      stones	_X____X___
      1  fec0		       08 08		      .word.w	_X____X___
      0  fec2					      stones	_X_X__X_X_
      1  fec2		       0a 0a		      .word.w	_X_X__X_X_
      0  fec4					      stones	_X_X__X_X_
      1  fec4		       0a 0a		      .word.w	_X_X__X_X_
      0  fec6					      stones	___X____X_
      1  fec6		       02 02		      .word.w	___X____X_
      0  fec8					      stones	_XXXXXX_X_
      1  fec8		       0f 1a		      .word.w	_XXXXXX_X_
      0  feca					      stones	__________
      1  feca		       00 00		      .word.w	__________
   3466  fecc
      0  fecc					      dino1PosXY	1,8
      0  fecc					      checkX	1
      1  fecc				  -	      IF	(1 = 0)
      2  fecc				  -	      postionError
      3  fecc					      ENDIF
      4  fecc				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  fecc				  -	      postionError
      6  fecc					      ENDIF
      0  fecc					      checkY	8
      1  fecc				  -	      IF	(8 = 0)
      2  fecc				  -	      postionError
      3  fecc					      ENDIF
      4  fecc				  -	      IF	(8 > NUM_OF_ROWS)
      5  fecc				  -	      postionError
      6  fecc					      ENDIF
      3  fecc		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  fecd					      dino2PosXY	10,8
      0  fecd					      checkX	10
      1  fecd				  -	      IF	(10 = 0)
      2  fecd				  -	      postionError
      3  fecd					      ENDIF
      4  fecd				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  fecd				  -	      postionError
      6  fecd					      ENDIF
      0  fecd					      checkY	8
      1  fecd				  -	      IF	(8 = 0)
      2  fecd				  -	      postionError
      3  fecd					      ENDIF
      4  fecd				  -	      IF	(8 > NUM_OF_ROWS)
      5  fecd				  -	      postionError
      6  fecd					      ENDIF
      3  fecd		       1a		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 10
      0  fece					      dino3PosXY	1,1
      0  fece					      checkX	1
      1  fece				  -	      IF	(1 = 0)
      2  fece				  -	      postionError
      3  fece					      ENDIF
      4  fece				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  fece				  -	      postionError
      6  fece					      ENDIF
      0  fece					      checkY	1
      1  fece				  -	      IF	(1 = 0)
      2  fece				  -	      postionError
      3  fece					      ENDIF
      4  fece				  -	      IF	(1 > NUM_OF_ROWS)
      5  fece				  -	      postionError
      6  fece					      ENDIF
      3  fece		       81		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 1
      0  fecf					      dino4PosXY	10,1
      0  fecf					      checkX	10
      1  fecf				  -	      IF	(10 = 0)
      2  fecf				  -	      postionError
      3  fecf					      ENDIF
      4  fecf				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  fecf				  -	      postionError
      6  fecf					      ENDIF
      0  fecf					      checkY	1
      1  fecf				  -	      IF	(1 = 0)
      2  fecf				  -	      postionError
      3  fecf					      ENDIF
      4  fecf				  -	      IF	(1 > NUM_OF_ROWS)
      5  fecf				  -	      postionError
      6  fecf					      ENDIF
      3  fecf		       8a		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 10
      0  fed0					      cavemanPosXY	5,5
      0  fed0					      checkX	5
      1  fed0				  -	      IF	(5 = 0)
      2  fed0				  -	      postionError
      3  fed0					      ENDIF
      4  fed0				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  fed0				  -	      postionError
      6  fed0					      ENDIF
      0  fed0					      checkY	5
      1  fed0				  -	      IF	(5 = 0)
      2  fed0				  -	      postionError
      3  fed0					      ENDIF
      4  fed0				  -	      IF	(5 > NUM_OF_ROWS)
      5  fed0				  -	      postionError
      6  fed0					      ENDIF
      3  fed0		       04		      .byte.b	NUM_OF_ROWS+1-5
      4  fed1		       05		      .byte.b	5
   3472  fed2
   3473  fed2				   Level_14
      0  fed2					      stones	__________
      1  fed2		       00 00		      .word.w	__________
      0  fed4					      stones	_XXX__XXX_
      1  fed4		       0e 0e		      .word.w	_XXX__XXX_
      0  fed6					      stones	_X______X_
      1  fed6		       08 02		      .word.w	_X______X_
      0  fed8					      stones	____XX____
      1  fed8		       01 10		      .word.w	____XX____
      0  feda					      stones	____XX____
      1  feda		       01 10		      .word.w	____XX____
      0  fedc					      stones	_X______X_
      1  fedc		       08 02		      .word.w	_X______X_
      0  fede					      stones	_XXX__XXX_
      1  fede		       0e 0e		      .word.w	_XXX__XXX_
      0  fee0					      stones	__________
      1  fee0		       00 00		      .word.w	__________
   3482  fee2
      0  fee2					      dino1PosXY	8,8
      0  fee2					      checkX	8
      1  fee2				  -	      IF	(8 = 0)
      2  fee2				  -	      postionError
      3  fee2					      ENDIF
      4  fee2				  -	      IF	(8 > NUM_OF_COLUMNS)
      5  fee2				  -	      postionError
      6  fee2					      ENDIF
      0  fee2					      checkY	8
      1  fee2				  -	      IF	(8 = 0)
      2  fee2				  -	      postionError
      3  fee2					      ENDIF
      4  fee2				  -	      IF	(8 > NUM_OF_ROWS)
      5  fee2				  -	      postionError
      6  fee2					      ENDIF
      3  fee2		       18		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 8
      0  fee3					      dino2PosXY	1,6
      0  fee3					      checkX	1
      1  fee3				  -	      IF	(1 = 0)
      2  fee3				  -	      postionError
      3  fee3					      ENDIF
      4  fee3				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  fee3				  -	      postionError
      6  fee3					      ENDIF
      0  fee3					      checkY	6
      1  fee3				  -	      IF	(6 = 0)
      2  fee3				  -	      postionError
      3  fee3					      ENDIF
      4  fee3				  -	      IF	(6 > NUM_OF_ROWS)
      5  fee3				  -	      postionError
      6  fee3					      ENDIF
      3  fee3		       31		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 1
      0  fee4					      dino3PosXY	10,3
      0  fee4					      checkX	10
      1  fee4				  -	      IF	(10 = 0)
      2  fee4				  -	      postionError
      3  fee4					      ENDIF
      4  fee4				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  fee4				  -	      postionError
      6  fee4					      ENDIF
      0  fee4					      checkY	3
      1  fee4				  -	      IF	(3 = 0)
      2  fee4				  -	      postionError
      3  fee4					      ENDIF
      4  fee4				  -	      IF	(3 > NUM_OF_ROWS)
      5  fee4				  -	      postionError
      6  fee4					      ENDIF
      3  fee4		       6a		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 10
      0  fee5					      dino4PosXY	3,1
      0  fee5					      checkX	3
      1  fee5				  -	      IF	(3 = 0)
      2  fee5				  -	      postionError
      3  fee5					      ENDIF
      4  fee5				  -	      IF	(3 > NUM_OF_COLUMNS)
      5  fee5				  -	      postionError
      6  fee5					      ENDIF
      0  fee5					      checkY	1
      1  fee5				  -	      IF	(1 = 0)
      2  fee5				  -	      postionError
      3  fee5					      ENDIF
      4  fee5				  -	      IF	(1 > NUM_OF_ROWS)
      5  fee5				  -	      postionError
      6  fee5					      ENDIF
      3  fee5		       83		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 3
      0  fee6					      cavemanPosXY	7,5
      0  fee6					      checkX	7
      1  fee6				  -	      IF	(7 = 0)
      2  fee6				  -	      postionError
      3  fee6					      ENDIF
      4  fee6				  -	      IF	(7 > NUM_OF_COLUMNS)
      5  fee6				  -	      postionError
      6  fee6					      ENDIF
      0  fee6					      checkY	5
      1  fee6				  -	      IF	(5 = 0)
      2  fee6				  -	      postionError
      3  fee6					      ENDIF
      4  fee6				  -	      IF	(5 > NUM_OF_ROWS)
      5  fee6				  -	      postionError
      6  fee6					      ENDIF
      3  fee6		       04		      .byte.b	NUM_OF_ROWS+1-5
      4  fee7		       07		      .byte.b	7
   3488  fee8
   3489  fee8				   Level_10
      0  fee8					      stones	__________
      1  fee8		       00 00		      .word.w	__________
      0  feea					      stones	_XXX____X_
      1  feea		       0e 02		      .word.w	_XXX____X_
      0  feec					      stones	__X_______
      1  feec		       04 00		      .word.w	__X_______
      0  feee					      stones	__X_______
      1  feee		       04 00		      .word.w	__X_______
      0  fef0					      stones	_______X__
      1  fef0		       00 04		      .word.w	_______X__
      0  fef2					      stones	_______X__
      1  fef2		       00 04		      .word.w	_______X__
      0  fef4					      stones	_X____XXX_
      1  fef4		       08 0e		      .word.w	_X____XXX_
      0  fef6					      stones	__________
      1  fef6		       00 00		      .word.w	__________
   3498  fef8
      0  fef8					      dino1PosXY	5,8
      0  fef8					      checkX	5
      1  fef8				  -	      IF	(5 = 0)
      2  fef8				  -	      postionError
      3  fef8					      ENDIF
      4  fef8				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  fef8				  -	      postionError
      6  fef8					      ENDIF
      0  fef8					      checkY	8
      1  fef8				  -	      IF	(8 = 0)
      2  fef8				  -	      postionError
      3  fef8					      ENDIF
      4  fef8				  -	      IF	(8 > NUM_OF_ROWS)
      5  fef8				  -	      postionError
      6  fef8					      ENDIF
      3  fef8		       15		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 5
      0  fef9					      dino2PosXY	10,5
      0  fef9					      checkX	10
      1  fef9				  -	      IF	(10 = 0)
      2  fef9				  -	      postionError
      3  fef9					      ENDIF
      4  fef9				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  fef9				  -	      postionError
      6  fef9					      ENDIF
      0  fef9					      checkY	5
      1  fef9				  -	      IF	(5 = 0)
      2  fef9				  -	      postionError
      3  fef9					      ENDIF
      4  fef9				  -	      IF	(5 > NUM_OF_ROWS)
      5  fef9				  -	      postionError
      6  fef9					      ENDIF
      3  fef9		       4a		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 10
      0  fefa					      dino3PosXY	1,4
      0  fefa					      checkX	1
      1  fefa				  -	      IF	(1 = 0)
      2  fefa				  -	      postionError
      3  fefa					      ENDIF
      4  fefa				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  fefa				  -	      postionError
      6  fefa					      ENDIF
      0  fefa					      checkY	4
      1  fefa				  -	      IF	(4 = 0)
      2  fefa				  -	      postionError
      3  fefa					      ENDIF
      4  fefa				  -	      IF	(4 > NUM_OF_ROWS)
      5  fefa				  -	      postionError
      6  fefa					      ENDIF
      3  fefa		       51		      .byte.b	((NUM_OF_ROWS+1-4)<<4) | 1
      0  fefb					      dino4PosXY	6,1
      0  fefb					      checkX	6
      1  fefb				  -	      IF	(6 = 0)
      2  fefb				  -	      postionError
      3  fefb					      ENDIF
      4  fefb				  -	      IF	(6 > NUM_OF_COLUMNS)
      5  fefb				  -	      postionError
      6  fefb					      ENDIF
      0  fefb					      checkY	1
      1  fefb				  -	      IF	(1 = 0)
      2  fefb				  -	      postionError
      3  fefb					      ENDIF
      4  fefb				  -	      IF	(1 > NUM_OF_ROWS)
      5  fefb				  -	      postionError
      6  fefb					      ENDIF
      3  fefb		       86		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 6
      0  fefc					      cavemanPosXY	7,4
      0  fefc					      checkX	7
      1  fefc				  -	      IF	(7 = 0)
      2  fefc				  -	      postionError
      3  fefc					      ENDIF
      4  fefc				  -	      IF	(7 > NUM_OF_COLUMNS)
      5  fefc				  -	      postionError
      6  fefc					      ENDIF
      0  fefc					      checkY	4
      1  fefc				  -	      IF	(4 = 0)
      2  fefc				  -	      postionError
      3  fefc					      ENDIF
      4  fefc				  -	      IF	(4 > NUM_OF_ROWS)
      5  fefc				  -	      postionError
      6  fefc					      ENDIF
      3  fefc		       05		      .byte.b	NUM_OF_ROWS+1-4
      4  fefd		       07		      .byte.b	7
   3504  fefe
   3505  fefe				   Level_04
      0  fefe					      stones	__________
      1  fefe		       00 00		      .word.w	__________
      0  ff00					      stones	_X_XXXXXX_
      1  ff00		       0b 1e		      .word.w	_X_XXXXXX_
      0  ff02					      stones	_X_X____X_
      1  ff02		       0a 02		      .word.w	_X_X____X_
      0  ff04					      stones	_X_X__X_X_
      1  ff04		       0a 0a		      .word.w	_X_X__X_X_
      0  ff06					      stones	_X_XXXX_X_
      1  ff06		       0b 1a		      .word.w	_X_XXXX_X_
      0  ff08					      stones	_X______X_
      1  ff08		       08 02		      .word.w	_X______X_
      0  ff0a					      stones	_XXXXXXXX_
      1  ff0a		       0f 1e		      .word.w	_XXXXXXXX_
      0  ff0c					      stones	__________
      1  ff0c		       00 00		      .word.w	__________
   3514  ff0e
      0  ff0e					      dino1PosXY	5,6
      0  ff0e					      checkX	5
      1  ff0e				  -	      IF	(5 = 0)
      2  ff0e				  -	      postionError
      3  ff0e					      ENDIF
      4  ff0e				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  ff0e				  -	      postionError
      6  ff0e					      ENDIF
      0  ff0e					      checkY	6
      1  ff0e				  -	      IF	(6 = 0)
      2  ff0e				  -	      postionError
      3  ff0e					      ENDIF
      4  ff0e				  -	      IF	(6 > NUM_OF_ROWS)
      5  ff0e				  -	      postionError
      6  ff0e					      ENDIF
      3  ff0e		       35		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 5
      0  ff0f					      dino2PosXY	3,3
      0  ff0f					      checkX	3
      1  ff0f				  -	      IF	(3 = 0)
      2  ff0f				  -	      postionError
      3  ff0f					      ENDIF
      4  ff0f				  -	      IF	(3 > NUM_OF_COLUMNS)
      5  ff0f				  -	      postionError
      6  ff0f					      ENDIF
      0  ff0f					      checkY	3
      1  ff0f				  -	      IF	(3 = 0)
      2  ff0f				  -	      postionError
      3  ff0f					      ENDIF
      4  ff0f				  -	      IF	(3 > NUM_OF_ROWS)
      5  ff0f				  -	      postionError
      6  ff0f					      ENDIF
      3  ff0f		       63		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 3
      0  ff10					      dino3PosXY	1,1
      0  ff10					      checkX	1
      1  ff10				  -	      IF	(1 = 0)
      2  ff10				  -	      postionError
      3  ff10					      ENDIF
      4  ff10				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff10				  -	      postionError
      6  ff10					      ENDIF
      0  ff10					      checkY	1
      1  ff10				  -	      IF	(1 = 0)
      2  ff10				  -	      postionError
      3  ff10					      ENDIF
      4  ff10				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff10				  -	      postionError
      6  ff10					      ENDIF
      3  ff10		       81		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 1
      0  ff11					      dino4PosXY	10,1
      0  ff11					      checkX	10
      1  ff11				  -	      IF	(10 = 0)
      2  ff11				  -	      postionError
      3  ff11					      ENDIF
      4  ff11				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff11				  -	      postionError
      6  ff11					      ENDIF
      0  ff11					      checkY	1
      1  ff11				  -	      IF	(1 = 0)
      2  ff11				  -	      postionError
      3  ff11					      ENDIF
      4  ff11				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff11				  -	      postionError
      6  ff11					      ENDIF
      3  ff11		       8a		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 10
      0  ff12					      cavemanPosXY	1,8
      0  ff12					      checkX	1
      1  ff12				  -	      IF	(1 = 0)
      2  ff12				  -	      postionError
      3  ff12					      ENDIF
      4  ff12				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff12				  -	      postionError
      6  ff12					      ENDIF
      0  ff12					      checkY	8
      1  ff12				  -	      IF	(8 = 0)
      2  ff12				  -	      postionError
      3  ff12					      ENDIF
      4  ff12				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff12				  -	      postionError
      6  ff12					      ENDIF
      3  ff12		       01		      .byte.b	NUM_OF_ROWS+1-8
      4  ff13		       01		      .byte.b	1
   3520  ff14
   3521  ff14				   Level_08
      0  ff14					      stones	__________
      1  ff14		       00 00		      .word.w	__________
      0  ff16					      stones	_XXXXXXXX_
      1  ff16		       0f 1e		      .word.w	_XXXXXXXX_
      0  ff18					      stones	_X______X_
      1  ff18		       08 02		      .word.w	_X______X_
      0  ff1a					      stones	_X______X_
      1  ff1a		       08 02		      .word.w	_X______X_
      0  ff1c					      stones	_X______X_
      1  ff1c		       08 02		      .word.w	_X______X_
      0  ff1e					      stones	_X______X_
      1  ff1e		       08 02		      .word.w	_X______X_
      0  ff20					      stones	_XXXXXXXX_
      1  ff20		       0f 1e		      .word.w	_XXXXXXXX_
      0  ff22					      stones	__________
      1  ff22		       00 00		      .word.w	__________
   3530  ff24
      0  ff24					      dino1PosXY	3,6
      0  ff24					      checkX	3
      1  ff24				  -	      IF	(3 = 0)
      2  ff24				  -	      postionError
      3  ff24					      ENDIF
      4  ff24				  -	      IF	(3 > NUM_OF_COLUMNS)
      5  ff24				  -	      postionError
      6  ff24					      ENDIF
      0  ff24					      checkY	6
      1  ff24				  -	      IF	(6 = 0)
      2  ff24				  -	      postionError
      3  ff24					      ENDIF
      4  ff24				  -	      IF	(6 > NUM_OF_ROWS)
      5  ff24				  -	      postionError
      6  ff24					      ENDIF
      3  ff24		       33		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 3
      0  ff25					      dino2PosXY	10,6
      0  ff25					      checkX	10
      1  ff25				  -	      IF	(10 = 0)
      2  ff25				  -	      postionError
      3  ff25					      ENDIF
      4  ff25				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff25				  -	      postionError
      6  ff25					      ENDIF
      0  ff25					      checkY	6
      1  ff25				  -	      IF	(6 = 0)
      2  ff25				  -	      postionError
      3  ff25					      ENDIF
      4  ff25				  -	      IF	(6 > NUM_OF_ROWS)
      5  ff25				  -	      postionError
      6  ff25					      ENDIF
      3  ff25		       3a		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 10
      0  ff26					      dino3PosXY	1,3
      0  ff26					      checkX	1
      1  ff26				  -	      IF	(1 = 0)
      2  ff26				  -	      postionError
      3  ff26					      ENDIF
      4  ff26				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff26				  -	      postionError
      6  ff26					      ENDIF
      0  ff26					      checkY	3
      1  ff26				  -	      IF	(3 = 0)
      2  ff26				  -	      postionError
      3  ff26					      ENDIF
      4  ff26				  -	      IF	(3 > NUM_OF_ROWS)
      5  ff26				  -	      postionError
      6  ff26					      ENDIF
      3  ff26		       61		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 1
      0  ff27					      dino4PosXY	8,3
      0  ff27					      checkX	8
      1  ff27				  -	      IF	(8 = 0)
      2  ff27				  -	      postionError
      3  ff27					      ENDIF
      4  ff27				  -	      IF	(8 > NUM_OF_COLUMNS)
      5  ff27				  -	      postionError
      6  ff27					      ENDIF
      0  ff27					      checkY	3
      1  ff27				  -	      IF	(3 = 0)
      2  ff27				  -	      postionError
      3  ff27					      ENDIF
      4  ff27				  -	      IF	(3 > NUM_OF_ROWS)
      5  ff27				  -	      postionError
      6  ff27					      ENDIF
      3  ff27		       68		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 8
      0  ff28					      cavemanPosXY	6,5
      0  ff28					      checkX	6
      1  ff28				  -	      IF	(6 = 0)
      2  ff28				  -	      postionError
      3  ff28					      ENDIF
      4  ff28				  -	      IF	(6 > NUM_OF_COLUMNS)
      5  ff28				  -	      postionError
      6  ff28					      ENDIF
      0  ff28					      checkY	5
      1  ff28				  -	      IF	(5 = 0)
      2  ff28				  -	      postionError
      3  ff28					      ENDIF
      4  ff28				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff28				  -	      postionError
      6  ff28					      ENDIF
      3  ff28		       04		      .byte.b	NUM_OF_ROWS+1-5
      4  ff29		       06		      .byte.b	6
   3536  ff2a
   3537  ff2a				   Level_06
      0  ff2a					      stones	__________
      1  ff2a		       00 00		      .word.w	__________
      0  ff2c					      stones	_X_X_X_X__
      1  ff2c		       0a 14		      .word.w	_X_X_X_X__
      0  ff2e					      stones	_X_X_X_X__
      1  ff2e		       0a 14		      .word.w	_X_X_X_X__
      0  ff30					      stones	__X_X_X_X_
      1  ff30		       05 0a		      .word.w	__X_X_X_X_
      0  ff32					      stones	__X_X_X_X_
      1  ff32		       05 0a		      .word.w	__X_X_X_X_
      0  ff34					      stones	_X_X_X_X__
      1  ff34		       0a 14		      .word.w	_X_X_X_X__
      0  ff36					      stones	_X_X_X_X__
      1  ff36		       0a 14		      .word.w	_X_X_X_X__
      0  ff38					      stones	__________
      1  ff38		       00 00		      .word.w	__________
   3546  ff3a
      0  ff3a					      dino1PosXY	1,8
      0  ff3a					      checkX	1
      1  ff3a				  -	      IF	(1 = 0)
      2  ff3a				  -	      postionError
      3  ff3a					      ENDIF
      4  ff3a				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff3a				  -	      postionError
      6  ff3a					      ENDIF
      0  ff3a					      checkY	8
      1  ff3a				  -	      IF	(8 = 0)
      2  ff3a				  -	      postionError
      3  ff3a					      ENDIF
      4  ff3a				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff3a				  -	      postionError
      6  ff3a					      ENDIF
      3  ff3a		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  ff3b					      dino2PosXY	10,8
      0  ff3b					      checkX	10
      1  ff3b				  -	      IF	(10 = 0)
      2  ff3b				  -	      postionError
      3  ff3b					      ENDIF
      4  ff3b				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff3b				  -	      postionError
      6  ff3b					      ENDIF
      0  ff3b					      checkY	8
      1  ff3b				  -	      IF	(8 = 0)
      2  ff3b				  -	      postionError
      3  ff3b					      ENDIF
      4  ff3b				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff3b				  -	      postionError
      6  ff3b					      ENDIF
      3  ff3b		       1a		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 10
      0  ff3c					      dino3PosXY	1,1
      0  ff3c					      checkX	1
      1  ff3c				  -	      IF	(1 = 0)
      2  ff3c				  -	      postionError
      3  ff3c					      ENDIF
      4  ff3c				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff3c				  -	      postionError
      6  ff3c					      ENDIF
      0  ff3c					      checkY	1
      1  ff3c				  -	      IF	(1 = 0)
      2  ff3c				  -	      postionError
      3  ff3c					      ENDIF
      4  ff3c				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff3c				  -	      postionError
      6  ff3c					      ENDIF
      3  ff3c		       81		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 1
      0  ff3d					      dino4PosXY	10,1
      0  ff3d					      checkX	10
      1  ff3d				  -	      IF	(10 = 0)
      2  ff3d				  -	      postionError
      3  ff3d					      ENDIF
      4  ff3d				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff3d				  -	      postionError
      6  ff3d					      ENDIF
      0  ff3d					      checkY	1
      1  ff3d				  -	      IF	(1 = 0)
      2  ff3d				  -	      postionError
      3  ff3d					      ENDIF
      4  ff3d				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff3d				  -	      postionError
      6  ff3d					      ENDIF
      3  ff3d		       8a		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 10
      0  ff3e					      cavemanPosXY	5,1
      0  ff3e					      checkX	5
      1  ff3e				  -	      IF	(5 = 0)
      2  ff3e				  -	      postionError
      3  ff3e					      ENDIF
      4  ff3e				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  ff3e				  -	      postionError
      6  ff3e					      ENDIF
      0  ff3e					      checkY	1
      1  ff3e				  -	      IF	(1 = 0)
      2  ff3e				  -	      postionError
      3  ff3e					      ENDIF
      4  ff3e				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff3e				  -	      postionError
      6  ff3e					      ENDIF
      3  ff3e		       08		      .byte.b	NUM_OF_ROWS+1-1
      4  ff3f		       05		      .byte.b	5
   3552  ff40
   3553  ff40				   Level_12
      0  ff40					      stones	___X___X__
      1  ff40		       02 04		      .word.w	___X___X__
      0  ff42					      stones	_X___X___X
      1  ff42		       08 11		      .word.w	_X___X___X
      0  ff44					      stones	___X___X__
      1  ff44		       02 04		      .word.w	___X___X__
      0  ff46					      stones	_X___X___X
      1  ff46		       08 11		      .word.w	_X___X___X
      0  ff48					      stones	___X___X__
      1  ff48		       02 04		      .word.w	___X___X__
      0  ff4a					      stones	_X___X___X
      1  ff4a		       08 11		      .word.w	_X___X___X
      0  ff4c					      stones	___X___X__
      1  ff4c		       02 04		      .word.w	___X___X__
      0  ff4e					      stones	_X___X___X
      1  ff4e		       08 11		      .word.w	_X___X___X
   3562  ff50
      0  ff50					      dino1PosXY	1,8
      0  ff50					      checkX	1
      1  ff50				  -	      IF	(1 = 0)
      2  ff50				  -	      postionError
      3  ff50					      ENDIF
      4  ff50				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff50				  -	      postionError
      6  ff50					      ENDIF
      0  ff50					      checkY	8
      1  ff50				  -	      IF	(8 = 0)
      2  ff50				  -	      postionError
      3  ff50					      ENDIF
      4  ff50				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff50				  -	      postionError
      6  ff50					      ENDIF
      3  ff50		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  ff51					      dino2PosXY	7,8
      0  ff51					      checkX	7
      1  ff51				  -	      IF	(7 = 0)
      2  ff51				  -	      postionError
      3  ff51					      ENDIF
      4  ff51				  -	      IF	(7 > NUM_OF_COLUMNS)
      5  ff51				  -	      postionError
      6  ff51					      ENDIF
      0  ff51					      checkY	8
      1  ff51				  -	      IF	(8 = 0)
      2  ff51				  -	      postionError
      3  ff51					      ENDIF
      4  ff51				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff51				  -	      postionError
      6  ff51					      ENDIF
      3  ff51		       17		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 7
      0  ff52					      dino3PosXY	5,5
      0  ff52					      checkX	5
      1  ff52				  -	      IF	(5 = 0)
      2  ff52				  -	      postionError
      3  ff52					      ENDIF
      4  ff52				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  ff52				  -	      postionError
      6  ff52					      ENDIF
      0  ff52					      checkY	5
      1  ff52				  -	      IF	(5 = 0)
      2  ff52				  -	      postionError
      3  ff52					      ENDIF
      4  ff52				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff52				  -	      postionError
      6  ff52					      ENDIF
      3  ff52		       45		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 5
      0  ff53					      dino4PosXY	9,4
      0  ff53					      checkX	9
      1  ff53				  -	      IF	(9 = 0)
      2  ff53				  -	      postionError
      3  ff53					      ENDIF
      4  ff53				  -	      IF	(9 > NUM_OF_COLUMNS)
      5  ff53				  -	      postionError
      6  ff53					      ENDIF
      0  ff53					      checkY	4
      1  ff53				  -	      IF	(4 = 0)
      2  ff53				  -	      postionError
      3  ff53					      ENDIF
      4  ff53				  -	      IF	(4 > NUM_OF_ROWS)
      5  ff53				  -	      postionError
      6  ff53					      ENDIF
      3  ff53		       59		      .byte.b	((NUM_OF_ROWS+1-4)<<4) | 9
      0  ff54					      cavemanPosXY	1,2
      0  ff54					      checkX	1
      1  ff54				  -	      IF	(1 = 0)
      2  ff54				  -	      postionError
      3  ff54					      ENDIF
      4  ff54				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff54				  -	      postionError
      6  ff54					      ENDIF
      0  ff54					      checkY	2
      1  ff54				  -	      IF	(2 = 0)
      2  ff54				  -	      postionError
      3  ff54					      ENDIF
      4  ff54				  -	      IF	(2 > NUM_OF_ROWS)
      5  ff54				  -	      postionError
      6  ff54					      ENDIF
      3  ff54		       07		      .byte.b	NUM_OF_ROWS+1-2
      4  ff55		       01		      .byte.b	1
   3568  ff56
   3569  ff56				   Level_15
      0  ff56					      stones	__________
      1  ff56		       00 00		      .word.w	__________
      0  ff58					      stones	_XXXXXXXX_
      1  ff58		       0f 1e		      .word.w	_XXXXXXXX_
      0  ff5a					      stones	__________
      1  ff5a		       00 00		      .word.w	__________
      0  ff5c					      stones	_X_X__X_X_
      1  ff5c		       0a 0a		      .word.w	_X_X__X_X_
      0  ff5e					      stones	_X_X__X_X_
      1  ff5e		       0a 0a		      .word.w	_X_X__X_X_
      0  ff60					      stones	__________
      1  ff60		       00 00		      .word.w	__________
      0  ff62					      stones	_XXXXXXXX_
      1  ff62		       0f 1e		      .word.w	_XXXXXXXX_
      0  ff64					      stones	__________
      1  ff64		       00 00		      .word.w	__________
   3578  ff66
      0  ff66					      dino1PosXY	1,6
      0  ff66					      checkX	1
      1  ff66				  -	      IF	(1 = 0)
      2  ff66				  -	      postionError
      3  ff66					      ENDIF
      4  ff66				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff66				  -	      postionError
      6  ff66					      ENDIF
      0  ff66					      checkY	6
      1  ff66				  -	      IF	(6 = 0)
      2  ff66				  -	      postionError
      3  ff66					      ENDIF
      4  ff66				  -	      IF	(6 > NUM_OF_ROWS)
      5  ff66				  -	      postionError
      6  ff66					      ENDIF
      3  ff66		       31		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 1
      0  ff67					      dino2PosXY	10,6
      0  ff67					      checkX	10
      1  ff67				  -	      IF	(10 = 0)
      2  ff67				  -	      postionError
      3  ff67					      ENDIF
      4  ff67				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff67				  -	      postionError
      6  ff67					      ENDIF
      0  ff67					      checkY	6
      1  ff67				  -	      IF	(6 = 0)
      2  ff67				  -	      postionError
      3  ff67					      ENDIF
      4  ff67				  -	      IF	(6 > NUM_OF_ROWS)
      5  ff67				  -	      postionError
      6  ff67					      ENDIF
      3  ff67		       3a		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 10
      0  ff68					      dino3PosXY	1,3
      0  ff68					      checkX	1
      1  ff68				  -	      IF	(1 = 0)
      2  ff68				  -	      postionError
      3  ff68					      ENDIF
      4  ff68				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff68				  -	      postionError
      6  ff68					      ENDIF
      0  ff68					      checkY	3
      1  ff68				  -	      IF	(3 = 0)
      2  ff68				  -	      postionError
      3  ff68					      ENDIF
      4  ff68				  -	      IF	(3 > NUM_OF_ROWS)
      5  ff68				  -	      postionError
      6  ff68					      ENDIF
      3  ff68		       61		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 1
      0  ff69					      dino4PosXY	10,3
      0  ff69					      checkX	10
      1  ff69				  -	      IF	(10 = 0)
      2  ff69				  -	      postionError
      3  ff69					      ENDIF
      4  ff69				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff69				  -	      postionError
      6  ff69					      ENDIF
      0  ff69					      checkY	3
      1  ff69				  -	      IF	(3 = 0)
      2  ff69				  -	      postionError
      3  ff69					      ENDIF
      4  ff69				  -	      IF	(3 > NUM_OF_ROWS)
      5  ff69				  -	      postionError
      6  ff69					      ENDIF
      3  ff69		       6a		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 10
      0  ff6a					      cavemanPosXY	6,5
      0  ff6a					      checkX	6
      1  ff6a				  -	      IF	(6 = 0)
      2  ff6a				  -	      postionError
      3  ff6a					      ENDIF
      4  ff6a				  -	      IF	(6 > NUM_OF_COLUMNS)
      5  ff6a				  -	      postionError
      6  ff6a					      ENDIF
      0  ff6a					      checkY	5
      1  ff6a				  -	      IF	(5 = 0)
      2  ff6a				  -	      postionError
      3  ff6a					      ENDIF
      4  ff6a				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff6a				  -	      postionError
      6  ff6a					      ENDIF
      3  ff6a		       04		      .byte.b	NUM_OF_ROWS+1-5
      4  ff6b		       06		      .byte.b	6
   3584  ff6c
   3585  ff6c				   Level_16
      0  ff6c					      stones	X_________
      1  ff6c		       10 00		      .word.w	X_________
      0  ff6e					      stones	__X__X__X_
      1  ff6e		       04 12		      .word.w	__X__X__X_
      0  ff70					      stones	_X__X__X__
      1  ff70		       09 04		      .word.w	_X__X__X__
      0  ff72					      stones	__________
      1  ff72		       00 00		      .word.w	__________
      0  ff74					      stones	__X__X__X_
      1  ff74		       04 12		      .word.w	__X__X__X_
      0  ff76					      stones	_X__X__X__
      1  ff76		       09 04		      .word.w	_X__X__X__
      0  ff78					      stones	___X__X___
      1  ff78		       02 08		      .word.w	___X__X___
      0  ff7a					      stones	X________X
      1  ff7a		       10 01		      .word.w	X________X
   3594  ff7c
      0  ff7c					      dino1PosXY	7,8
      0  ff7c					      checkX	7
      1  ff7c				  -	      IF	(7 = 0)
      2  ff7c				  -	      postionError
      3  ff7c					      ENDIF
      4  ff7c				  -	      IF	(7 > NUM_OF_COLUMNS)
      5  ff7c				  -	      postionError
      6  ff7c					      ENDIF
      0  ff7c					      checkY	8
      1  ff7c				  -	      IF	(8 = 0)
      2  ff7c				  -	      postionError
      3  ff7c					      ENDIF
      4  ff7c				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff7c				  -	      postionError
      6  ff7c					      ENDIF
      3  ff7c		       17		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 7
      0  ff7d					      dino2PosXY	1,5
      0  ff7d					      checkX	1
      1  ff7d				  -	      IF	(1 = 0)
      2  ff7d				  -	      postionError
      3  ff7d					      ENDIF
      4  ff7d				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff7d				  -	      postionError
      6  ff7d					      ENDIF
      0  ff7d					      checkY	5
      1  ff7d				  -	      IF	(5 = 0)
      2  ff7d				  -	      postionError
      3  ff7d					      ENDIF
      4  ff7d				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff7d				  -	      postionError
      6  ff7d					      ENDIF
      3  ff7d		       41		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 1
      0  ff7e					      dino3PosXY	10,5
      0  ff7e					      checkX	10
      1  ff7e				  -	      IF	(10 = 0)
      2  ff7e				  -	      postionError
      3  ff7e					      ENDIF
      4  ff7e				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff7e				  -	      postionError
      6  ff7e					      ENDIF
      0  ff7e					      checkY	5
      1  ff7e				  -	      IF	(5 = 0)
      2  ff7e				  -	      postionError
      3  ff7e					      ENDIF
      4  ff7e				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff7e				  -	      postionError
      6  ff7e					      ENDIF
      3  ff7e		       4a		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 10
      0  ff7f					      dino4PosXY	6,1
      0  ff7f					      checkX	6
      1  ff7f				  -	      IF	(6 = 0)
      2  ff7f				  -	      postionError
      3  ff7f					      ENDIF
      4  ff7f				  -	      IF	(6 > NUM_OF_COLUMNS)
      5  ff7f				  -	      postionError
      6  ff7f					      ENDIF
      0  ff7f					      checkY	1
      1  ff7f				  -	      IF	(1 = 0)
      2  ff7f				  -	      postionError
      3  ff7f					      ENDIF
      4  ff7f				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff7f				  -	      postionError
      6  ff7f					      ENDIF
      3  ff7f		       86		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 6
      0  ff80					      cavemanPosXY	4,5
      0  ff80					      checkX	4
      1  ff80				  -	      IF	(4 = 0)
      2  ff80				  -	      postionError
      3  ff80					      ENDIF
      4  ff80				  -	      IF	(4 > NUM_OF_COLUMNS)
      5  ff80				  -	      postionError
      6  ff80					      ENDIF
      0  ff80					      checkY	5
      1  ff80				  -	      IF	(5 = 0)
      2  ff80				  -	      postionError
      3  ff80					      ENDIF
      4  ff80				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff80				  -	      postionError
      6  ff80					      ENDIF
      3  ff80		       04		      .byte.b	NUM_OF_ROWS+1-5
      4  ff81		       04		      .byte.b	4
   3600  ff82
   3601  ff82				   Level_11
      0  ff82					      stones	__XXXX____
      1  ff82		       07 10		      .word.w	__XXXX____
      0  ff84					      stones	_XXXXX_XXX
      1  ff84		       0f 17		      .word.w	_XXXXX_XXX
      0  ff86					      stones	_XX____XXX
      1  ff86		       0c 07		      .word.w	_XX____XXX
      0  ff88					      stones	____XX____
      1  ff88		       01 10		      .word.w	____XX____
      0  ff8a					      stones	X_XXXX_XX_
      1  ff8a		       17 16		      .word.w	X_XXXX_XX_
      0  ff8c					      stones	X_XX___XX_
      1  ff8c		       16 06		      .word.w	X_XX___XX_
      0  ff8e					      stones	X____X_XX_
      1  ff8e		       10 16		      .word.w	X____X_XX_
      0  ff90					      stones	XXXXXX____
      1  ff90		       1f 10		      .word.w	XXXXXX____
   3610  ff92
      0  ff92					      dino1PosXY	1,5
      0  ff92					      checkX	1
      1  ff92				  -	      IF	(1 = 0)
      2  ff92				  -	      postionError
      3  ff92					      ENDIF
      4  ff92				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ff92				  -	      postionError
      6  ff92					      ENDIF
      0  ff92					      checkY	5
      1  ff92				  -	      IF	(5 = 0)
      2  ff92				  -	      postionError
      3  ff92					      ENDIF
      4  ff92				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff92				  -	      postionError
      6  ff92					      ENDIF
      3  ff92		       41		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 1
      0  ff93					      dino2PosXY	7,5
      0  ff93					      checkX	7
      1  ff93				  -	      IF	(7 = 0)
      2  ff93				  -	      postionError
      3  ff93					      ENDIF
      4  ff93				  -	      IF	(7 > NUM_OF_COLUMNS)
      5  ff93				  -	      postionError
      6  ff93					      ENDIF
      0  ff93					      checkY	5
      1  ff93				  -	      IF	(5 = 0)
      2  ff93				  -	      postionError
      3  ff93					      ENDIF
      4  ff93				  -	      IF	(5 > NUM_OF_ROWS)
      5  ff93				  -	      postionError
      6  ff93					      ENDIF
      3  ff93		       47		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 7
      0  ff94					      dino3PosXY	2,2
      0  ff94					      checkX	2
      1  ff94				  -	      IF	(2 = 0)
      2  ff94				  -	      postionError
      3  ff94					      ENDIF
      4  ff94				  -	      IF	(2 > NUM_OF_COLUMNS)
      5  ff94				  -	      postionError
      6  ff94					      ENDIF
      0  ff94					      checkY	2
      1  ff94				  -	      IF	(2 = 0)
      2  ff94				  -	      postionError
      3  ff94					      ENDIF
      4  ff94				  -	      IF	(2 > NUM_OF_ROWS)
      5  ff94				  -	      postionError
      6  ff94					      ENDIF
      3  ff94		       72		      .byte.b	((NUM_OF_ROWS+1-2)<<4) | 2
      0  ff95					      dino4PosXY	10,1
      0  ff95					      checkX	10
      1  ff95				  -	      IF	(10 = 0)
      2  ff95				  -	      postionError
      3  ff95					      ENDIF
      4  ff95				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff95				  -	      postionError
      6  ff95					      ENDIF
      0  ff95					      checkY	1
      1  ff95				  -	      IF	(1 = 0)
      2  ff95				  -	      postionError
      3  ff95					      ENDIF
      4  ff95				  -	      IF	(1 > NUM_OF_ROWS)
      5  ff95				  -	      postionError
      6  ff95					      ENDIF
      3  ff95		       8a		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 10
      0  ff96					      cavemanPosXY	10,8
      0  ff96					      checkX	10
      1  ff96				  -	      IF	(10 = 0)
      2  ff96				  -	      postionError
      3  ff96					      ENDIF
      4  ff96				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ff96				  -	      postionError
      6  ff96					      ENDIF
      0  ff96					      checkY	8
      1  ff96				  -	      IF	(8 = 0)
      2  ff96				  -	      postionError
      3  ff96					      ENDIF
      4  ff96				  -	      IF	(8 > NUM_OF_ROWS)
      5  ff96				  -	      postionError
      6  ff96					      ENDIF
      3  ff96		       01		      .byte.b	NUM_OF_ROWS+1-8
      4  ff97		       0a		      .byte.b	10
   3616  ff98
   3617  ff98				   Level_09
      0  ff98					      stones	________X_
      1  ff98		       00 02		      .word.w	________X_
      0  ff9a					      stones	_XXXXXXXX_
      1  ff9a		       0f 1e		      .word.w	_XXXXXXXX_
      0  ff9c					      stones	_X___X____
      1  ff9c		       08 10		      .word.w	_X___X____
      0  ff9e					      stones	_X_X_X_X__
      1  ff9e		       0a 14		      .word.w	_X_X_X_X__
      0  ffa0					      stones	_X_X_X_X__
      1  ffa0		       0a 14		      .word.w	_X_X_X_X__
      0  ffa2					      stones	___X___X__
      1  ffa2		       02 04		      .word.w	___X___X__
      0  ffa4					      stones	_XXXXXXX__
      1  ffa4		       0f 1c		      .word.w	_XXXXXXX__
      0  ffa6					      stones	_X_____X__
      1  ffa6		       08 04		      .word.w	_X_____X__
   3626  ffa8
      0  ffa8					      dino1PosXY	2,8
      0  ffa8					      checkX	2
      1  ffa8				  -	      IF	(2 = 0)
      2  ffa8				  -	      postionError
      3  ffa8					      ENDIF
      4  ffa8				  -	      IF	(2 > NUM_OF_COLUMNS)
      5  ffa8				  -	      postionError
      6  ffa8					      ENDIF
      0  ffa8					      checkY	8
      1  ffa8				  -	      IF	(8 = 0)
      2  ffa8				  -	      postionError
      3  ffa8					      ENDIF
      4  ffa8				  -	      IF	(8 > NUM_OF_ROWS)
      5  ffa8				  -	      postionError
      6  ffa8					      ENDIF
      3  ffa8		       12		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 2
      0  ffa9					      dino2PosXY	1,3
      0  ffa9					      checkX	1
      1  ffa9				  -	      IF	(1 = 0)
      2  ffa9				  -	      postionError
      3  ffa9					      ENDIF
      4  ffa9				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ffa9				  -	      postionError
      6  ffa9					      ENDIF
      0  ffa9					      checkY	3
      1  ffa9				  -	      IF	(3 = 0)
      2  ffa9				  -	      postionError
      3  ffa9					      ENDIF
      4  ffa9				  -	      IF	(3 > NUM_OF_ROWS)
      5  ffa9				  -	      postionError
      6  ffa9					      ENDIF
      3  ffa9		       61		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 1
      0  ffaa					      dino3PosXY	5,3
      0  ffaa					      checkX	5
      1  ffaa				  -	      IF	(5 = 0)
      2  ffaa				  -	      postionError
      3  ffaa					      ENDIF
      4  ffaa				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  ffaa				  -	      postionError
      6  ffaa					      ENDIF
      0  ffaa					      checkY	3
      1  ffaa				  -	      IF	(3 = 0)
      2  ffaa				  -	      postionError
      3  ffaa					      ENDIF
      4  ffaa				  -	      IF	(3 > NUM_OF_ROWS)
      5  ffaa				  -	      postionError
      6  ffaa					      ENDIF
      3  ffaa		       65		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 5
      0  ffab					      dino4PosXY	9,2
      0  ffab					      checkX	9
      1  ffab				  -	      IF	(9 = 0)
      2  ffab				  -	      postionError
      3  ffab					      ENDIF
      4  ffab				  -	      IF	(9 > NUM_OF_COLUMNS)
      5  ffab				  -	      postionError
      6  ffab					      ENDIF
      0  ffab					      checkY	2
      1  ffab				  -	      IF	(2 = 0)
      2  ffab				  -	      postionError
      3  ffab					      ENDIF
      4  ffab				  -	      IF	(2 > NUM_OF_ROWS)
      5  ffab				  -	      postionError
      6  ffab					      ENDIF
      3  ffab		       79		      .byte.b	((NUM_OF_ROWS+1-2)<<4) | 9
      0  ffac					      cavemanPosXY	10,6
      0  ffac					      checkX	10
      1  ffac				  -	      IF	(10 = 0)
      2  ffac				  -	      postionError
      3  ffac					      ENDIF
      4  ffac				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ffac				  -	      postionError
      6  ffac					      ENDIF
      0  ffac					      checkY	6
      1  ffac				  -	      IF	(6 = 0)
      2  ffac				  -	      postionError
      3  ffac					      ENDIF
      4  ffac				  -	      IF	(6 > NUM_OF_ROWS)
      5  ffac				  -	      postionError
      6  ffac					      ENDIF
      3  ffac		       03		      .byte.b	NUM_OF_ROWS+1-6
      4  ffad		       0a		      .byte.b	10
   3632  ffae
   3633  ffae				   Level_13
      0  ffae					      stones	__________
      1  ffae		       00 00		      .word.w	__________
      0  ffb0					      stones	_XX_XX_XX_
      1  ffb0		       0d 16		      .word.w	_XX_XX_XX_
      0  ffb2					      stones	_XX_XX_XX_
      1  ffb2		       0d 16		      .word.w	_XX_XX_XX_
      0  ffb4					      stones	_XX_XX____
      1  ffb4		       0d 10		      .word.w	_XX_XX____
      0  ffb6					      stones	____XX_XX_
      1  ffb6		       01 16		      .word.w	____XX_XX_
      0  ffb8					      stones	_XX_XX_XX_
      1  ffb8		       0d 16		      .word.w	_XX_XX_XX_
      0  ffba					      stones	_XX_XX_XX_
      1  ffba		       0d 16		      .word.w	_XX_XX_XX_
      0  ffbc					      stones	__________
      1  ffbc		       00 00		      .word.w	__________
   3642  ffbe
      0  ffbe					      dino1PosXY	1,8
      0  ffbe					      checkX	1
      1  ffbe				  -	      IF	(1 = 0)
      2  ffbe				  -	      postionError
      3  ffbe					      ENDIF
      4  ffbe				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ffbe				  -	      postionError
      6  ffbe					      ENDIF
      0  ffbe					      checkY	8
      1  ffbe				  -	      IF	(8 = 0)
      2  ffbe				  -	      postionError
      3  ffbe					      ENDIF
      4  ffbe				  -	      IF	(8 > NUM_OF_ROWS)
      5  ffbe				  -	      postionError
      6  ffbe					      ENDIF
      3  ffbe		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  ffbf					      dino2PosXY	10,5
      0  ffbf					      checkX	10
      1  ffbf				  -	      IF	(10 = 0)
      2  ffbf				  -	      postionError
      3  ffbf					      ENDIF
      4  ffbf				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ffbf				  -	      postionError
      6  ffbf					      ENDIF
      0  ffbf					      checkY	5
      1  ffbf				  -	      IF	(5 = 0)
      2  ffbf				  -	      postionError
      3  ffbf					      ENDIF
      4  ffbf				  -	      IF	(5 > NUM_OF_ROWS)
      5  ffbf				  -	      postionError
      6  ffbf					      ENDIF
      3  ffbf		       4a		      .byte.b	((NUM_OF_ROWS+1-5)<<4) | 10
      0  ffc0					      dino3PosXY	4,4
      0  ffc0					      checkX	4
      1  ffc0				  -	      IF	(4 = 0)
      2  ffc0				  -	      postionError
      3  ffc0					      ENDIF
      4  ffc0				  -	      IF	(4 > NUM_OF_COLUMNS)
      5  ffc0				  -	      postionError
      6  ffc0					      ENDIF
      0  ffc0					      checkY	4
      1  ffc0				  -	      IF	(4 = 0)
      2  ffc0				  -	      postionError
      3  ffc0					      ENDIF
      4  ffc0				  -	      IF	(4 > NUM_OF_ROWS)
      5  ffc0				  -	      postionError
      6  ffc0					      ENDIF
      3  ffc0		       54		      .byte.b	((NUM_OF_ROWS+1-4)<<4) | 4
      0  ffc1					      dino4PosXY	9,1
      0  ffc1					      checkX	9
      1  ffc1				  -	      IF	(9 = 0)
      2  ffc1				  -	      postionError
      3  ffc1					      ENDIF
      4  ffc1				  -	      IF	(9 > NUM_OF_COLUMNS)
      5  ffc1				  -	      postionError
      6  ffc1					      ENDIF
      0  ffc1					      checkY	1
      1  ffc1				  -	      IF	(1 = 0)
      2  ffc1				  -	      postionError
      3  ffc1					      ENDIF
      4  ffc1				  -	      IF	(1 > NUM_OF_ROWS)
      5  ffc1				  -	      postionError
      6  ffc1					      ENDIF
      3  ffc1		       89		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 9
      0  ffc2					      cavemanPosXY	1,4
      0  ffc2					      checkX	1
      1  ffc2				  -	      IF	(1 = 0)
      2  ffc2				  -	      postionError
      3  ffc2					      ENDIF
      4  ffc2				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ffc2				  -	      postionError
      6  ffc2					      ENDIF
      0  ffc2					      checkY	4
      1  ffc2				  -	      IF	(4 = 0)
      2  ffc2				  -	      postionError
      3  ffc2					      ENDIF
      4  ffc2				  -	      IF	(4 > NUM_OF_ROWS)
      5  ffc2				  -	      postionError
      6  ffc2					      ENDIF
      3  ffc2		       05		      .byte.b	NUM_OF_ROWS+1-4
      4  ffc3		       01		      .byte.b	1
   3648  ffc4
   3649  ffc4				   Level_07
      0  ffc4					      stones	_____X_X__
      1  ffc4		       00 14		      .word.w	_____X_X__
      0  ffc6					      stones	_XXX_X_X__
      1  ffc6		       0e 14		      .word.w	_XXX_X_X__
      0  ffc8					      stones	__________
      1  ffc8		       00 00		      .word.w	__________
      0  ffca					      stones	_XX__XXX__
      1  ffca		       0c 1c		      .word.w	_XX__XXX__
      0  ffcc					      stones	_____X___X
      1  ffcc		       00 11		      .word.w	_____X___X
      0  ffce					      stones	_XXXXX____
      1  ffce		       0f 10		      .word.w	_XXXXX____
      0  ffd0					      stones	_____X_X__
      1  ffd0		       00 14		      .word.w	_____X_X__
      0  ffd2					      stones	__X__X_X__
      1  ffd2		       04 14		      .word.w	__X__X_X__
   3658  ffd4
      0  ffd4					      dino1PosXY	1,8
      0  ffd4					      checkX	1
      1  ffd4				  -	      IF	(1 = 0)
      2  ffd4				  -	      postionError
      3  ffd4					      ENDIF
      4  ffd4				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ffd4				  -	      postionError
      6  ffd4					      ENDIF
      0  ffd4					      checkY	8
      1  ffd4				  -	      IF	(8 = 0)
      2  ffd4				  -	      postionError
      3  ffd4					      ENDIF
      4  ffd4				  -	      IF	(8 > NUM_OF_ROWS)
      5  ffd4				  -	      postionError
      6  ffd4					      ENDIF
      3  ffd4		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  ffd5					      dino2PosXY	10,8
      0  ffd5					      checkX	10
      1  ffd5				  -	      IF	(10 = 0)
      2  ffd5				  -	      postionError
      3  ffd5					      ENDIF
      4  ffd5				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ffd5				  -	      postionError
      6  ffd5					      ENDIF
      0  ffd5					      checkY	8
      1  ffd5				  -	      IF	(8 = 0)
      2  ffd5				  -	      postionError
      3  ffd5					      ENDIF
      4  ffd5				  -	      IF	(8 > NUM_OF_ROWS)
      5  ffd5				  -	      postionError
      6  ffd5					      ENDIF
      3  ffd5		       1a		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 10
      0  ffd6					      dino3PosXY	1,1
      0  ffd6					      checkX	1
      1  ffd6				  -	      IF	(1 = 0)
      2  ffd6				  -	      postionError
      3  ffd6					      ENDIF
      4  ffd6				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ffd6				  -	      postionError
      6  ffd6					      ENDIF
      0  ffd6					      checkY	1
      1  ffd6				  -	      IF	(1 = 0)
      2  ffd6				  -	      postionError
      3  ffd6					      ENDIF
      4  ffd6				  -	      IF	(1 > NUM_OF_ROWS)
      5  ffd6				  -	      postionError
      6  ffd6					      ENDIF
      3  ffd6		       81		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 1
      0  ffd7					      dino4PosXY	10,1
      0  ffd7					      checkX	10
      1  ffd7				  -	      IF	(10 = 0)
      2  ffd7				  -	      postionError
      3  ffd7					      ENDIF
      4  ffd7				  -	      IF	(10 > NUM_OF_COLUMNS)
      5  ffd7				  -	      postionError
      6  ffd7					      ENDIF
      0  ffd7					      checkY	1
      1  ffd7				  -	      IF	(1 = 0)
      2  ffd7				  -	      postionError
      3  ffd7					      ENDIF
      4  ffd7				  -	      IF	(1 > NUM_OF_ROWS)
      5  ffd7				  -	      postionError
      6  ffd7					      ENDIF
      3  ffd7		       8a		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 10
      0  ffd8					      cavemanPosXY	5,4
      0  ffd8					      checkX	5
      1  ffd8				  -	      IF	(5 = 0)
      2  ffd8				  -	      postionError
      3  ffd8					      ENDIF
      4  ffd8				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  ffd8				  -	      postionError
      6  ffd8					      ENDIF
      0  ffd8					      checkY	4
      1  ffd8				  -	      IF	(4 = 0)
      2  ffd8				  -	      postionError
      3  ffd8					      ENDIF
      4  ffd8				  -	      IF	(4 > NUM_OF_ROWS)
      5  ffd8				  -	      postionError
      6  ffd8					      ENDIF
      3  ffd8		       05		      .byte.b	NUM_OF_ROWS+1-4
      4  ffd9		       05		      .byte.b	5
   3664  ffda
   3665  ffda				   Level_05
      0  ffda					      stones	__________
      1  ffda		       00 00		      .word.w	__________
      0  ffdc					      stones	_X_XXXX_XX
      1  ffdc		       0b 1b		      .word.w	_X_XXXX_XX
      0  ffde					      stones	_X____X___
      1  ffde		       08 08		      .word.w	_X____X___
      0  ffe0					      stones	_X____X___
      1  ffe0		       08 08		      .word.w	_X____X___
      0  ffe2					      stones	_X_X_XX_X_
      1  ffe2		       0a 1a		      .word.w	_X_X_XX_X_
      0  ffe4					      stones	___X____X_
      1  ffe4		       02 02		      .word.w	___X____X_
      0  ffe6					      stones	XX_XXX__X_
      1  ffe6		       1b 12		      .word.w	XX_XXX__X_
      0  ffe8					      stones	________X_
      1  ffe8		       00 02		      .word.w	________X_
   3674  ffea
      0  ffea					      dino1PosXY	1,8
      0  ffea					      checkX	1
      1  ffea				  -	      IF	(1 = 0)
      2  ffea				  -	      postionError
      3  ffea					      ENDIF
      4  ffea				  -	      IF	(1 > NUM_OF_COLUMNS)
      5  ffea				  -	      postionError
      6  ffea					      ENDIF
      0  ffea					      checkY	8
      1  ffea				  -	      IF	(8 = 0)
      2  ffea				  -	      postionError
      3  ffea					      ENDIF
      4  ffea				  -	      IF	(8 > NUM_OF_ROWS)
      5  ffea				  -	      postionError
      6  ffea					      ENDIF
      3  ffea		       11		      .byte.b	((NUM_OF_ROWS+1-8)<<4) | 1
      0  ffeb					      dino2PosXY	9,6
      0  ffeb					      checkX	9
      1  ffeb				  -	      IF	(9 = 0)
      2  ffeb				  -	      postionError
      3  ffeb					      ENDIF
      4  ffeb				  -	      IF	(9 > NUM_OF_COLUMNS)
      5  ffeb				  -	      postionError
      6  ffeb					      ENDIF
      0  ffeb					      checkY	6
      1  ffeb				  -	      IF	(6 = 0)
      2  ffeb				  -	      postionError
      3  ffeb					      ENDIF
      4  ffeb				  -	      IF	(6 > NUM_OF_ROWS)
      5  ffeb				  -	      postionError
      6  ffeb					      ENDIF
      3  ffeb		       39		      .byte.b	((NUM_OF_ROWS+1-6)<<4) | 9
      0  ffec					      dino3PosXY	3,3
      0  ffec					      checkX	3
      1  ffec				  -	      IF	(3 = 0)
      2  ffec				  -	      postionError
      3  ffec					      ENDIF
      4  ffec				  -	      IF	(3 > NUM_OF_COLUMNS)
      5  ffec				  -	      postionError
      6  ffec					      ENDIF
      0  ffec					      checkY	3
      1  ffec				  -	      IF	(3 = 0)
      2  ffec				  -	      postionError
      3  ffec					      ENDIF
      4  ffec				  -	      IF	(3 > NUM_OF_ROWS)
      5  ffec				  -	      postionError
      6  ffec					      ENDIF
      3  ffec		       63		      .byte.b	((NUM_OF_ROWS+1-3)<<4) | 3
      0  ffed					      dino4PosXY	7,1
      0  ffed					      checkX	7
      1  ffed				  -	      IF	(7 = 0)
      2  ffed				  -	      postionError
      3  ffed					      ENDIF
      4  ffed				  -	      IF	(7 > NUM_OF_COLUMNS)
      5  ffed				  -	      postionError
      6  ffed					      ENDIF
      0  ffed					      checkY	1
      1  ffed				  -	      IF	(1 = 0)
      2  ffed				  -	      postionError
      3  ffed					      ENDIF
      4  ffed				  -	      IF	(1 > NUM_OF_ROWS)
      5  ffed				  -	      postionError
      6  ffed					      ENDIF
      3  ffed		       87		      .byte.b	((NUM_OF_ROWS+1-1)<<4) | 7
      0  ffee					      cavemanPosXY	5,4
      0  ffee					      checkX	5
      1  ffee				  -	      IF	(5 = 0)
      2  ffee				  -	      postionError
      3  ffee					      ENDIF
      4  ffee				  -	      IF	(5 > NUM_OF_COLUMNS)
      5  ffee				  -	      postionError
      6  ffee					      ENDIF
      0  ffee					      checkY	4
      1  ffee				  -	      IF	(4 = 0)
      2  ffee				  -	      postionError
      3  ffee					      ENDIF
      4  ffee				  -	      IF	(4 > NUM_OF_ROWS)
      5  ffee				  -	      postionError
      6  ffee					      ENDIF
      3  ffee		       05		      .byte.b	NUM_OF_ROWS+1-4
      4  ffef		       05		      .byte.b	5
   3680  fff0
   3681  fff0
   3682  fff0		       c8		      .byte.b	$C8	; |XX	X   | $FFF0  garbage data
   3683  fff1		       0a		      .byte.b	$0A	; |	X X | $FFF1
   3684  fff2		       f0		      .byte.b	$F0	; |XXXX    | $FFF2
   3685  fff3		       02		      .byte.b	$02	; |	  X | $FFF3
   3686  fff4		       68		      .byte.b	$68	; | XX X   | $FFF4
   3687  fff5		       08		      .byte.b	$08	; |	X   | $FFF5
   3688  fff6		       90		      .byte.b	$90	; |X  X    | $FFF6
   3689  fff7		       f0		      .byte.b	$F0	; |XXXX    | $FFF7
   3690  fff8		       28		      .byte.b	$28	; |  X X   | $FFF8
   3691  fff9		       f0		      .byte.b	$F0	; |XXXX    | $FFF9
   3692  fffa		       20		      .byte.b	$20	; |  X     | $FFFA
   3693  fffb		       b9		      .byte.b	$B9	; |X XXX  X| $FFFB
   3694  fffc
   3695  fffc					      ORG	$FFFC
   3696  fffc		       00 f0		      .word.w	START
   3697  fffe
   3698  fffe		       d0		      .byte.b	$D0	; |XX X    | $FFFE  garbage data
   3699  ffff		       d6		      .byte.b	$D6	; |XX X XX | $FFFF
